<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"junyiha.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="工作学习笔记">
<meta property="og:type" content="website">
<meta property="og:title" content="junyi&#39;s blog">
<meta property="og:url" content="https://junyiha.github.io/page/28/index.html">
<meta property="og:site_name" content="junyi&#39;s blog">
<meta property="og:description" content="工作学习笔记">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="zhang junyi">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://junyiha.github.io/page/28/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>junyi's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">junyi's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">hahahahaha</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_50_loginctl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_50_loginctl/" class="post-title-link" itemprop="url">linux_2_50_loginctl</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>loginctl命令</li>
</ul>
<h2 id="linux-loginctl命令-详解"><a href="#linux-loginctl命令-详解" class="headerlink" title="linux loginctl命令 详解"></a>linux loginctl命令 详解</h2><p><code>loginctl</code> 是一个用于查看和管理用户登录会话的 systemd 工具。它提供了一种方式来检查和控制登录到系统的用户，以及相关的会话和底层的 seat、控制组（cgroup）等信息。以下是一些常用的 <code>loginctl</code> 命令以及它们的详解：</p>
<ol>
<li><p><strong>列出当前登录的用户：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-sessions</span><br></pre></td></tr></table></figure>
<p>列出当前系统上的用户登录会话。</p>
</li>
<li><p><strong>显示所有座位（seat）信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-seats</span><br></pre></td></tr></table></figure>
<p>列出系统上所有的座位，一个座位通常对应一个物理控制台或虚拟控制台。</p>
</li>
<li><p><strong>显示指定用户的登录会话信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定用户登录会话的详细信息，其中 <code>&lt;session_id&gt;</code> 是登录会话的 ID。</p>
</li>
<li><p><strong>显示座位的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-seat &lt;seat_id&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定座位的详细信息，其中 <code>&lt;seat_id&gt;</code> 是座位的 ID。</p>
</li>
<li><p><strong>显示用户的座位信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-user &lt;user_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定用户的座位信息，其中 <code>&lt;user_name&gt;</code> 是用户名。</p>
</li>
<li><p><strong>显示所有活动的座位和登录会话：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-users</span><br></pre></td></tr></table></figure>
<p>列出当前系统上所有活动的用户及其座位信息。</p>
</li>
<li><p><strong>结束用户的登录会话：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl terminate-session &lt;session_id&gt;</span><br></pre></td></tr></table></figure>
<p>结束指定用户的登录会话，其中 <code>&lt;session_id&gt;</code> 是登录会话的 ID。</p>
</li>
<li><p><strong>结束座位上的所有登录会话：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl terminate-seat &lt;seat_id&gt;</span><br></pre></td></tr></table></figure>
<p>结束指定座位上的所有登录会话，其中 <code>&lt;seat_id&gt;</code> 是座位的 ID。</p>
</li>
<li><p><strong>显示控制组（cgroup）信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt; -p ControlGroup</span><br></pre></td></tr></table></figure>
<p>显示指定用户登录会话所属的 cgroup。</p>
</li>
<li><p><strong>显示登录会话的相关进程信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl session-status &lt;session_id&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定用户登录会话的进程和资源信息。</p>
</li>
<li><p><strong>以树状结构显示用户登录信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl tree</span><br></pre></td></tr></table></figure>
<p>以树状结构显示用户登录信息，包括座位、用户和登录会话的层次结构。</p>
</li>
</ol>
<p><code>loginctl</code> 提供了一种方便的方式来查看和管理用户登录会话，尤其在多用户环境中或涉及到控制台切换的情况下非常有用。通过这些命令，管理员可以实时监控用户的登录情况，同时也可以进行会话的管理和控制。</p>
<h2 id="linux-loginctl命令-常用技巧"><a href="#linux-loginctl命令-常用技巧" class="headerlink" title="linux loginctl命令 常用技巧"></a>linux loginctl命令 常用技巧</h2><p>以下是一些在使用 <code>loginctl</code> 命令时的常用技巧：</p>
<ol>
<li><p><strong>结合 <code>--output</code> 选项显示指定字段：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt; --output=FIELD</span><br></pre></td></tr></table></figure>
<p>使用 <code>--output</code> 选项可以只显示指定的字段，替换 <code>&lt;session_id&gt;</code> 为相应的登录会话 ID，<code>FIELD</code> 为要显示的字段，例如 <code>State</code>、<code>User</code>、<code>Seat</code> 等。</p>
</li>
<li><p><strong>使用 <code>--value</code> 选项仅显示值而不显示字段名：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt; --value</span><br></pre></td></tr></table></figure>
<p>使用 <code>--value</code> 选项可以只显示字段的值而不显示字段名。</p>
</li>
<li><p><strong>显示详细的用户信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-user &lt;user_name&gt; --all</span><br></pre></td></tr></table></figure>
<p>使用 <code>--all</code> 选项可以显示更详细的用户信息，包括座位、UID、GID 等。</p>
</li>
<li><p><strong>过滤显示活动用户的座位信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-users --property=Seats</span><br></pre></td></tr></table></figure>
<p>使用 <code>--property</code> 选项可以过滤显示用户信息中的特定属性，如 <code>Seats</code>。</p>
</li>
<li><p><strong>结合 <code>grep</code> 进行筛选：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-sessions | grep &lt;filter_condition&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 命令结合 <code>list-sessions</code> 可以根据某个条件过滤显示登录会话。</p>
</li>
<li><p><strong>使用 <code>--quiet</code> 选项减少输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-users --quiet</span><br></pre></td></tr></table></figure>
<p>使用 <code>--quiet</code> 选项可以减少输出，仅显示关键信息。</p>
</li>
<li><p><strong>显示登录会话的最近活动时间：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt; -p IdletimeHint</span><br></pre></td></tr></table></figure>
<p>使用 <code>-p</code> 选项可以指定显示特定属性，例如 <code>IdletimeHint</code> 显示登录会话的最近空闲时间。</p>
</li>
<li><p><strong>显示用户登录会话的进程信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl session-status &lt;session_id&gt; --full</span><br></pre></td></tr></table></figure>
<p>使用 <code>--full</code> 选项可以显示更详细的用户登录会话进程信息。</p>
</li>
<li><p><strong>以 JSON 格式输出信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl --quiet --output=json list-users</span><br></pre></td></tr></table></figure>
<p>使用 <code>--output=json</code> 选项可以以 JSON 格式输出信息，方便后续处理。</p>
</li>
<li><p><strong>结合 <code>watch</code> 实时监控：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 loginctl list-sessions</span><br></pre></td></tr></table></figure>
<p>使用 <code>watch</code> 命令可以实时监控登录会话的变化，每秒更新一次。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>loginctl</code> 命令，根据实际需求定制输出，过滤信息，以及实时监控用户登录情况。记住根据具体情况选择合适的选项和参数。</p>
<h2 id="loginctl"><a href="#loginctl" class="headerlink" title="loginctl"></a>loginctl</h2><p><code>loginctl</code> 是一个用于管理登录会话和用户登录状态的命令行工具。它是 systemd 的一部分，用于控制 Linux 系统上的用户登录和会话管理。</p>
<p>以下是一些常用的 <code>loginctl</code> 命令及其功能：</p>
<ul>
<li><code>loginctl list-sessions</code>：列出当前活动的登录会话。它会显示每个会话的 ID、用户、登录时间等信息。</li>
<li><code>loginctl show-session &lt;session_id&gt;</code>：显示指定会话的详细信息，包括会话状态、登录用户、登录时间等。</li>
<li><code>loginctl list-users</code>：列出当前活动的用户。它会显示每个用户的 ID、用户名等信息。</li>
<li><code>loginctl show-user &lt;user_id&gt;</code>：显示指定用户的详细信息，包括用户状态、默认会话、上次登录时间等。</li>
<li><code>loginctl session-status</code>：显示当前登录用户的会话状态和详细信息。</li>
<li><code>loginctl user-status</code>：显示当前用户的状态和详细信息。</li>
<li><code>loginctl lock-session</code>：锁定当前会话。这会使屏幕进入锁定状态，要解锁屏幕，需要提供用户密码。</li>
<li><code>loginctl unlock-session</code>：解锁当前会话。这会解除屏幕锁定状态。</li>
</ul>
<p>除了上述命令之外，<code>loginctl</code> 还提供其他一些管理登录会话和用户的功能，如关闭用户会话、终止登录会话、设置默认会话等。你可以通过 <code>man loginctl</code> 命令查看更多详细信息和可用选项。</p>
<p>需要注意的是，<code>loginctl</code> 命令需要 root 或具有适当权限的用户才能执行。它在使用 systemd 作为 init 系统的 Linux 发行版中可用。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_52_lsmod/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_52_lsmod/" class="post-title-link" itemprop="url">linux_2_52_lsmod</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>lsmod命令</li>
</ul>
<h2 id="linux-lsmod命令-详解"><a href="#linux-lsmod命令-详解" class="headerlink" title="linux lsmod命令 详解"></a>linux lsmod命令 详解</h2><p><code>lsmod</code> 命令用于列出当前加载在 Linux 内核中的模块（也称为内核模块或驱动程序）。以下是关于 <code>lsmod</code> 命令的详细说明：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod</span><br></pre></td></tr></table></figure>

<h3 id="参数说明："><a href="#参数说明：" class="headerlink" title="参数说明："></a>参数说明：</h3><ul>
<li><strong>无参数：</strong> 默认情况下，<code>lsmod</code> 将列出所有已加载的内核模块及其相关信息。</li>
</ul>
<h3 id="输出信息的列说明："><a href="#输出信息的列说明：" class="headerlink" title="输出信息的列说明："></a>输出信息的列说明：</h3><ol>
<li><strong>Module：</strong> 内核模块的名称。</li>
<li><strong>Size：</strong> 内核模块占用的内存大小（以字节为单位）。</li>
<li><strong>Used by：</strong> 使用该模块的其他模块或进程的计数。</li>
<li><strong>References：</strong> 内核模块的引用计数，表示有多少个内核对象正在使用该模块。</li>
</ol>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ lsmod</span><br><span class="line">Module                  Size  Used by</span><br><span class="line">nls_utf8               16384  1</span><br><span class="line">isofs                  49152  1</span><br><span class="line">udf                    98304  0</span><br><span class="line">crc_itu_t              16384  1 udf</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="详细解释："><a href="#详细解释：" class="headerlink" title="详细解释："></a>详细解释：</h3><ul>
<li><strong>Module：</strong> 列出已加载模块的名称。</li>
<li><strong>Size：</strong> 显示每个模块占用内存的大小。</li>
<li><strong>Used by：</strong> 显示使用该模块的其他模块或进程的计数。</li>
<li><strong>References：</strong> 显示模块的引用计数，表示有多少个内核对象正在使用该模块。</li>
</ul>
<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><strong>-h, –help：</strong> 显示帮助信息。</li>
<li><strong>-V, –version：</strong> 显示命令版本信息。</li>
</ul>
<h3 id="使用示例："><a href="#使用示例：" class="headerlink" title="使用示例："></a>使用示例：</h3><ol>
<li><p><strong>显示模块详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep &lt;module_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 过滤特定模块的详细信息。</p>
</li>
<li><p><strong>按模块大小排序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | <span class="built_in">sort</span> -k2 -n</span><br></pre></td></tr></table></figure>
<p>使用 <code>sort</code> 命令按模块大小排序。</p>
</li>
<li><p><strong>只显示已使用的模块：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep -v <span class="string">&quot;^$&quot;</span> | <span class="built_in">tail</span> -n +2</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 和 <code>tail</code> 过滤并排除无效行，只显示已使用的模块。</p>
</li>
</ol>
<p><code>lsmod</code> 命令对于了解系统当前加载的内核模块非常有用，可以在排查硬件或软件问题时提供有关系统状态的重要信息。</p>
<h2 id="lsmod"><a href="#lsmod" class="headerlink" title="lsmod"></a>lsmod</h2><p><code>lsmod</code> 是 Linux 系统上的一个命令行工具，用于列出当前加载的内核模块（驱动程序）。它可以显示系统中已加载的内核模块及其关联的信息。下面是对 <code>lsmod</code> 命令的详细解释：</p>
<ol>
<li><p><code>lsmod</code>：直接运行 <code>lsmod</code> 命令将列出当前加载的所有内核模块。</p>
</li>
<li><p><code>lsmod | less</code>：通过管道将 <code>lsmod</code> 的输出传递给 <code>less</code> 命令，以便在一页一页地浏览模块列表。</p>
</li>
<li><p><code>lsmod | grep &lt;pattern&gt;</code>：使用 <code>grep</code> 命令可以在模块列表中搜索特定模块或模块名称的模式匹配。例如，<code>lsmod | grep snd</code> 将显示与 “snd” 相关的内核模块。</p>
</li>
<li><p><code>lsmod -t</code>：使用 <code>-t</code> 选项可以按模块的使用计数对模块进行排序，并将最常使用的模块显示在前面。</p>
</li>
<li><p><code>lsmod -r</code>：使用 <code>-r</code> 选项可以反向排序模块列表，以显示使用计数最低的模块。</p>
</li>
<li><p><code>lsmod -v</code>：使用 <code>-v</code> 选项可以显示更详细的模块信息，包括模块的大小、依赖关系和状态等。</p>
</li>
<li><p><code>lsmod -h</code> 或 <code>lsmod --help</code>：显示 <code>lsmod</code> 命令的帮助信息，包括可用选项和用法示例。</p>
</li>
</ol>
<p>通过 <code>lsmod</code> 命令，你可以获取有关当前加载的内核模块的信息。这对于了解系统上使用的驱动程序、模块之间的依赖关系以及进行故障排除和性能优化等操作非常有用。请注意，你可能需要以超级用户权限（root 或使用 <code>sudo</code> 命令）运行 <code>lsmod</code> 命令，以便查看完整的模块列表。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_49_systemctl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_49_systemctl/" class="post-title-link" itemprop="url">linux_2_49_systemctl</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>systemctl命令</li>
</ul>
<h2 id="linux-systemctl命令-详解"><a href="#linux-systemctl命令-详解" class="headerlink" title="linux systemctl命令 详解"></a>linux systemctl命令 详解</h2><p><code>systemctl</code> 是 Linux 系统中用于管理系统服务（system services）和套接字（sockets）的命令。它是 systemd 系统管理守护进程的一部分，负责启动、停止、重启和管理系统服务。以下是一些常用的 <code>systemctl</code> 命令以及它们的详解：</p>
<ol>
<li><p><strong>启动一个服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>启动指定名称的服务。</p>
</li>
<li><p><strong>停止一个服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>停止指定名称的服务。</p>
</li>
<li><p><strong>重启一个服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>重启指定名称的服务。</p>
</li>
<li><p><strong>查看服务状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定名称的服务的当前状态，包括是否正在运行以及相关的信息。</p>
</li>
<li><p><strong>启用服务开机自启：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>设置指定名称的服务在系统启动时自动启动。</p>
</li>
<li><p><strong>禁用服务开机自启：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>取消指定名称的服务在系统启动时自动启动。</p>
</li>
<li><p><strong>显示所有已加载的服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-units --<span class="built_in">type</span>=service</span><br></pre></td></tr></table></figure>
<p>列出所有已加载的服务及其状态。</p>
</li>
<li><p><strong>显示所有已启用的服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-unit-files --<span class="built_in">type</span>=service | grep enabled</span><br></pre></td></tr></table></figure>
<p>列出所有已启用的服务。</p>
</li>
<li><p><strong>显示服务的依赖关系：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-dependencies &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定服务的依赖关系。</p>
</li>
<li><p><strong>重新加载服务配置：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl reload &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>重新加载指定服务的配置文件，不会停止服务。</p>
</li>
<li><p><strong>显示系统的引导目标（target）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl get-default</span><br></pre></td></tr></table></figure>
<p>显示系统当前的引导目标。</p>
</li>
<li><p><strong>更改系统的引导目标：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl set-default &lt;target_name&gt;</span><br></pre></td></tr></table></figure>
<p>设置系统的引导目标。</p>
</li>
</ol>
<p>这些是一些常见的 <code>systemctl</code> 命令，可以帮助你管理和维护系统服务。通过结合这些命令，你可以轻松地启动、停止、重启服务，管理它们的开机自启设置，并查看相关的状态和依赖关系。</p>
<h2 id="linux-systemctl命令-常用技巧"><a href="#linux-systemctl命令-常用技巧" class="headerlink" title="linux systemctl命令 常用技巧"></a>linux systemctl命令 常用技巧</h2><p>除了基本的 <code>systemctl</code> 命令之外，以下是一些常用的技巧和进阶用法：</p>
<ol>
<li><p><strong>模糊搜索服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-units --<span class="built_in">type</span>=service | grep &lt;keyword&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 命令结合 <code>list-units</code> 来进行模糊搜索服务，替换 <code>&lt;keyword&gt;</code> 为你感兴趣的关键字。</p>
</li>
<li><p><strong>显示服务的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl show &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定服务的详细信息，包括配置文件路径、依赖关系等。</p>
</li>
<li><p><strong>查看引导目标的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl show default.target</span><br></pre></td></tr></table></figure>
<p>显示当前引导目标的详细信息。</p>
</li>
<li><p><strong>过滤显示服务状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --state=active</span><br></pre></td></tr></table></figure>
<p>使用 <code>--state</code> 选项过滤显示服务的状态，例如，只显示正在运行的服务。</p>
</li>
<li><p><strong>查看服务的日志：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>journalctl</code> 命令查看指定服务的日志，替换 <code>&lt;service_name&gt;</code> 为你感兴趣的服务。</p>
</li>
<li><p><strong>查看最近的引导日志：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -xe</span><br></pre></td></tr></table></figure>
<p>查看最近的引导日志，用于排查系统启动时可能遇到的问题。</p>
</li>
<li><p><strong>查看引导目标的依赖关系：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-dependencies multi-user.target</span><br></pre></td></tr></table></figure>
<p>显示指定引导目标的依赖关系。</p>
</li>
<li><p><strong>使用通配符进行操作：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart <span class="string">&#x27;nginx*&#x27;</span></span><br></pre></td></tr></table></figure>
<p>使用通配符 <code>*</code> 来一次性操作符合条件的多个服务。</p>
</li>
<li><p><strong>查看系统启动时间：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd-analyze</span><br></pre></td></tr></table></figure>
<p>查看系统的启动时间及关键步骤，可以使用 <code>systemd-analyze blame</code> 查看各个服务的启动耗时。</p>
</li>
<li><p><strong>启动失败服务的故障排查：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status &lt;service_name&gt; -l</span><br></pre></td></tr></table></figure>
<p>使用 <code>-l</code> 选项显示更多详细的日志信息，有助于排查启动失败的服务问题。</p>
</li>
<li><p><strong>使用用户级服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --user start &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>对于用户级服务，可以使用 <code>--user</code> 选项来管理。</p>
</li>
</ol>
<p>这些技巧可以帮助你更高效地使用 <code>systemctl</code> 命令，进行服务管理和故障排查。记住在使用系统管理命令时要小心，确保了解命令的影响和安全性。</p>
<h2 id="linux-systemctl命令-高级技巧"><a href="#linux-systemctl命令-高级技巧" class="headerlink" title="linux systemctl命令 高级技巧"></a>linux systemctl命令 高级技巧</h2><p>以下是一些 <code>systemctl</code> 命令的高级技巧，适用于更深入的系统管理和故障排查：</p>
<ol>
<li><p><strong>使用 <code>--quiet</code> 选项：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --quiet start &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>--quiet</code> 选项可以使 <code>systemctl</code> 命令输出更加简洁，只显示关键信息。</p>
</li>
<li><p><strong>使用 <code>--failed</code> 选项查看失败的服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --failed</span><br></pre></td></tr></table></figure>
<p>列出所有启动失败的服务，方便快速定位问题。</p>
</li>
<li><p><strong>查看服务的所有相关日志：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u &lt;service_name&gt; --no-pager</span><br></pre></td></tr></table></figure>
<p>使用 <code>--no-pager</code> 选项可以直接在终端中显示所有相关日志，而不是通过分页器。</p>
</li>
<li><p><strong>手动启动服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --no-pager --quiet start &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>--no-pager</code> 选项可以避免 <code>systemctl</code> 命令使用分页器，而 <code>--quiet</code> 则可以减少输出。</p>
</li>
<li><p><strong>显示服务的详细依赖树：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-dependencies --all &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示服务的详细依赖树，包括所有被依赖的服务。</p>
</li>
<li><p><strong>使用 <code>--force</code> 选项强制操作：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --force restart &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>--force</code> 选项可以强制执行某些操作，如强制重启服务。</p>
</li>
<li><p><strong>查看系统引导的时间线：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd-analyze plot &gt; timeline.svg</span><br></pre></td></tr></table></figure>
<p>生成引导时间线图，以 SVG 格式保存在文件中，用于可视化系统引导的整个过程。</p>
</li>
<li><p><strong>查看服务启动的时间线：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd-analyze critical-chain &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>查看指定服务启动所花费的时间和关键步骤。</p>
</li>
<li><p><strong>查看用户单元的状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --user status</span><br></pre></td></tr></table></figure>
<p>查看用户级服务单元的状态，包括用户自定义的服务。</p>
</li>
<li><p><strong>查看服务单元的所有属性：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl show &lt;service_name&gt; --all</span><br></pre></td></tr></table></figure>
<p>显示指定服务单元的所有属性，包括默认值和用户自定义值。</p>
</li>
<li><p><strong>使用 <code>systemd-cgtop</code> 监控进程和资源：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemd-cgtop</span><br></pre></td></tr></table></figure>
<p>以实时方式监控系统中的控制组（cgroup）信息，包括进程数、CPU 使用情况等。</p>
</li>
</ol>
<p>这些高级技巧可以帮助你更深入地理解和利用 <code>systemctl</code> 命令，用于更复杂的系统管理任务和故障排查。请确保在使用这些命令时理解其影响，并根据需要适度使用。</p>
<h2 id="systemctl"><a href="#systemctl" class="headerlink" title="systemctl"></a>systemctl</h2><p>Systemd 是 Linux 系统中广泛使用的 init 系统和服务管理器。<code>systemctl</code> 是 Systemd 的主要命令，用于管理系统服务。下面是一些常用的 <code>systemctl</code> 命令及其功能：</p>
<ol>
<li><p>启动和停止服务：</p>
<ul>
<li>启动一个服务：<code>sudo systemctl start servicename</code></li>
<li>停止一个服务：<code>sudo systemctl stop servicename</code></li>
<li>重启一个服务：<code>sudo systemctl restart servicename</code></li>
<li>查看服务的状态：<code>sudo systemctl status servicename</code></li>
</ul>
</li>
<li><p>禁用和启用服务的自启动：</p>
<ul>
<li>禁用一个服务的自启动：<code>sudo systemctl disable servicename</code></li>
<li>启用一个服务的自启动：<code>sudo systemctl enable servicename</code></li>
</ul>
</li>
<li><p>查看服务列表：</p>
<ul>
<li>列出所有运行中的服务：<code>sudo systemctl list-units --type=service --state=running</code></li>
<li>列出所有已启用的服务：<code>sudo systemctl list-unit-files --type=service --state=enabled</code></li>
</ul>
</li>
<li><p>查看日志：</p>
<ul>
<li>查看一个服务的日志：<code>sudo journalctl -u servicename</code></li>
<li>查看系统日志：<code>sudo journalctl</code></li>
</ul>
</li>
<li><p>查看和切换系统运行级别（target）：</p>
<ul>
<li>查看当前运行级别：<code>sudo systemctl get-default</code></li>
<li>切换运行级别到图形界面：<code>sudo systemctl set-default graphical.target</code></li>
<li>切换运行级别到多用户文本界面：<code>sudo systemctl set-default multi-user.target</code></li>
</ul>
</li>
<li><p>重新加载 Systemd 配置：</p>
<ul>
<li>重新加载 Systemd 配置：<code>sudo systemctl daemon-reload</code></li>
</ul>
</li>
</ol>
<p>这些是一些常见的 <code>systemctl</code> 命令及其功能。<code>systemctl</code> 命令还有其他一些选项和功能，你可以使用 <code>man systemctl</code> 命令来查看完整的 <code>systemctl</code> 命令手册。</p>
<p>Systemd 提供了强大的服务管理功能，可以帮助你启动、停止、管理和监控系统服务。使用 <code>systemctl</code> 命令可以方便地执行这些操作，并管理系统的运行级别和自启动行为。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_51_lspci/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_51_lspci/" class="post-title-link" itemprop="url">linux_2_51_lspci</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>lspci命令</li>
</ul>
<h2 id="linux-lspci命令-详解"><a href="#linux-lspci命令-详解" class="headerlink" title="linux lspci命令 详解"></a>linux lspci命令 详解</h2><p><code>lspci</code> 是 Linux 系统中用于列出所有 PCI（Peripheral Component Interconnect）总线上的设备信息的命令。PCI 是一种计算机总线标准，用于连接计算机内部的硬件设备。以下是一些常用的 <code>lspci</code> 命令及其详解：</p>
<ol>
<li><p><strong>列出所有 PCI 设备的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci</span><br></pre></td></tr></table></figure>
<p>不带任何选项直接运行 <code>lspci</code>，将列出系统中所有 PCI 设备的详细信息，包括设备的厂商、型号、设备 ID、驱动程序等。</p>
</li>
<li><p><strong>只显示设备的类别和描述：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -nn</span><br></pre></td></tr></table></figure>
<p>使用 <code>-nn</code> 选项可以只显示设备的类别和描述，而不显示设备的厂商和型号名称。</p>
</li>
<li><p><strong>显示详细信息，包括设备的类别、描述、厂商和型号：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -v</span><br></pre></td></tr></table></figure>
<p>使用 <code>-v</code> 选项可以显示更详细的信息，包括设备的类别、描述、厂商、型号以及设备的状态等。</p>
</li>
<li><p><strong>只显示设备的总线信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -m</span><br></pre></td></tr></table></figure>
<p>使用 <code>-m</code> 选项可以只显示设备的总线信息，将输出用机器可读的格式显示。</p>
</li>
<li><p><strong>只显示指定厂商的设备信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -d &lt;vendor_id&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>-d</code> 选项可以只显示指定厂商（Vendor）的设备信息，其中 <code>&lt;vendor_id&gt;</code> 是厂商的 ID。</p>
</li>
<li><p><strong>只显示指定设备的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -s &lt;slot&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项可以只显示指定槽位（Slot）上的设备信息，其中 <code>&lt;slot&gt;</code> 是槽位的位置。</p>
</li>
<li><p><strong>以详细格式显示指定设备的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -vv -s &lt;slot&gt;</span><br></pre></td></tr></table></figure>
<p>结合 <code>-vv</code> 选项可以以更详细的格式显示指定槽位上的设备信息。</p>
</li>
<li><p><strong>显示设备和驱动程序的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -k</span><br></pre></td></tr></table></figure>
<p>使用 <code>-k</code> 选项可以显示设备及其关联的内核模块（驱动程序）的信息。</p>
</li>
<li><p><strong>以总线路径显示设备信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -t</span><br></pre></td></tr></table></figure>
<p>使用 <code>-t</code> 选项可以以总线路径的形式显示设备信息，显示设备之间的连接关系。</p>
</li>
<li><p><strong>显示 PCI Express 设备的链路状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -e</span><br></pre></td></tr></table></figure>
<p>使用 <code>-e</code> 选项可以显示 PCI Express 设备的链路状态，包括链路速度、宽度等信息。</p>
</li>
<li><p><strong>以 JSON 格式输出信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -x -json</span><br></pre></td></tr></table></figure>
<p>使用 <code>-x</code> 选项可以显示十六进制的寄存器内容，而 <code>-json</code> 选项以 JSON 格式输出信息。</p>
</li>
</ol>
<p>这些是 <code>lspci</code> 命令的一些常用选项，可以根据具体的需求来选择合适的选项，以获取有关系统中 PCI 设备的详细信息。</p>
<h2 id="linux-lspci命令-常用技巧"><a href="#linux-lspci命令-常用技巧" class="headerlink" title="linux lspci命令 常用技巧"></a>linux lspci命令 常用技巧</h2><p>以下是在使用 <code>lspci</code> 命令时的一些常用技巧，这些技巧可以帮助你更灵活地查看和分析 PCI 设备信息：</p>
<ol>
<li><p><strong>使用 <code>grep</code> 过滤信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep &lt;keyword&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 命令可以过滤包含特定关键字的 PCI 设备信息，方便快速查找所需信息。</p>
</li>
<li><p><strong>显示所有网络设备：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep -i network</span><br></pre></td></tr></table></figure>
<p>使用 <code>-i</code> 选项可以忽略大小写，结合 <code>grep</code> 可以只显示与网络相关的 PCI 设备信息。</p>
</li>
<li><p><strong>显示所有显卡设备：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep -i vga</span><br></pre></td></tr></table></figure>
<p>结合 <code>grep</code> 可以只显示与显卡相关的 PCI 设备信息。</p>
</li>
<li><p><strong>显示设备的详细信息和驱动程序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -v -nnk</span><br></pre></td></tr></table></figure>
<p>结合 <code>-v</code>、<code>-nn</code> 和 <code>-k</code> 选项可以显示设备的详细信息和关联的内核模块（驱动程序）。</p>
</li>
<li><p><strong>显示设备的总线路径和类别信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -t -nn</span><br></pre></td></tr></table></figure>
<p>结合 <code>-t</code> 和 <code>-nn</code> 选项可以显示设备的总线路径和设备类别信息。</p>
</li>
<li><p><strong>以 CSV 格式输出信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -mm</span><br></pre></td></tr></table></figure>
<p>使用 <code>-mm</code> 选项可以以 CSV 格式输出信息，方便后续处理。</p>
</li>
<li><p><strong>只显示设备的总线信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -m | awk -F<span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;print $1, $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>结合 <code>awk</code> 命令可以只显示设备的总线信息，提取第一列和第二列的信息。</p>
</li>
<li><p><strong>查看 PCI Express 设备的链路速度和宽度：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -vv | grep -i <span class="string">&quot;LnkSta:\|LnkCap:&quot;</span></span><br></pre></td></tr></table></figure>
<p>结合 <code>-vv</code> 选项可以显示 PCI Express 设备的链路状态和能力信息，用于了解设备的性能。</p>
</li>
<li><p><strong>显示设备的 PCI Express 版本信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -vv | grep -i <span class="string">&quot;PCIe&quot;</span></span><br></pre></td></tr></table></figure>
<p>结合 <code>-vv</code> 选项可以显示设备的 PCI Express 版本信息。</p>
</li>
<li><p><strong>使用 <code>cut</code> 提取特定列：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | <span class="built_in">cut</span> -d<span class="string">&#x27; &#x27;</span> -f1,2,3</span><br></pre></td></tr></table></figure>
<p>使用 <code>cut</code> 命令可以提取指定列，例如提取设备的总线号、设备号和函数号。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>lspci</code> 命令，根据实际需求选择合适的选项和工具，以便更方便地查看和分析 PCI 设备信息。</p>
<h2 id="lspci"><a href="#lspci" class="headerlink" title="lspci"></a>lspci</h2><p><code>lspci</code> 是 Linux 系统上用于列出 PCI（Peripheral Component Interconnect）设备信息的命令行工具。它可以显示计算机上安装的 PCI 设备的详细信息，包括设备的供应商、设备 ID、驱动程序等。下面是对 <code>lspci</code> 命令的详细解释：</p>
<ol>
<li><p><code>lspci</code>：直接运行 <code>lspci</code> 命令将列出计算机上所有的 PCI 设备。</p>
</li>
<li><p><code>lspci -v</code>：使用 <code>-v</code> 选项可以显示更详细的设备信息，包括设备的类别、子类别、供应商、设备 ID、IRQ（中断请求）、驱动程序等。</p>
</li>
<li><p><code>lspci -k</code>：使用 <code>-k</code> 选项可以显示每个设备所使用的内核模块（驱动程序）的信息。</p>
</li>
<li><p><code>lspci -n</code>：使用 <code>-n</code> 选项可以显示设备的供应商和设备 ID 的数字表示形式，而不是使用可读的文本。</p>
</li>
<li><p><code>lspci -s &lt;slot&gt;</code>：使用 <code>-s</code> 选项可以指定要查看的特定 PCI 插槽（槽位）。可以通过 <code>&lt;slot&gt;</code> 参数指定插槽的位置标识符。例如，<code>lspci -s 00:1f.3</code> 将只显示指定插槽位置的设备信息。</p>
</li>
<li><p><code>lspci -vvv</code> 或 <code>lspci -vvvv</code>：使用 <code>-vvv</code> 或 <code>-vvvv</code> 选项可以显示更详细的设备信息，包括设备寄存器、I&#x2F;O 空间、内存地址等。</p>
</li>
<li><p><code>lspci -H</code>：使用 <code>-H</code> 选项可以显示设备的层次结构信息，包括设备之间的连接关系。</p>
</li>
<li><p><code>lspci -t</code>：使用 <code>-t</code> 选项可以显示以树状结构形式展示的设备层次结构信息。</p>
</li>
</ol>
<p>这些选项只是 <code>lspci</code> 命令的一部分，你可以根据需要查阅 <code>lspci</code> 的手册页或使用命令的 <code>--help</code> 选项获取更详细的命令说明和选项信息。</p>
<p>通过 <code>lspci</code>，你可以获得关于计算机上安装的 PCI 设备的重要信息。这对于调试硬件问题、了解系统配置和识别设备驱动程序等方面非常有用。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_48_ip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_48_ip/" class="post-title-link" itemprop="url">linux_2_48_ip</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>ip命令</li>
</ul>
<h2 id="linux-ip命令-详解"><a href="#linux-ip命令-详解" class="headerlink" title="linux ip命令 详解"></a>linux ip命令 详解</h2><p><code>ip</code> 命令是 Linux 中用于配置网络接口和路由表的强大工具。它是 <code>ifconfig</code> 和 <code>route</code> 命令的继任者，提供了更多的功能和灵活性。以下是关于 <code>ip</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip [选项] OBJECT COMMAND</span><br></pre></td></tr></table></figure>

<p><code>OBJECT</code> 可以是 <code>link</code>（网络接口）、<code>address</code>（IP 地址和路由表）、<code>route</code>（路由）、<code>neighbor</code>（ARP 缓存）、<code>rule</code>（路由策略）等。</p>
<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-s</code> 或 <code>--stats</code>：显示详细的统计信息。</li>
<li><code>-d</code> 或 <code>--details</code>：显示更多的详细信息。</li>
<li><code>-f</code> 或 <code>--family</code>：指定地址族，如 <code>inet</code>（IPv4） 或 <code>inet6</code>（IPv6）。</li>
<li><code>-4</code> 或 <code>-6</code>：指定使用 IPv4 或 IPv6 地址。</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>显示网络接口信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span></span><br></pre></td></tr></table></figure>
<p>显示当前系统上的网络接口。</p>
</li>
<li><p><strong>显示指定接口的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> show eth0</span><br></pre></td></tr></table></figure>
<p>显示名为 <code>eth0</code> 的网络接口的详细信息。</p>
</li>
<li><p><strong>启用或禁用网络接口：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> eth0 up</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> eth0 down</span><br></pre></td></tr></table></figure>
<p>启用或禁用名为 <code>eth0</code> 的网络接口。</p>
</li>
<li><p><strong>显示 IP 地址信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip a</span><br></pre></td></tr></table></figure>
<p>显示当前系统上的 IP 地址信息。</p>
</li>
<li><p><strong>为网络接口分配 IP 地址：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address add 192.168.1.2/24 dev eth0</span><br></pre></td></tr></table></figure>
<p>为名为 <code>eth0</code> 的网络接口分配 IP 地址。</p>
</li>
<li><p><strong>删除网络接口上的 IP 地址：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address del 192.168.1.2/24 dev eth0</span><br></pre></td></tr></table></figure>
<p>从名为 <code>eth0</code> 的网络接口上删除指定的 IP 地址。</p>
</li>
<li><p><strong>添加静态路由：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route add 192.168.2.0/24 via 192.168.1.1</span><br></pre></td></tr></table></figure>
<p>添加到网络 <code>192.168.2.0/24</code> 的静态路由。</p>
</li>
<li><p><strong>显示路由表：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip r</span><br></pre></td></tr></table></figure>
<p>显示当前系统上的路由表。</p>
</li>
<li><p><strong>删除路由：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route del 192.168.2.0/24</span><br></pre></td></tr></table></figure>
<p>从路由表中删除到网络 <code>192.168.2.0/24</code> 的路由。</p>
</li>
<li><p><strong>显示 ARP 缓存：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip neigh show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip n</span><br></pre></td></tr></table></figure>
<p>显示当前系统上的 ARP 缓存。</p>
</li>
<li><p><strong>添加静态 ARP 条目：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip neigh add 192.168.1.2 lladdr 00:11:22:33:44:55 dev eth0</span><br></pre></td></tr></table></figure>
<p>添加到 IP 地址 <code>192.168.1.2</code> 的静态 ARP 条目。</p>
</li>
</ol>
<p>这些示例演示了一些常见的 <code>ip</code> 命令用法，但 <code>ip</code> 命令支持的功能非常丰富，可用于更高级的网络配置和管理任务。</p>
<h2 id="linux-ip命令-常用技巧"><a href="#linux-ip命令-常用技巧" class="headerlink" title="linux ip命令 常用技巧"></a>linux ip命令 常用技巧</h2><p>以下是一些在使用 <code>ip</code> 命令时的常用技巧：</p>
<ol>
<li><p><strong>查看详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -s -d <span class="built_in">link</span> show eth0</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code>（<code>--stats</code>）和 <code>-d</code>（<code>--details</code>）选项，显示更详细的网络接口信息。</p>
</li>
<li><p><strong>使用 <code>ip</code> 替代 <code>ifconfig</code>：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr show</span><br></pre></td></tr></table></figure>
<p><code>ip</code> 命令可以替代 <code>ifconfig</code> 来显示网络接口和 IP 地址信息，是一个更现代化的工具。</p>
</li>
<li><p><strong>显示指定地址族的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -4 addr show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -6 addr show</span><br></pre></td></tr></table></figure>
<p>使用 <code>-4</code> 或 <code>-6</code> 选项，只显示 IPv4 或 IPv6 地址信息。</p>
</li>
<li><p><strong>动态调整 MTU（最大传输单元）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> eth0 mtu 1400</span><br></pre></td></tr></table></figure>
<p>使用 <code>mtu</code> 选项，可以动态调整网络接口的最大传输单元。</p>
</li>
<li><p><strong>显示指定网络接口的广播地址：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr show eth0 | grep inet | awk <span class="string">&#x27;&#123;print $6&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 和 <code>awk</code> 来提取并显示广播地址。</p>
</li>
<li><p><strong>启用反向路径过滤（RP Filter）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip rpfilter show</span><br></pre></td></tr></table></figure>
<p><code>rpfilter</code> 是一种网络安全功能，可以使用 <code>ip rpfilter</code> 命令查看和配置。</p>
</li>
<li><p><strong>使用 <code>ip</code> 设置默认网关：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route add default via 192.168.1.1</span><br></pre></td></tr></table></figure>
<p>使用 <code>ip route</code> 命令可以设置默认网关，替代传统的 <code>route add default gw</code>。</p>
</li>
<li><p><strong>显示连接状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -s <span class="built_in">link</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项，显示连接状态和统计信息。</p>
</li>
<li><p><strong>显示指定端口的监听状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -ltnp | grep :80</span><br></pre></td></tr></table></figure>
<p>使用 <code>ss</code> 命令查看指定端口的监听状态。</p>
</li>
<li><p><strong>使用 <code>ip</code> 添加 VLAN：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> add <span class="built_in">link</span> eth0 name eth0.100 <span class="built_in">type</span> vlan <span class="built_in">id</span> 100</span><br></pre></td></tr></table></figure>
<p>使用 <code>ip</code> 命令可以方便地添加 VLAN。</p>
</li>
<li><p><strong>在 <code>ip</code> 命令中使用正则表达式过滤输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address show | grep -E <span class="string">&#x27;inet (192\.168\.|10\.)&#x27;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 和正则表达式，过滤并显示指定网段的 IP 地址。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>ip</code> 命令，进行更复杂的网络配置和监控任务。</p>
<h2 id="linux-ip命令-高级技巧"><a href="#linux-ip命令-高级技巧" class="headerlink" title="linux ip命令 高级技巧"></a>linux ip命令 高级技巧</h2><p>以下是一些在使用 <code>ip</code> 命令时的高级技巧，适用于更复杂的网络配置和管理任务：</p>
<ol>
<li><p><strong>创建虚拟以太网接口（veth pair）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> add veth0 <span class="built_in">type</span> veth peer name veth1</span><br></pre></td></tr></table></figure>
<p>创建一对虚拟以太网接口 <code>veth0</code> 和 <code>veth1</code>，它们被连接在一起。</p>
</li>
<li><p><strong>使用 <code>ip</code> 设置源地址验证（Source Validation）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip rpfilter add dev eth0</span><br></pre></td></tr></table></figure>
<p>启用源地址验证，对于从指定网络接口出去的数据包进行检查。</p>
</li>
<li><p><strong>更改网络接口的 MAC 地址：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> dev eth0 address 00:11:22:33:44:55</span><br></pre></td></tr></table></figure>
<p>更改网络接口 <code>eth0</code> 的 MAC 地址。</p>
</li>
<li><p><strong>创建 Linux 桥接设备：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> add name br0 <span class="built_in">type</span> bridge</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> dev eth0 master br0</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> dev eth1 master br0</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> dev br0 up</span><br></pre></td></tr></table></figure>
<p>创建一个 Linux 桥接设备，将 <code>eth0</code> 和 <code>eth1</code> 添加到桥接设备，并启用桥接设备。</p>
</li>
<li><p><strong>创建隧道接口（Tunnel Interface）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip tunnel add tun0 mode gre remote 203.0.113.1 <span class="built_in">local</span> 203.0.113.2</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> tun0 up</span><br></pre></td></tr></table></figure>
<p>创建一个 GRE 隧道接口 <code>tun0</code>，指定远程和本地地址。</p>
</li>
<li><p><strong>配置网络命名空间（Network Namespace）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip netns add ns1</span><br><span class="line">ip <span class="built_in">link</span> add veth0 <span class="built_in">type</span> veth peer name veth1</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> veth1 netns ns1</span><br><span class="line">ip netns <span class="built_in">exec</span> ns1 ip <span class="built_in">link</span> <span class="built_in">set</span> dev lo up</span><br><span class="line">ip netns <span class="built_in">exec</span> ns1 ip <span class="built_in">link</span> <span class="built_in">set</span> dev veth1 up</span><br></pre></td></tr></table></figure>
<p>创建一个网络命名空间 <code>ns1</code>，并将虚拟以太网接口 <code>veth1</code> 移动到该命名空间。</p>
</li>
<li><p><strong>使用 <code>ip</code> 命令配置 IPset：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipset create myset <span class="built_in">hash</span>:ip</span><br><span class="line">ipset add myset 192.168.1.1</span><br></pre></td></tr></table></figure>
<p>使用 <code>ipset</code> 命令创建和配置 IPset，用于管理 IP 地址集合。</p>
</li>
<li><p><strong>启用多路径路由（Multipath Routing）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route add default nexthop via 192.168.1.1 nexthop via 192.168.1.2</span><br></pre></td></tr></table></figure>
<p>启用多路径路由，使用多个下一跳地址。</p>
</li>
<li><p><strong>使用 <code>ip</code> 命令进行策略路由：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip rule add from 192.168.1.1/32 table 1</span><br><span class="line">ip route add default via 192.168.1.254 table 1</span><br></pre></td></tr></table></figure>
<p>使用 <code>ip rule</code> 和 <code>ip route</code> 命令实现策略路由。</p>
</li>
<li><p><strong>配置 TCP BBR 拥塞控制算法：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route change default via 192.168.1.1 dev eth0 initcwnd 10</span><br></pre></td></tr></table></figure>
<p>使用 <code>ip route</code> 命令配置 TCP BBR 拥塞控制算法的参数。</p>
</li>
</ol>
<p>这些高级技巧展示了 <code>ip</code> 命令的强大功能，适用于更复杂的网络配置和管理场景。在实际应用中，理解这些高级技巧可以帮助你更好地调整和优化网络环境。</p>
<h2 id="ip"><a href="#ip" class="headerlink" title="ip"></a>ip</h2><ul>
<li><code>ip</code>命令与<code>ifconfig</code>命令类似,但是比<code>ifconfig</code>命令更加强大,主要功能是用于显示或者设置网络设备,<code>ip</code>命令是Linux加强版的网络配置工具,用于代替<code>ifconfig</code>命令</li>
<li>语法:<code>ip [options] object &#123; command | help&#125;</code><ul>
<li>object为常用对象,值可以是:<code>&#123; link | addr | addrlabel | route | rule | neigh | ntable | tunnel | maddr | mroute | mrule | monitor | xfrm | token&#125;</code></li>
<li>常用对象的取值含义:<ul>
<li><code>link</code>:网络设备</li>
<li><code>address</code>:设备上的协议(IP或IPv6)地址</li>
<li><code>addrlabel</code>:协议地址选择的标签设置</li>
<li><code>route</code>:路由表条目</li>
<li><code>rule</code>:路由策略数据库中的规则</li>
</ul>
</li>
<li>options为常用选项,值可以是:<code>&#123;-V[version] | -s[tatistics] | -d[details] | -r[resolve] | -h[human-readable] -iec | -f[family] &#123;inet6 | ipx | dnet | link &#125; | -o[oneline] | -t[timestamp] | -b[batch] [filename] | -rc[rcvbuf] [size]&#125;</code></li>
<li>常用选项的取值含义:<ul>
<li><code>-V</code>:显示命令的版本信息;</li>
<li><code>-s</code>:输出更详细的信息;</li>
<li><code>-f</code>:强制使用指定的协议族</li>
<li><code>-4</code>:指定使用的网络层协议是IPv4协议;</li>
<li><code>-6</code>:指定使用的网络层协议是IPv6协议</li>
<li><code>-r</code>:显示主机时,不使用IP地址,而使用主机的域名</li>
</ul>
</li>
</ul>
</li>
<li>示例:<ul>
<li><code>ip link show  # 显示网络接口信息</code></li>
<li><code>ip link set eth0 up  # 开启网卡</code></li>
<li><code>ip link set eth0 down # 关闭网卡</code></li>
<li><code>ip link set eth0 promisc on # 开启网卡的混合模式</code></li>
<li><code>ip link set eth0 promisc offi  # 关闭网卡的混合模式</code></li>
<li><code>ip link set eth0 txqueuelen 1200  # 设置网卡队列长度</code></li>
<li><code>ip link set eth0 mtu 1400  # 设置网卡最大传输单元</code></li>
<li><code>ip addr show  # 显示网卡IP信息</code></li>
<li><code>ip addr add 192.168.0.1/24 dev eth0  # 设置eth0网卡IP地址192.168.0.1</code></li>
<li><code>ip addr del 192.168.0.1/24 dev eth0  # 删除eth0网卡IP地址</code></li>
<li><code>ip route show  # 显示系统路由</code></li>
<li><code>ip route add default via 192.168.1.254  # 设置系统默认路由</code></li>
<li><code>ip route list  # 查看路由信息</code></li>
<li><code>ip route add 192.168.4.0/24 via 192.168.0.254 dev eth0  # 设置192.168.4.0网段的网关为192.168.0.254,数据走eth0接口</code></li>
<li><code>ip route add default via 192.168.0.254 dev eth0  # 设置默认网关为192.168.0.254</code></li>
<li><code>ip route del 192.168.4.0/24  # 删除192.168.4.0网段的网关</code></li>
<li><code>ip route delete 192.168.1.0/24 dev eth0  # 删除路由</code></li>
</ul>
</li>
</ul>
<p>在Linux中，<code>ip</code>命令是一个强大的网络工具，用于管理网络接口、路由表、地址配置等网络相关的操作。它取代了过时的<code>ifconfig</code>命令，并提供更多功能和灵活性。</p>
<p>以下是<code>ip</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip [options] object command</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，用于配置<code>ip</code>命令的行为，<code>object</code>表示要操作的网络对象（如接口、路由表、地址等），<code>command</code>表示要执行的具体命令。</p>
<p>以下是一些常见的<code>ip</code>命令选项和用法：</p>
<ol>
<li><p>查看网络接口信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip link show</span><br></pre></td></tr></table></figure>

<p>此命令将显示系统上所有网络接口的详细信息，包括名称、状态、MAC地址等。</p>
</li>
<li><p>查看路由表信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route show</span><br></pre></td></tr></table></figure>

<p>此命令将显示系统的路由表信息，包括目标网络、下一跳地址、接口等。</p>
</li>
<li><p>配置网络接口IP地址：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address add 192.168.1.10/24 dev eth0</span><br></pre></td></tr></table></figure>

<p>此命令将为<code>eth0</code>接口添加IP地址<code>192.168.1.10/24</code>。</p>
</li>
<li><p>启用或禁用网络接口：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip link set eth0 up</span><br><span class="line">ip link set eth0 down</span><br></pre></td></tr></table></figure>

<p>第一个命令将启用<code>eth0</code>接口，使其可用；第二个命令将禁用<code>eth0</code>接口，使其不可用。</p>
</li>
</ol>
<p><code>ip</code>命令还支持其他许多选项和功能，如配置VLAN、设定路由、设置策略路由等。</p>
<p>使用<code>ip</code>命令可以方便地管理和配置网络相关的操作，从而实现网络接口、路由表和地址的管理和调整。它是Linux系统中网络管理的主要工具之一。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_53_gperf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_53_gperf/" class="post-title-link" itemprop="url">linux_2_53_gperf</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>gperf命令</li>
</ul>
<h2 id="linux-gperf命令-详解"><a href="#linux-gperf命令-详解" class="headerlink" title="linux gperf命令 详解"></a>linux gperf命令 详解</h2><p><code>gperf</code> 是一个用于生成完美散列函数（perfect hash function）的工具。完美散列函数是一种能够将一组唯一的关键字映射到不同的索引值，且没有冲突的散列函数。<code>gperf</code> 工具通常用于生成用于关键字查找的高效数据结构，例如用于编译器符号表、关键字识别等。</p>
<p>以下是关于 <code>gperf</code> 命令的一些基本说明：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gperf [options] [--] keywords</span><br></pre></td></tr></table></figure>

<h3 id="选项说明："><a href="#选项说明：" class="headerlink" title="选项说明："></a>选项说明：</h3><ul>
<li><strong>-L, –language&#x3D;C：</strong> 指定生成的代码使用的编程语言，默认是 C 语言。</li>
<li><strong>-N, –namespace：</strong> 在生成的代码中使用命名空间。</li>
<li><strong>-K, –key-positions&#x3D;POS1[,POS2,…]：</strong> 指定关键字中用于计算散列的字符位置。</li>
<li><strong>-t, –tables：</strong> 生成一个表达式计算表（expression calculation table）。</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gperf -L C -N my_hash_function -K 1,3,5,7 my_keywords.gperf</span><br></pre></td></tr></table></figure>

<p>这个示例使用 <code>gperf</code> 生成了一个 C 语言的完美散列函数，该函数的命名空间为 <code>my_hash_function</code>，关键字文件是 <code>my_keywords.gperf</code>，并且关键字中的第1、3、5、7个字符用于计算散列。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ol>
<li><p><strong>关键字文件格式：</strong> 关键字文件通常包含一组唯一的关键字，每个关键字占据一行。</p>
</li>
<li><p><strong>完美散列函数：</strong> <code>gperf</code> 生成的完美散列函数在给定的关键字集合上没有冲突，因此对于查找操作非常高效。</p>
</li>
<li><p><strong>生成的代码：</strong> <code>gperf</code> 生成的代码包含了一个完美散列函数、散列表和查找函数，可以方便地集成到项目中。</p>
</li>
<li><p><strong>调整关键字位置：</strong> 通过使用 <code>-K</code> 选项，可以调整计算散列时使用的关键字的位置，以获得更好的散列效果。</p>
</li>
</ol>
<p>请注意，<code>gperf</code> 不是一个通用的散列函数生成器，它专注于生成用于特定用途的完美散列函数。使用 <code>gperf</code> 需要理解关键字集合的特性，以便生成高效的散列函数。</p>
<h2 id="linux-gperf命令-常用技巧"><a href="#linux-gperf命令-常用技巧" class="headerlink" title="linux gperf命令 常用技巧"></a>linux gperf命令 常用技巧</h2><p>使用 <code>gperf</code> 命令时，以下是一些常用的技巧和最佳实践：</p>
<ol>
<li><p><strong>了解关键字集合：</strong><br>在使用 <code>gperf</code> 之前，要仔细了解关键字集合的特性。关键字集合应该是唯一的，这样生成的完美散列函数才能保证没有冲突。</p>
</li>
<li><p><strong>选择关键字位置：</strong><br>使用 <code>-K</code> 选项可以指定关键字中用于计算散列的字符位置。通过试验不同的位置组合，可以找到生成更好散列的方式。</p>
</li>
<li><p><strong>生成 C 代码：</strong><br>默认情况下，<code>gperf</code> 生成的是 C 语言的代码。如果项目使用其他编程语言，可以使用 <code>-L</code> 选项指定生成的代码语言。</p>
</li>
<li><p><strong>使用命名空间：</strong><br>如果生成的代码将会与其他代码集成，考虑使用 <code>-N</code> 选项指定生成的代码使用命名空间，以避免命名冲突。</p>
</li>
<li><p><strong>生成表达式计算表：</strong><br>使用 <code>-t</code> 选项可以生成表达式计算表，这有助于更详细地了解散列函数的计算方式。</p>
</li>
<li><p><strong>检查生成的代码：</strong><br>生成的代码包含完美散列函数、散列表和查找函数。在集成到项目中之前，建议检查生成的代码，确保它符合项目的要求。</p>
</li>
<li><p><strong>选择关键字文件格式：</strong><br><code>gperf</code> 支持两种关键字文件格式：<code>.gperf</code> 和 <code>.txt</code>。可以根据个人偏好选择一种格式，但要确保文件中的关键字格式正确。</p>
</li>
<li><p><strong>调整散列表大小：</strong><br>在某些情况下，可能需要调整散列表的大小以适应特定的需求。可以查看生成的代码中对散列表大小的定义，然后根据实际情况进行调整。</p>
</li>
<li><p><strong>测试性能：</strong><br>在集成到项目之前，进行性能测试以确保生成的完美散列函数在实际使用中能够提供高效的查找性能。</p>
</li>
<li><p><strong>文档记录：</strong><br>在代码中添加适当的注释，记录生成散列函数的相关信息，以便日后维护和理解代码。</p>
</li>
</ol>
<p>这些技巧可以帮助你更有效地使用 <code>gperf</code> 命令生成完美散列函数，并集成到项目中以提高关键字查找的效率。</p>
<h2 id="gperf"><a href="#gperf" class="headerlink" title="gperf"></a>gperf</h2><p><code>gperf</code> 是 GNU Perfect Hash Function Generator 的缩写，它是一个用于生成完美哈希函数的工具。完美哈希函数是一种哈希函数，它可以在常数时间内计算给定输入的哈希值，而不会产生冲突（即，每个输入都会有唯一的哈希值）。</p>
<p><code>gperf</code> 命令在 Linux 系统中使用，可以从输入文件生成完美哈希函数的 C 代码。下面是 <code>gperf</code> 命令的详解：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gperf [选项] &lt;输入文件&gt; &gt; &lt;输出文件&gt;</span><br></pre></td></tr></table></figure>

<p>主要的选项包括：</p>
<ul>
<li><code>-a</code>：生成 ANSI C 代码，默认情况下生成 K&amp;R C 代码。</li>
<li><code>-C</code>：生成 C++ 代码。</li>
<li><code>-D</code>：指定宏定义，可以在生成的代码中使用。</li>
<li><code>-E</code>：指定输入文件的字符编码，默认为 ASCII。</li>
<li><code>-G</code>：生成全局变量，默认情况下生成静态变量。</li>
<li><code>-k</code>：指定关键字列表的文件。</li>
<li><code>-N</code>：指定生成的哈希函数名称，默认为 <code>hash</code>。</li>
<li><code>-t</code>：指定输出文件的类型，默认为文本文件。</li>
<li><code>-s</code>：指定哈希表的大小，默认为 16384。</li>
<li><code>-S</code>：指定哈希函数名称的前缀，默认为空。</li>
</ul>
<p>使用 <code>gperf</code> 命令生成完美哈希函数的一般步骤如下：</p>
<ol>
<li>准备一个包含关键字的输入文件。</li>
<li>运行 <code>gperf</code> 命令，指定输入文件和其他选项。</li>
<li>将生成的 C 代码保存到输出文件中。</li>
</ol>
<p>生成的 C 代码包含一个哈希表和一个哈希函数。哈希表是一个数组，每个元素包含一个关键字和对应的值。哈希函数使用输入关键字计算哈希值，并通过查找哈希表来获取对应的值。</p>
<p>通过使用 <code>gperf</code> 生成的完美哈希函数，可以在很短的时间内进行高效的关键字查找，特别适用于大型关键字集合的情况。</p>
<p>请注意，这只是对 <code>gperf</code> 命令的简要说明，如果需要更详细的信息，可以查阅相关的文档或使用 <code>man gperf</code> 命令来查看 <code>gperf</code> 命令的手册页。</p>
<hr>
<h2 id="gperf-1"><a href="#gperf-1" class="headerlink" title="gperf"></a>gperf</h2><p>以下是一个简单的示例，演示如何在 Linux 上使用 <code>gperf</code> 命令生成完美哈希函数。</p>
<ol>
<li><p>创建一个名为 <code>keywords.txt</code> 的文本文件，包含一些关键字，每行一个关键字。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">orange</span><br><span class="line">peach</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行以下命令来生成完美哈希函数的 C 代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gperf keywords.txt &gt; hash_table.c</span><br></pre></td></tr></table></figure>

<p>这将生成一个名为 <code>hash_table.c</code> 的输出文件，其中包含生成的完美哈希函数的代码。</p>
</li>
<li><p>在你的程序中包含 <code>hash_table.c</code> 文件，并使用生成的完美哈希函数进行关键字查找。</p>
<p>下面是一个简单的示例程序 <code>main.c</code>，使用生成的完美哈希函数查找关键字：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;hash_table.c&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* keyword = <span class="string">&quot;banana&quot;</span>;</span><br><span class="line">    <span class="type">int</span> value = hash_lookup(keyword, <span class="built_in">strlen</span>(keyword));</span><br><span class="line">    <span class="keyword">if</span> (value != <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;关键字 &#x27;%s&#x27; 的值为 %d\n&quot;</span>, keyword, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;未找到关键字 &#x27;%s&#x27;\n&quot;</span>, keyword);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在编译时，确保将生成的 <code>hash_table.c</code> 文件一起编译，并链接到你的程序中。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc main.c hash_table.c -o program</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行生成的程序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./program</span><br></pre></td></tr></table></figure>

<p>输出应为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">关键字 &#x27;banana&#x27; 的值为 1</span><br></pre></td></tr></table></figure>

<p>这表明关键字 “banana” 在哈希表中的值为 1。</p>
</li>
</ol>
<p>这是一个简单的示例，演示了如何在 Linux 上使用 <code>gperf</code> 命令生成完美哈希函数。实际使用中，你可以根据自己的需求和输入数据来调整代码和选项。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_57_init/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_57_init/" class="post-title-link" itemprop="url">linux_2_57_init</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>init命令</li>
</ul>
<h2 id="linux-init命令-详解"><a href="#linux-init命令-详解" class="headerlink" title="linux init命令 详解"></a>linux init命令 详解</h2><p><code>init</code> 命令在 Linux 系统中用于启动系统初始化进程，是系统引导过程中的第一个用户空间进程。<code>init</code> 进程的主要任务是启动系统中的各种服务和进程，初始化系统环境，然后将控制权转交给其他运行级别（runlevel）对应的程序。以下是对 <code>init</code> 命令的详细说明：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init [runlevel]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>runlevel：</strong> 可选参数，指定要切换到的运行级别。如果省略该参数，则 <code>init</code> 将默认切换到运行级别 3。</li>
</ul>
<h3 id="运行级别（Runlevel）："><a href="#运行级别（Runlevel）：" class="headerlink" title="运行级别（Runlevel）："></a>运行级别（Runlevel）：</h3><p>运行级别是一种系统状态，代表了一组运行的服务和进程。不同的运行级别支持不同的功能和服务。在传统的 System V 初始化系统中，常见的运行级别包括：</p>
<ul>
<li><strong>0：</strong> 关机（系统停机）。</li>
<li><strong>1：</strong> 单用户模式（单用户维护模式）。</li>
<li><strong>2：</strong> 多用户模式，没有网络服务。</li>
<li><strong>3：</strong> 多用户模式，带有网络服务。</li>
<li><strong>4：</strong> 未分配。</li>
<li><strong>5：</strong> 图形用户界面（带有图形登录界面）。</li>
<li><strong>6：</strong> 重新启动系统。</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>切换到单用户模式（维护模式）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init 1</span><br></pre></td></tr></table></figure>
<p>切换到单用户模式，通常用于系统维护。</p>
</li>
<li><p><strong>切换到多用户模式，带有网络服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init 3</span><br></pre></td></tr></table></figure>
<p>切换到多用户模式，包含网络服务。</p>
</li>
<li><p><strong>切换到图形用户界面：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init 5</span><br></pre></td></tr></table></figure>
<p>切换到图形用户界面，如果系统配置了图形登录界面。</p>
</li>
</ol>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li><code>init</code> 命令在现代 Linux 系统中可能已经被其他初始化系统（如 systemd）替代，因此在一些系统上可能不再使用。</li>
<li>如果使用 System V 初始化系统，<code>init</code> 进程的配置文件通常是 <code>/etc/inittab</code>。</li>
<li>在某些系统上，可以使用 <code>telinit</code> 命令代替 <code>init</code> 来切换运行级别，例如 <code>telinit 3</code>。</li>
</ul>
<p><code>init</code> 命令主要在传统的 System V 初始化系统中使用，现代 Linux 系统中可能使用更先进的初始化系统。如果你的系统使用 systemd，那么 <code>systemctl</code> 命令可能是更常见的用于管理服务和运行级别的工具。</p>
<h2 id="init"><a href="#init" class="headerlink" title="init"></a>init</h2><ul>
<li><p>简介：</p>
<ul>
<li>在Linux中，init 是系统引导过程中的第一个用户级进程，它是系统的第一个进程，负责初始化系统并启动其他进程。但是在最新的Linux发行版中，init 进程已经被更现代化的 systemd 替代</li>
<li>init 进程的主要任务是根据系统的运行级别（runlevel）来启动相应的服务和进程。运行级别定义了系统的状态或功能模式，例如单用户模式、多用户图形界面模式等。不同的运行级别对应着不同的系统配置和服务启动状态。</li>
<li>在传统的系统中，可以使用 init 命令来切换运行级别</li>
</ul>
</li>
<li><p>语法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init &lt;运行级别&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>常见的运行级别：</p>
<ul>
<li>0：关机</li>
<li>1：单用户模式</li>
<li>2：多用户模式（没有NFS服务）</li>
<li>3：完全的多用户模式</li>
<li>4：保留给用户自定义</li>
<li>5：图形界面模式</li>
<li>6：重新启动</li>
</ul>
</li>
<li><p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init 5</span><br></pre></td></tr></table></figure>
</li>
<li><p>注：</p>
<ul>
<li>需要注意的是，init 命令需要超级用户权限才能执行，因此通常需要使用 sudo 或以 root 用户身份运行</li>
<li>虽然在现代的Linux发行版中，init 进程已被 systemd 取代，但了解 init 的基本概念仍然有助于理解系统的引导过程和运行级别的概念</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_54_mkdir/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_54_mkdir/" class="post-title-link" itemprop="url">linux_2_54_mkdir</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>mkdir命令</li>
</ul>
<h2 id="linux-mkdir命令-详解"><a href="#linux-mkdir命令-详解" class="headerlink" title="linux mkdir命令 详解"></a>linux mkdir命令 详解</h2><p><code>mkdir</code> 是 Linux 系统中用于创建目录（文件夹）的命令。它允许用户在文件系统中创建一个或多个新的目录。以下是关于 <code>mkdir</code> 命令的详细说明：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> [OPTION] DIRECTORY...</span><br></pre></td></tr></table></figure>

<h3 id="参数说明："><a href="#参数说明：" class="headerlink" title="参数说明："></a>参数说明：</h3><ul>
<li><strong>DIRECTORY：</strong> 要创建的目录的名称，可以同时指定多个目录。</li>
</ul>
<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><strong>-m, –mode&#x3D;MODE：</strong> 设置新创建目录的权限模式（权限掩码）。</li>
<li><strong>-p, –parents：</strong> 递归创建目录，如果上级目录不存在也一并创建。</li>
<li><strong>-v, –verbose：</strong> 显示创建过程中的详细信息。</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>创建单个目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> my_directory</span><br></pre></td></tr></table></figure>
<p>创建一个名为 <code>my_directory</code> 的新目录。</p>
</li>
<li><p><strong>递归创建目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /path/to/parent/directory/new_directory</span><br></pre></td></tr></table></figure>
<p>使用 <code>-p</code> 选项可以递归创建目录，即使上级目录不存在也会创建。</p>
</li>
<li><p><strong>设置目录权限：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -m 755 my_directory</span><br></pre></td></tr></table></figure>
<p>使用 <code>-m</code> 选项可以设置新创建目录的权限模式，此示例将 <code>my_directory</code> 目录的权限设置为 <code>755</code>。</p>
</li>
<li><p><strong>同时创建多个目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> dir1 dir2 dir3</span><br></pre></td></tr></table></figure>
<p>同时创建多个目录，即 <code>dir1</code>、<code>dir2</code> 和 <code>dir3</code>。</p>
</li>
<li><p><strong>显示详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -v dir1 dir2 dir3</span><br></pre></td></tr></table></figure>
<p>使用 <code>-v</code> 选项显示创建过程中的详细信息。</p>
</li>
</ol>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li>默认情况下，新创建的目录权限是 <code>777</code>，但这可能会受到系统 umask 的影响。</li>
<li>如果没有指定 <code>-m</code> 选项，<code>mkdir</code> 将使用系统默认的 umask 值来确定新目录的权限。</li>
<li>使用 <code>-p</code> 选项时，要小心，以免意外地在错误的位置创建目录。</li>
</ul>
<p><code>mkdir</code> 是一个基本而常用的命令，用于在 Linux 系统中创建目录。通过结合不同的选项，可以根据具体需求方便地创建目录并设置相应的权限。</p>
<h2 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h2><p>在Linux系统中，<code>mkdir</code>（make directory）命令用于创建目录。下面是<code>mkdir</code>命令的详细解释：</p>
<p>命令语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir [选项] 目录名</span><br></pre></td></tr></table></figure>

<p>常用选项：</p>
<ul>
<li><code>-p</code>：递归创建目录，如果父目录不存在则创建。例如，<code>mkdir -p dir1/dir2/dir3</code> 将会创建<code>dir1</code>、<code>dir2</code>和<code>dir3</code>三级目录。</li>
<li><code>-m</code>：指定目录的权限模式（权限标志）。例如，<code>mkdir -m 755 new_dir</code> 将会创建一个权限为 <code>755</code> 的 <code>new_dir</code> 目录。</li>
<li><code>-v</code>：显示创建的每个目录的详细信息。</li>
<li><code>-p</code> 和 <code>-v</code> 选项可以同时使用。</li>
</ul>
<p>示例：</p>
<ol>
<li><p>创建一个名为 <code>my_directory</code> 的目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir my_directory</span><br></pre></td></tr></table></figure>
</li>
<li><p>递归地创建多级目录 <code>dir1/dir2/dir3</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p dir1/dir2/dir3</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建目录并指定权限模式为 <code>755</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -m 755 my_directory</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建目录并显示详细信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -v my_directory</span><br></pre></td></tr></table></figure></li>
</ol>
<p>以上是一些常见的用法示例。<code>mkdir</code>命令还支持其他选项和参数，你可以通过运行 <code>man mkdir</code> 命令来查看更多详细的帮助文档。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_56_find/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_56_find/" class="post-title-link" itemprop="url">linux_2_56_find</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>find命令</li>
</ul>
<h2 id="linux-find命令-详解"><a href="#linux-find命令-详解" class="headerlink" title="linux find命令 详解"></a>linux find命令 详解</h2><p><code>find</code> 命令是在 Linux 系统中用于在文件系统中查找文件和目录的强大工具。<code>find</code> 可以根据不同的条件搜索文件，如文件名、文件类型、大小、权限等。以下是关于 <code>find</code> 命令的详细说明：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [path...] [expression]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>path：</strong> 要开始搜索的路径。</li>
<li><strong>expression：</strong> 定义搜索条件的表达式。</li>
</ul>
<h3 id="常用表达式："><a href="#常用表达式：" class="headerlink" title="常用表达式："></a>常用表达式：</h3><ol>
<li><p><strong>按文件名搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;filename&quot;</span></span><br></pre></td></tr></table></figure>
<p>通过文件名进行搜索。</p>
</li>
<li><p><strong>按文件类型搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> f</span><br></pre></td></tr></table></figure>
<p>通过文件类型进行搜索，其中 <code>-type f</code> 表示文件，<code>-type d</code> 表示目录。</p>
</li>
<li><p><strong>按文件大小搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -size +10M</span><br></pre></td></tr></table></figure>
<p>搜索大于10兆字节的文件，也可以使用 <code>-size -10M</code> 来搜索小于10兆字节的文件。</p>
</li>
<li><p><strong>按文件权限搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -perm 644</span><br></pre></td></tr></table></figure>
<p>搜索文件权限为644的文件。</p>
</li>
<li><p><strong>按时间戳搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -mtime -7</span><br></pre></td></tr></table></figure>
<p>搜索过去7天内修改过的文件。使用 <code>-atime</code> 和 <code>-ctime</code> 选项可以分别按访问时间和变化时间搜索。</p>
</li>
<li><p><strong>按用户和组搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -user username -group groupname</span><br></pre></td></tr></table></figure>
<p>搜索属于特定用户和组的文件。</p>
</li>
<li><p><strong>按多个条件组合搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">type</span> f -size +1M</span><br></pre></td></tr></table></figure>
<p>可以组合多个条件，以便更精确地搜索文件。</p>
</li>
</ol>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>查找并删除所有 <code>.log</code> 文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.log&quot;</span> -delete</span><br></pre></td></tr></table></figure>
<p>查找并删除所有后缀为 <code>.log</code> 的文件。</p>
</li>
<li><p><strong>查找所有文件并将结果输出到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search &gt; results.txt</span><br></pre></td></tr></table></figure>
<p>将所有搜索结果输出到 <code>results.txt</code> 文件。</p>
</li>
<li><p><strong>查找所有 <code>.jpg</code> 文件并将它们移动到另一个目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.jpg&quot;</span> -<span class="built_in">exec</span> <span class="built_in">mv</span> &#123;&#125; /path/to/destination \;</span><br></pre></td></tr></table></figure>
<p>将所有后缀为 <code>.jpg</code> 的文件移动到另一个目录。</p>
</li>
<li><p><strong>查找所有空文件或目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -empty</span><br></pre></td></tr></table></figure>
<p>查找并显示所有空文件或目录。</p>
</li>
<li><p><strong>查找并压缩所有 <code>.txt</code> 文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">exec</span> gzip &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>查找并使用 <code>gzip</code> 命令压缩所有后缀为 <code>.txt</code> 的文件。</p>
</li>
</ol>
<p><code>find</code> 命令非常强大，可以根据各种条件在文件系统中进行灵活的搜索。请注意，在使用 <code>find</code> 命令时要小心，确保你了解你的搜索条件以及其潜在的影响。</p>
<h2 id="linux-find命令-常用技巧"><a href="#linux-find命令-常用技巧" class="headerlink" title="linux find命令 常用技巧"></a>linux find命令 常用技巧</h2><p>以下是一些在使用 <code>find</code> 命令时的常用技巧，可以帮助你更灵活地进行文件搜索和操作：</p>
<ol>
<li><p><strong>使用 <code>-exec</code> 执行操作：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>-exec</code> 选项可以在找到的每个文件上执行特定的操作，这里是删除所有后缀为 <code>.txt</code> 的文件。</p>
</li>
<li><p><strong>使用 <code>-exec</code> 执行复杂命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.log&quot;</span> -<span class="built_in">exec</span> sh -c <span class="string">&#x27;mv &#123;&#125; $(dirname &#123;&#125;)/archive/&#x27;</span> \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>-exec</code> 时，可以执行更复杂的命令，这里将所有后缀为 <code>.log</code> 的文件移动到它们所在目录下的 <code>archive</code> 子目录。</p>
</li>
<li><p><strong>使用 <code>-iname</code> 进行不区分大小写的搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -iname <span class="string">&quot;*.jpg&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-iname</code> 可以进行不区分大小写的文件名搜索。</p>
</li>
<li><p><strong>查找特定类型的文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> f -name <span class="string">&quot;*.txt&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-type</code> 选项可以限制搜索结果为文件，而不是目录。</p>
</li>
<li><p><strong>查找符号链接文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> l</span><br></pre></td></tr></table></figure>
<p>使用 <code>-type l</code> 可以查找符号链接文件。</p>
</li>
<li><p><strong>查找并显示文件详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-ls</code> 可以显示详细的文件信息，包括权限、大小、时间戳等。</p>
</li>
<li><p><strong>查找文件并排除特定目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -not -path <span class="string">&quot;/path/to/exclude/*&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-not -path</code> 可以排除特定目录下的文件。</p>
</li>
<li><p><strong>查找文件并按修改时间排序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">exec</span> <span class="built_in">stat</span> --format=<span class="string">&quot;%Y %n&quot;</span> &#123;&#125; \; | <span class="built_in">sort</span> -n</span><br></pre></td></tr></table></figure>
<p>使用 <code>-exec</code> 结合 <code>stat</code> 命令和 <code>sort</code> 命令，可以按修改时间对搜索结果进行排序。</p>
</li>
<li><p><strong>查找空文件和空目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -empty</span><br></pre></td></tr></table></figure>
<p>使用 <code>-empty</code> 可以查找空文件和空目录。</p>
</li>
<li><p><strong>使用 <code>-maxdepth</code> 限制搜索深度：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -maxdepth 2</span><br></pre></td></tr></table></figure>
<p>使用 <code>-maxdepth</code> 可以限制搜索的深度，防止过度搜索。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>find</code> 命令，根据具体需求进行文件搜索和操作。请确保在使用复杂的命令时仔细测试，以避免不必要的文件操作。</p>
<h2 id="linux-find命令-高级技巧"><a href="#linux-find命令-高级技巧" class="headerlink" title="linux find命令 高级技巧"></a>linux find命令 高级技巧</h2><p>以下是一些高级技巧，可以帮助你更有效地使用 <code>find</code> 命令进行文件搜索和操作：</p>
<ol>
<li><p><strong>使用 <code>-regex</code> 进行正则表达式搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -regex <span class="string">&quot;.*\.txt&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-regex</code> 可以进行正则表达式匹配，这对于复杂的文件名模式非常有用。</p>
</li>
<li><p><strong>使用 <code>-newer</code> 按时间戳搜索新文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -newer /path/to/reference_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-newer</code> 可以搜索比参考文件更新的文件。</p>
</li>
<li><p><strong>使用 <code>-delete</code> 直接删除匹配的文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.tmp&quot;</span> -delete</span><br></pre></td></tr></table></figure>
<p>使用 <code>-delete</code> 可以直接删除匹配的文件，而无需使用 <code>-exec rm</code>。</p>
</li>
<li><p><strong>使用 <code>-execdir</code> 在文件所在目录执行命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -execdir <span class="built_in">mv</span> &#123;&#125; /path/to/destination \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>-execdir</code> 可以在匹配的文件所在目录执行命令，避免可能的路径问题。</p>
</li>
<li><p><strong>使用 <code>-printf</code> 格式化输出信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">printf</span> <span class="string">&quot;%p\t%s\n&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-printf</code> 可以自定义输出信息的格式，这对于生成报告非常有用。</p>
</li>
<li><p><strong>在 <code>-exec</code> 中使用 <code>+</code> 提高效率：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.log&quot;</span> -<span class="built_in">exec</span> <span class="built_in">cat</span> &#123;&#125; +</span><br></pre></td></tr></table></figure>
<p>在 <code>-exec</code> 中使用 <code>+</code> 可以将多个文件一次性传递给命令，提高效率。</p>
</li>
<li><p><strong>查找包含特定文本的文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -rl <span class="string">&quot;search_text&quot;</span> /path/to/search</span><br></pre></td></tr></table></figure>
<p>如果你要查找包含特定文本的文件，可能更适合使用 <code>grep</code> 命令。</p>
</li>
<li><p><strong>在搜索结果中排除特定目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -not -path <span class="string">&quot;/path/to/exclude/*&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-not -path</code> 可以排除特定目录下的文件。</p>
</li>
<li><p><strong>使用 <code>-exec sh -c</code> 执行复杂的命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">exec</span> sh -c <span class="string">&#x27;mv &#123;&#125; $(dirname &#123;&#125;)/archive/&#x27;</span> \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>-exec sh -c</code> 可以执行包含变量和子命令的复杂命令。</p>
</li>
<li><p><strong>通过 <code>-print0</code> 和 <code>xargs -0</code> 处理包含空格的文件名：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;*.txt&quot;</span> -print0 | xargs -0 <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-print0</code> 和 <code>xargs -0</code> 可以处理文件名中包含空格等特殊字符的情况。</p>
</li>
</ol>
<p>这些高级技巧可以帮助你更灵活地使用 <code>find</code> 命令，根据具体需求进行文件搜索和操作。要牢记在使用复杂命令时小心，确保它们符合你的预期。</p>
<h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>在Linux中，<code>find</code>命令用于在文件系统中查找符合指定条件的文件和目录。它提供了强大的搜索功能，可以根据不同的搜索标准来定位文件和目录。</p>
<p><code>find</code>命令的基本语法如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [路径] [表达式]</span><br></pre></td></tr></table></figure>

<p>其中，<code>路径</code>指定要搜索的起始目录路径，<code>表达式</code>用于指定搜索条件和操作。</p>
<p>以下是一些常见的用法示例：</p>
<ol>
<li><p>搜索指定目录下的所有文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory</span><br></pre></td></tr></table></figure>
</li>
<li><p>搜索指定目录下的特定文件类型（例如，所有的文本文件）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type f -name &quot;*.txt&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>搜索指定目录及其子目录下的所有文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type f</span><br></pre></td></tr></table></figure>
</li>
<li><p>搜索指定目录下最近修改的文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type f -mtime -7</span><br></pre></td></tr></table></figure>
<p>上述命令将搜索在最近7天内被修改的文件。</p>
</li>
<li><p>搜索指定目录下的文件并执行操作（如打印文件名或删除文件）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type f -exec echo &#123;&#125; \;</span><br><span class="line">find /path/to/directory -type f -exec rm &#123;&#125; \;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>需要注意以下几点：</p>
<ul>
<li><code>find</code>命令默认会递归地搜索指定目录及其子目录下的文件和目录。</li>
<li><code>-type</code>选项用于指定要搜索的文件类型，例如<code>f</code>表示普通文件，<code>d</code>表示目录。</li>
<li><code>-name</code>选项用于指定文件名的模式匹配。</li>
<li><code>-mtime</code>选项用于指定文件的修改时间，例如<code>-mtime -7</code>表示最近7天内修改的文件。</li>
<li><code>-exec</code>选项用于在找到的文件上执行特定的命令。</li>
</ul>
<p><code>find</code>命令还支持许多其他选项和表达式，用于更精确地控制搜索条件和操作。你可以使用<code>man find</code>命令查阅<code>find</code>命令的详细文档，以了解更多关于其用法和选项的信息。</p>
<hr>
<h2 id="find-exec选项"><a href="#find-exec选项" class="headerlink" title="find -exec选项"></a>find -exec选项</h2><p>在Linux中，<code>-exec</code>是<code>find</code>命令的一个选项，用于在找到的文件上执行指定的命令。<code>-exec</code>选项允许你对找到的文件执行各种自定义操作。</p>
<p><code>-exec</code>选项的语法如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-exec command &#123;&#125; \;</span><br></pre></td></tr></table></figure>

<p>解释如下：</p>
<ul>
<li><code>command</code>：要执行的命令，可以是任何合法的Linux命令。命令必须以空格或分号结尾，并用单引号或双引号括起来。</li>
<li><code>&#123;&#125;</code>：是一个占位符，表示<code>find</code>命令找到的每个文件。<code>&#123;&#125;</code>会被实际的文件名替换。</li>
<li><code>\;</code>：表示<code>-exec</code>选项的结束，必须使用反斜杠转义字符进行转义。</li>
</ul>
<p>以下是一些常见的用法示例：</p>
<ol>
<li><p>打印找到的文件名：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type f -exec echo &#123;&#125; \;</span><br></pre></td></tr></table></figure>
</li>
<li><p>复制找到的文件到目标目录：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type f -exec cp &#123;&#125; /path/to/destination/ \;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除所有找到的文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -type f -exec rm &#123;&#125; \;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>需要注意以下几点：</p>
<ul>
<li>如果在<code>command</code>中使用<code>&#123;&#125;</code>，确保在命令中引用文件名之前进行适当的转义或引号处理，以避免解释错误。</li>
<li>如果要对多个文件执行命令，可以使用<code>+</code>代替<code>\;</code>作为结束符。这样会将多个文件一次传递给命令，从而提高效率。</li>
</ul>
<p>总而言之，<code>-exec</code>选项使得<code>find</code>命令具有强大的功能，可以在找到的文件上执行自定义的命令和操作。这对于批量处理文件或执行复杂的操作非常有用。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_55_rename/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_55_rename/" class="post-title-link" itemprop="url">linux_2_55_rename</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>rename命令</li>
</ul>
<h2 id="linux-rename-批量删除文件名中的中文"><a href="#linux-rename-批量删除文件名中的中文" class="headerlink" title="linux rename 批量删除文件名中的中文"></a>linux rename 批量删除文件名中的中文</h2><p>在 Linux 系统中，如果你想批量删除文件名中的中文，可以使用 <code>rename</code> 命令搭配正则表达式进行操作。以下是一个示例：</p>
<h3 id="1-安装-rename-工具："><a href="#1-安装-rename-工具：" class="headerlink" title="1. 安装 rename 工具："></a>1. <strong>安装 <code>rename</code> 工具：</strong></h3><p>在某些系统中，<code>rename</code> 可能并不是默认安装的工具，你可以通过以下命令安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install rename   <span class="comment"># 对于 Debian/Ubuntu</span></span><br><span class="line"><span class="built_in">sudo</span> yum install prename     <span class="comment"># 对于 CentOS/RHEL</span></span><br></pre></td></tr></table></figure>

<h3 id="2-使用-rename-进行批量删除中文："><a href="#2-使用-rename-进行批量删除中文：" class="headerlink" title="2. 使用 rename 进行批量删除中文："></a>2. <strong>使用 <code>rename</code> 进行批量删除中文：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/[\x&#123;4e00&#125;-\x&#123;9fa5&#125;]//g&#x27;</span> *</span><br></pre></td></tr></table></figure>

<p>这个命令使用正则表达式，将文件名中的所有中文字符删除。解释一下正则表达式中的部分：</p>
<ul>
<li><code>[\x&#123;4e00&#125;-\x&#123;9fa5&#125;]</code>：表示中文字符的 Unicode 范围。这个范围覆盖了常见的中文汉字。</li>
<li><code>//g</code>：表示全局替换。</li>
</ul>
<p>请注意，在执行这个命令之前，建议先在一个测试目录中运行，并确保它符合你的预期。不小心删除文件名可能导致文件不可用，谨慎操作。</p>
<h2 id="linux-rename-批量删除文件名中的指定中文-例如命令"><a href="#linux-rename-批量删除文件名中的指定中文-例如命令" class="headerlink" title="linux rename 批量删除文件名中的指定中文 例如命令"></a>linux rename 批量删除文件名中的指定中文 例如命令</h2><p>如果你想删除文件名中指定的中文字符，可以使用 <code>rename</code> 命令结合正则表达式来实现。以下是一个示例，假设你想删除文件名中所有的“中”字：</p>
<h3 id="示例命令："><a href="#示例命令：" class="headerlink" title="示例命令："></a>示例命令：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/中//g&#x27;</span> *</span><br></pre></td></tr></table></figure>

<p>这个命令使用正则表达式，将文件名中的所有“中”字删除。解释一下这个命令的正则表达式部分：</p>
<ul>
<li><p><code>中</code>：这是你想要删除的中文字符。你可以根据需要修改这部分来匹配不同的中文字符。</p>
</li>
<li><p><code>//g</code>：表示全局替换。</p>
</li>
</ul>
<p><strong>注意：</strong></p>
<ul>
<li>在执行这个命令之前，请在一个测试目录中运行并确保它符合你的预期。不小心删除文件名可能导致文件不可用，所以请谨慎操作。</li>
<li>请注意 <code>rename</code> 命令的实现可能因系统而异。在某些系统上，<code>rename</code> 可能实际上是 <code>rename</code>，而在其他系统上可能是 <code>prename</code>。在使用时请根据你的系统调整命令。</li>
</ul>
<h2 id="linux-rename命令-详解"><a href="#linux-rename命令-详解" class="headerlink" title="linux rename命令 详解"></a>linux rename命令 详解</h2><p>在 Linux 系统中，<code>rename</code> 命令用于批量重命名文件。它允许用户使用正则表达式对文件名进行模式匹配，并在匹配的文件名上执行重命名操作。请注意，<code>rename</code> 命令在不同的 Linux 发行版中可能有不同的实现，以下是常见的两种版本：</p>
<h3 id="1-Perl-版本-prename-或者-rename-ul"><a href="#1-Perl-版本-prename-或者-rename-ul" class="headerlink" title="1. Perl 版本 (prename 或者 rename.ul)"></a>1. Perl 版本 (prename 或者 rename.ul)</h3><h4 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename [options] <span class="string">&#x27;s/old_pattern/new_pattern/&#x27;</span> files</span><br></pre></td></tr></table></figure>

<h4 id="参数说明："><a href="#参数说明：" class="headerlink" title="参数说明："></a>参数说明：</h4><ul>
<li><strong>old_pattern：</strong> 要被替换的旧模式（可以是正则表达式）。</li>
<li><strong>new_pattern：</strong> 用于替换的新模式。</li>
</ul>
<h4 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h4><ul>
<li><strong>-n, –no-act：</strong> 不执行实际的重命名操作，而是显示将要发生的更改。</li>
<li><strong>-v, –verbose：</strong> 显示详细的操作信息。</li>
</ul>
<h4 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h4><ol>
<li><p><strong>将所有文件名中的 <code>.txt</code> 替换为 <code>.md</code>：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/\.txt$/.md/&#x27;</span> *.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在所有文件名前面添加前缀：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/^/prefix_/&#x27;</span> *</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-util-linux-版本"><a href="#2-util-linux-版本" class="headerlink" title="2. util-linux 版本"></a>2. util-linux 版本</h3><h4 id="基本用法：-1"><a href="#基本用法：-1" class="headerlink" title="基本用法："></a>基本用法：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename old_pattern new_pattern files</span><br></pre></td></tr></table></figure>

<h4 id="参数说明：-1"><a href="#参数说明：-1" class="headerlink" title="参数说明："></a>参数说明：</h4><ul>
<li><strong>old_pattern：</strong> 要被替换的旧模式（可以是字符串，不支持正则表达式）。</li>
<li><strong>new_pattern：</strong> 用于替换的新模式。</li>
</ul>
<h4 id="常用选项：-1"><a href="#常用选项：-1" class="headerlink" title="常用选项："></a>常用选项：</h4><ul>
<li><strong>-n, –dry-run：</strong> 显示将要发生的更改，但不执行实际的重命名操作。</li>
<li><strong>-v, –verbose：</strong> 显示详细的操作信息。</li>
</ul>
<h4 id="示例：-1"><a href="#示例：-1" class="headerlink" title="示例："></a>示例：</h4><ol>
<li><p><strong>将所有文件名中的 <code>txt</code> 替换为 <code>md</code>：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename txt md *</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在所有文件名前面添加前缀：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename prefix_ * </span><br></pre></td></tr></table></figure></li>
</ol>
<p>在使用 <code>rename</code> 命令时，特别注意所使用的版本（Perl 版本或 util-linux 版本）和相应版本的选项。这样可以确保你能够正确理解和使用该命令。</p>
<h2 id="linux-rename命令-常用技巧"><a href="#linux-rename命令-常用技巧" class="headerlink" title="linux rename命令 常用技巧"></a>linux rename命令 常用技巧</h2><p>以下是一些在使用 <code>rename</code> 命令时的常用技巧：</p>
<ol>
<li><p><strong>使用正则表达式进行模式匹配：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/old_pattern/new_pattern/&#x27;</span> files</span><br></pre></td></tr></table></figure>
<p>使用正则表达式模式匹配，可以更灵活地选择要替换的文件名部分。</p>
</li>
<li><p><strong>批量删除文件名中的特定字符：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/\s+//g&#x27;</span> *.txt</span><br></pre></td></tr></table></figure>
<p>使用正则表达式移除文件名中的空格。</p>
</li>
<li><p><strong>递归重命名子目录中的文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -<span class="built_in">type</span> f -<span class="built_in">exec</span> rename <span class="string">&#x27;s/old_pattern/new_pattern/&#x27;</span> &#123;&#125; +</span><br></pre></td></tr></table></figure>
<p>使用 <code>find</code> 结合 <code>rename</code> 对目录下所有文件进行递归重命名。</p>
</li>
<li><p><strong>根据文件名中的数字排序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/file(\d+)/new_file$1/&#x27;</span> file*.txt</span><br></pre></td></tr></table></figure>
<p>将文件名中的数字提取出来，并进行排序后再替换。</p>
</li>
<li><p><strong>预览操作而不实际执行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename -n <span class="string">&#x27;s/old_pattern/new_pattern/&#x27;</span> files</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项可以预览将要发生的更改，而不执行实际的重命名操作。</p>
</li>
<li><p><strong>添加前缀或后缀：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/^/prefix_/&#x27;</span> *.txt</span><br></pre></td></tr></table></figure>
<p>在文件名前面添加前缀。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/$/_suffix/&#x27;</span> *.txt</span><br></pre></td></tr></table></figure>
<p>在文件名后面添加后缀。</p>
</li>
<li><p><strong>限制重命名的文件类型：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/old_pattern/new_pattern/&#x27;</span> *.jpg</span><br></pre></td></tr></table></figure>
<p>可以只选择特定文件类型进行重命名。</p>
</li>
<li><p><strong>指定文件名的范围：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/old_pattern/new_pattern/&#x27;</span> file&#123;1..5&#125;.txt</span><br></pre></td></tr></table></figure>
<p>可以使用花括号扩展来指定一定范围的文件名。</p>
</li>
<li><p><strong>将文件名中的大写字母转换为小写：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;y/A-Z/a-z/&#x27;</span> *</span><br></pre></td></tr></table></figure>
<p>使用 <code>y</code> 命令将文件名中的大写字母转换为小写。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>rename</code> 命令，根据实际需求对文件名进行批量重命名操作。记住在执行实际操作之前，可以使用 <code>-n</code> 选项进行预览，确保操作符合预期。</p>
<h2 id="rename"><a href="#rename" class="headerlink" title="rename"></a>rename</h2><p>在Linux中，<code>rename</code>命令用于批量重命名文件或目录。它可以根据指定的规则来修改文件或目录的名称。下面是<code>rename</code>命令的详解：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename [选项] &#x27;原始模式&#x27; &#x27;目标模式&#x27; 文件...</span><br></pre></td></tr></table></figure>

<ul>
<li><p>选项：<code>rename</code>命令的可选参数包括：</p>
<ul>
<li><code>-v</code>：显示详细的操作信息，输出每个重命名操作的结果。</li>
<li><code>-n</code>：不执行实际的重命名操作，只显示将要执行的操作，用于进行测试和预览。</li>
</ul>
</li>
<li><p>‘原始模式’：指定要匹配的原始文件或目录的模式。可以使用通配符、正则表达式或简单的字符串匹配模式。</p>
</li>
<li><p>‘目标模式’：指定要替换原始模式的目标模式。可以使用变量和通配符来构建新的名称。</p>
</li>
<li><p>文件…：要进行重命名操作的文件或目录列表。</p>
</li>
</ul>
<p>下面是一些示例，演示<code>rename</code>命令的用法：</p>
<ol>
<li><p>将扩展名从.txt改为.md：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename &#x27;s/\.txt$/.md/&#x27; *.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>将文件名中的空格替换为下划线：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename &#x27;s/ /_/g&#x27; *</span><br></pre></td></tr></table></figure>
</li>
<li><p>在文件名前面添加前缀：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename &#x27;s/^/prefix_/&#x27; *</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除文件名中的特定字符：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename &#x27;s/[aeiou]//g&#x27; *</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用计数器对文件进行编号：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename &#x27;$_ = sprintf(&quot;file%03d&quot;, ++$count)&#x27; *</span><br></pre></td></tr></table></figure></li>
</ol>
<p>这些示例只是<code>rename</code>命令的一些常见用法，您可以根据需要使用更复杂的模式和规则来执行重命名操作。<code>rename</code>命令非常强大，并且可以根据您的需求进行灵活的批量重命名操作。在使用<code>rename</code>命令时，请谨慎操作，确保在执行实际的重命名操作之前进行测试和验证。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_58_md5sum/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_58_md5sum/" class="post-title-link" itemprop="url">linux_2_58_md5sum</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>md5sum命令</li>
</ul>
<h2 id="linux-md5sum命令-详解"><a href="#linux-md5sum命令-详解" class="headerlink" title="linux md5sum命令 详解"></a>linux md5sum命令 详解</h2><p><code>md5sum</code> 是一个用于计算和验证文件 MD5 摘要的 Linux 命令。MD5（Message Digest Algorithm 5）是一种广泛使用的哈希函数，用于产生固定长度的散列值，通常用作文件的校验和。以下是关于 <code>md5sum</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> [选项] [文件]</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><p><strong>-b, –binary：</strong> 以二进制模式处理文件。</p>
</li>
<li><p><strong>-c, –check：</strong> 从文件中读取 MD5 摘要并验证文件。</p>
</li>
<li><p><strong>-t, –text：</strong> 以文本模式处理文件。</p>
</li>
<li><p><strong>-w, –warn：</strong> 在检查模式时，显示警告信息。</p>
</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>计算文件的 MD5 摘要：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> filename</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>计算多个文件的 MD5 摘要：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> file1 file2 file3</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>将 MD5 摘要保存到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> file1 &gt; checksums.md5</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>检查文件是否与给定的 MD5 摘要匹配：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> -c checksums.md5</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="示例解释："><a href="#示例解释：" class="headerlink" title="示例解释："></a>示例解释：</h3><ul>
<li><p><strong>输出格式：</strong> <code>MD5值 文件名</code></p>
</li>
<li><p><strong>计算 MD5 摘要：</strong> <code>md5sum filename</code> 将计算指定文件的 MD5 摘要。</p>
</li>
<li><p><strong>验证文件：</strong> <code>md5sum -c checksums.md5</code> 将读取 <code>checksums.md5</code> 文件中的 MD5 摘要，并检查每个文件是否与摘要匹配。如果匹配，输出文件名，否则显示警告。</p>
</li>
<li><p><strong>保存 MD5 摘要到文件：</strong> <code>md5sum file1 &gt; checksums.md5</code> 将计算 <code>file1</code> 的 MD5 摘要并将其保存到 <code>checksums.md5</code> 文件中。</p>
</li>
<li><p><strong>二进制模式和文本模式：</strong> 使用 <code>-b</code> 或 <code>-t</code> 选项来指定处理文件的模式。默认情况下，<code>md5sum</code> 以二进制模式处理文件。</p>
</li>
</ul>
<h3 id="安全性注意事项："><a href="#安全性注意事项：" class="headerlink" title="安全性注意事项："></a>安全性注意事项：</h3><p>MD5 算法在安全性上存在问题，因为它容易受到碰撞攻击。因此，在对文件进行重要安全性验证时，建议使用更安全的哈希算法，如SHA-256或SHA-3，而不是MD5。</p>
<h2 id="linux-md5sum命令-常用技巧"><a href="#linux-md5sum命令-常用技巧" class="headerlink" title="linux md5sum命令 常用技巧"></a>linux md5sum命令 常用技巧</h2><p><code>md5sum</code> 命令在 Linux 中是一个用于计算和验证文件 MD5 摘要的常用工具。以下是一些常用的技巧和技术：</p>
<ol>
<li><p><strong>计算单个文件的 MD5 摘要：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> filename</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>计算多个文件的 MD5 摘要：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> file1 file2 file3</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>计算文件夹中所有文件的 MD5 摘要：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> *.*</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>递归计算文件夹中所有文件的 MD5 摘要：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -<span class="built_in">type</span> f -<span class="built_in">exec</span> <span class="built_in">md5sum</span> &#123;&#125; \;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>将 MD5 摘要保存到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> file1 &gt; checksums.md5</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>将多个文件的 MD5 摘要保存到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> file1 file2 file3 &gt; checksums.md5</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>检查文件是否与给定的 MD5 摘要匹配：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> -c checksums.md5</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用管道计算文件内容的 MD5 摘要：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> filename | <span class="built_in">md5sum</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>将 MD5 摘要输出显示为只有哈希值，不显示文件名：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> -b filename</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>验证文件时忽略警告信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> -w -c checksums.md5</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用 <code>awk</code> 提取文件的 MD5 哈希值：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> filename | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用 <code>cut</code> 提取文件的 MD5 哈希值：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md5sum</span> filename | <span class="built_in">cut</span> -d<span class="string">&#x27; &#x27;</span> -f1</span><br></pre></td></tr></table></figure></li>
</ol>
<p>这些技巧能够帮助你更灵活地使用 <code>md5sum</code> 命令来满足不同的需求，无论是计算文件的哈希值还是验证文件的完整性。</p>
<h2 id="md5sum"><a href="#md5sum" class="headerlink" title="md5sum"></a>md5sum</h2><p><code>md5sum</code> 是一个常用的 Linux 命令，用于计算文件的 MD5 哈希值。它的基本语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">md5sum [选项] 文件</span><br></pre></td></tr></table></figure>

<p>其中，<code>文件</code> 参数是要计算哈希值的文件路径。</p>
<p>以下是一些常用的选项：</p>
<ul>
<li><code>-b</code> 或 <code>--binary</code>：以二进制模式读取文件。</li>
<li><code>-c</code> 或 <code>--check</code>：校验 MD5 校验和文件。</li>
<li><code>-t</code> 或 <code>--text</code>：以文本模式读取文件。</li>
<li><code>-q</code> 或 <code>--quiet</code>：只显示校验结果，不显示详细信息。</li>
</ul>
<p>使用示例：</p>
<ol>
<li><p>计算单个文件的 MD5 哈希值：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">md5sum file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>计算多个文件的 MD5 哈希值：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">md5sum file1.txt file2.txt file3.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过 MD5 校验和文件校验文件的完整性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">md5sum -c checksum.md5</span><br></pre></td></tr></table></figure>
</li>
<li><p>只显示校验结果，不显示详细信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">md5sum -q file.txt</span><br></pre></td></tr></table></figure></li>
</ol>
<p>请注意，<code>md5sum</code> 命令计算的是文件的 MD5 哈希值，而不是文件内容的加密哈希。它通常用于校验文件的完整性，确保文件在传输过程中没有被篡改。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_61_watch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_61_watch/" class="post-title-link" itemprop="url">linux_2_61_watch</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>watch命令</li>
</ul>
<h2 id="linux-watch命令-详解"><a href="#linux-watch命令-详解" class="headerlink" title="linux watch命令 详解"></a>linux watch命令 详解</h2><p><code>watch</code> 是一个 Linux 命令，用于周期性地执行给定的命令，并在终端上显示输出结果。默认情况下，<code>watch</code> 每两秒钟刷新一次终端，并显示命令的最新输出。这对于监视实时进程、日志文件或其他动态数据非常有用。以下是 <code>watch</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch [选项] 命令</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><p><strong>-n &lt;秒数&gt;, –interval&#x3D;&lt;秒数&gt;：</strong> 指定刷新间隔时间，默认为两秒。</p>
</li>
<li><p><strong>-d, –differences：</strong> 高亮显示命令输出中发生变化的部分。</p>
</li>
<li><p><strong>-t, –no-title：</strong> 隐藏终端顶部的标题行。</p>
</li>
<li><p><strong>-h, –help：</strong> 显示帮助信息。</p>
</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>基本用法：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch <span class="built_in">ls</span> -l</span><br></pre></td></tr></table></figure>
<p>这将每两秒运行一次 <code>ls -l</code> 命令并显示结果。</p>
</li>
<li><p><strong>指定刷新间隔时间：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 5 <span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，指定刷新间隔为5秒，监视磁盘空间的变化。</p>
</li>
<li><p><strong>高亮显示差异：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -d <span class="built_in">ls</span> -l</span><br></pre></td></tr></table></figure>
<p>使用 <code>-d</code> 选项，高亮显示输出中发生变化的部分。</p>
</li>
<li><p><strong>隐藏标题行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -t <span class="built_in">du</span> -sh</span><br></pre></td></tr></table></figure>
<p>使用 <code>-t</code> 选项，隐藏终端顶部的标题行。</p>
</li>
<li><p><strong>查看进程实时信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 ps aux</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，每秒查看一次系统中运行的进程。</p>
</li>
</ol>
<h3 id="示例解释："><a href="#示例解释：" class="headerlink" title="示例解释："></a>示例解释：</h3><ul>
<li><p><strong>刷新间隔：</strong> 默认情况下，<code>watch</code> 每两秒刷新一次。使用 <code>-n</code> 选项可以指定刷新间隔，以秒为单位。</p>
</li>
<li><p><strong>差异高亮显示：</strong> 使用 <code>-d</code> 选项，<code>watch</code> 会在输出中高亮显示发生变化的部分，便于识别变化。</p>
</li>
<li><p><strong>隐藏标题行：</strong> 使用 <code>-t</code> 选项，可以隐藏终端顶部的标题行，使界面更简洁。</p>
</li>
<li><p><strong>实时监视命令输出：</strong> <code>watch</code> 对于实时监视命令输出非常有用，例如查看磁盘空间、进程列表等。</p>
</li>
<li><p><strong>中断操作：</strong> 在 <code>watch</code> 运行的终端中，可以使用 <code>Ctrl+C</code> 中断操作，停止 <code>watch</code> 命令的执行。</p>
</li>
</ul>
<p><code>watch</code> 是一个强大的实用工具，特别适用于需要持续监视输出的场景。</p>
<h2 id="linux-watch命令-常用技巧"><a href="#linux-watch命令-常用技巧" class="headerlink" title="linux watch命令 常用技巧"></a>linux watch命令 常用技巧</h2><p><code>watch</code> 命令在 Linux 中常用于定期执行命令并显示输出。以下是一些常用的 <code>watch</code> 命令技巧：</p>
<ol>
<li><p><strong>定期查看日志文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 5 <span class="built_in">tail</span> /var/log/syslog</span><br></pre></td></tr></table></figure>
<p>这将每5秒刷新一次 <code>syslog</code> 日志文件的末尾，以查看实时的系统日志。</p>
</li>
<li><p><strong>监控文件变化：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -d <span class="built_in">ls</span> -l</span><br></pre></td></tr></table></figure>
<p>使用 <code>-d</code> 选项，高亮显示输出中发生变化的部分，有助于监控文件变化。</p>
</li>
<li><p><strong>监视实时网络连接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 netstat -an</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，每秒显示一次网络连接信息，有助于监视实时网络活动。</p>
</li>
<li><p><strong>查看磁盘使用情况：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 5 <span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，每5秒查看一次磁盘使用情况，以实时监控可用磁盘空间。</p>
</li>
<li><p><strong>实时监视系统资源利用率：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 top</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，每秒刷新一次 <code>top</code> 命令，实时查看系统资源利用率。</p>
</li>
<li><p><strong>定期执行自定义脚本：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 10 /path/to/custom/script.sh</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，每10秒执行一次自定义脚本并显示输出。</p>
</li>
<li><p><strong>监控文件夹变化：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -d <span class="built_in">ls</span> -l /path/to/directory</span><br></pre></td></tr></table></figure>
<p>使用 <code>-d</code> 选项，高亮显示输出中发生变化的部分，有助于监控文件夹内文件的变化。</p>
</li>
<li><p><strong>查看系统时间变化：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 <span class="built_in">date</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，每秒显示一次当前系统时间，实时查看时间变化。</p>
</li>
<li><p><strong>实时监控网络传输速率：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 ifconfig eth0</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，每秒显示一次网络接口信息，包括传输速率。</p>
</li>
<li><p><strong>监视进程的 CPU 和内存使用情况：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 ps aux</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，每秒刷新一次正在运行的进程的 CPU 和内存使用情况。</p>
</li>
</ol>
<p>这些技巧可以使 <code>watch</code> 命令更灵活，适应不同的监控和观察需求。根据具体的场景，调整刷新间隔和监控的命令，以获得所需的实时信息。</p>
<h2 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h2><ul>
<li><p>简介：</p>
<ul>
<li>watch命令是在Linux环境下，以固定时间间隔观察用户自定义命令运行情况的工具</li>
<li>它暂时清除所有终端内容，并显示所附命令的输出，以及当前系统的日期和时间。</li>
<li>它默认为每2秒更新一次所附命令的输出，<code>ctrl+c</code>用于退出</li>
<li>当你需要监控一个命令输出随时间的变化时，watch命令很有用。这包括磁盘使用率、系统正常运行时间或跟踪错误。</li>
</ul>
</li>
<li><p>语法：</p>
<ul>
<li><code>watch [option] [command]</code></li>
</ul>
</li>
<li><p>参数：</p>
<ul>
<li><code>[option]</code>  添加一个选项可以改变观察命令的行为方式<ul>
<li>-n, –interval  允许你指定输出更新的时间间隔。</li>
<li>-d, –differences  突出了输出更新之间的差异。</li>
<li>-g, –chgexit  当用户定义的命令的输出发生变化时，退出监视命令</li>
<li>-t, –no-title  移除显示时间间隔、命令和当前时间及日期的标题。</li>
<li>-b, –beep  如果命令退出时出现错误，则播放声音警报（哔哔声）</li>
<li>-p, –precise  试图在-interval选项定义的确切秒数之后运行命令。</li>
<li>-e, –errexit  出错时停止输出更新，在按下一个键后退出命令。</li>
<li>-c, –color  解释ANSI颜色和样式序列。</li>
<li>-x, –exec  将用户定义的命令传递给exec，减少对额外引号的需要。</li>
<li>-w, –no-linewrap  关掉换行，截断长行。</li>
<li>-h, –help  显示帮助文本并退出</li>
<li>-v, –version  显示版本信息并退出</li>
</ul>
</li>
</ul>
</li>
<li><p>示例</p>
<ul>
<li><code>watch -n 5 date</code></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_60_ldd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_60_ldd/" class="post-title-link" itemprop="url">linux_2_60_ldd</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>ldd命令</li>
</ul>
<h2 id="linux-ldd命令-详解"><a href="#linux-ldd命令-详解" class="headerlink" title="linux ldd命令 详解"></a>linux ldd命令 详解</h2><p><code>ldd</code> 是 Linux 系统中的一个命令，用于显示可执行文件或共享库的动态链接依赖关系。它会列出程序运行时所需的共享库，并显示它们的完整路径。以下是关于 <code>ldd</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd [选项] 可执行文件</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><p><strong>-v, –verbose：</strong> 显示详细的信息，包括库的版本号和调试信息。</p>
</li>
<li><p><strong>-u, –unused：</strong> 仅显示未使用的直接依赖项。</p>
</li>
<li><p><strong>-d, –data-relocs：</strong> 显示数据的重定位信息。</p>
</li>
<li><p><strong>-r, –function-relocs：</strong> 显示函数的重定位信息。</p>
</li>
<li><p><strong>-s, –not-symbolic：</strong> 不解析符号链接，直接显示链接库的真实路径。</p>
</li>
<li><p><strong>-f, –list-file：</strong> 将输出写入到指定的文件而不是标准输出。</p>
</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>显示可执行文件的动态链接依赖关系：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd /path/to/executable</span><br></pre></td></tr></table></figure>
<p>这将列出可执行文件所需的共享库以及它们的完整路径。</p>
</li>
<li><p><strong>显示未使用的直接依赖项：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -u /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-u</code> 选项，仅显示未被程序使用的直接依赖项。</p>
</li>
<li><p><strong>显示详细信息和版本号：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -v /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-v</code> 选项，可以显示详细的信息，包括库的版本号和调试信息。</p>
</li>
<li><p><strong>显示数据的重定位信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -d /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-d</code> 选项，可以显示数据的重定位信息。</p>
</li>
<li><p><strong>显示函数的重定位信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -r /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-r</code> 选项，可以显示函数的重定位信息。</p>
</li>
<li><p><strong>不解析符号链接，直接显示链接库的真实路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -s /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项，将不解析符号链接，直接显示链接库的真实路径。</p>
</li>
<li><p><strong>将输出写入到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -f /path/to/executable &gt; dependencies.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>-f</code> 选项，可以将输出写入到指定的文件而不是标准输出。</p>
</li>
</ol>
<h3 id="示例解释："><a href="#示例解释：" class="headerlink" title="示例解释："></a>示例解释：</h3><ul>
<li><p><strong>动态链接依赖关系：</strong> <code>ldd</code> 命令会列出可执行文件所依赖的共享库，并显示它们的路径，以便操作系统在程序运行时能够正确加载这些库。</p>
</li>
<li><p><strong>未使用的依赖项：</strong> 使用 <code>-u</code> 选项，可以找出程序依赖的库中哪些没有被程序使用。</p>
</li>
<li><p><strong>详细信息和版本号：</strong> 使用 <code>-v</code> 选项，可以获取更详细的信息，包括库的版本号和调试信息，有助于排查问题。</p>
</li>
<li><p><strong>重定位信息：</strong> 使用 <code>-d</code> 和 <code>-r</code> 选项，可以查看关于数据和函数的重定位信息，对于调试和分析程序行为很有帮助。</p>
</li>
<li><p><strong>不解析符号链接：</strong> 使用 <code>-s</code> 选项，可以显示链接库的真实路径，而不是解析符号链接。</p>
</li>
<li><p><strong>输出写入文件：</strong> 使用 <code>-f</code> 选项，可以将 <code>ldd</code> 命令的输出写入指定的文件，以便后续分析。</p>
</li>
</ul>
<h2 id="linux-ldd命令-常用技巧"><a href="#linux-ldd命令-常用技巧" class="headerlink" title="linux ldd命令 常用技巧"></a>linux ldd命令 常用技巧</h2><p><code>ldd</code> 命令在 Linux 中用于查看可执行文件或共享库的动态链接依赖关系。以下是一些 <code>ldd</code> 命令的常用技巧：</p>
<ol>
<li><p><strong>查看可执行文件的动态链接库：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd /path/to/executable</span><br></pre></td></tr></table></figure>
<p>这会列出可执行文件所依赖的共享库以及它们的路径。</p>
</li>
<li><p><strong>只显示缺失的动态链接库：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -u /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-u</code> 选项，可以仅显示未被程序使用的直接依赖项，即缺失的库。</p>
</li>
<li><p><strong>显示详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -v /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-v</code> 选项，可以显示更详细的信息，包括库的版本号和调试信息。</p>
</li>
<li><p><strong>查看共享库的依赖关系：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd /path/to/shared/library.so</span><br></pre></td></tr></table></figure>
<p><code>ldd</code> 不仅可以用于可执行文件，也可以用于查看共享库的依赖关系。</p>
</li>
<li><p><strong>将输出写入文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd /path/to/executable &gt; dependencies.txt</span><br></pre></td></tr></table></figure>
<p>将 <code>ldd</code> 的输出写入文件，以便后续分析。</p>
</li>
<li><p><strong>显示所有符号链接的真实路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -s /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项，可以显示链接库的真实路径，而不是解析符号链接。</p>
</li>
<li><p><strong>显示函数的重定位信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -r /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-r</code> 选项，可以显示函数的重定位信息，对于调试和分析程序行为很有帮助。</p>
</li>
<li><p><strong>显示数据的重定位信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd -d /path/to/executable</span><br></pre></td></tr></table></figure>
<p>使用 <code>-d</code> 选项，可以显示数据的重定位信息。</p>
</li>
<li><p><strong>递归查看所有依赖项：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/executable -<span class="built_in">exec</span> ldd &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>find</code> 命令和 <code>-exec</code> 选项，递归查看所有依赖项。</p>
</li>
</ol>
<p>这些技巧能够帮助你更深入地了解程序的依赖关系，有助于调试和解决运行时的问题。</p>
<h2 id="ldd（list-dynamic-dependencies）"><a href="#ldd（list-dynamic-dependencies）" class="headerlink" title="ldd（list dynamic dependencies）"></a>ldd（list dynamic dependencies）</h2><ul>
<li><p>简介：</p>
<ul>
<li>ldd命令用于打印程序或者库文件所依赖的共享库列表。</li>
</ul>
</li>
<li><p>语法</p>
<ul>
<li><code>ldd [参数] [文件]</code></li>
</ul>
</li>
<li><p>参数</p>
<ul>
<li>-v 详细信息模式，打印所有相关信息 </li>
<li>-u 打印未使用的直接依赖 </li>
<li>-d 执行重定位和报告任何丢失的对象 </li>
<li>-r 执行数据对象和函数的重定位，并且报告任何丢失的对象和函数 </li>
<li>–help 显示帮助信息</li>
</ul>
</li>
<li><p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd /path/to/executable</span><br></pre></td></tr></table></figure>
</li>
<li><p>注：</p>
<ul>
<li>当你在终端中运行 ldd 命令并指定一个可执行文件的路径时，它会列出该可执行文件所依赖的共享库。对于每个共享库，它会显示库的路径和版本号。这些共享库是程序在运行时需要的动态链接库，它们提供了程序所需的函数和符号</li>
<li>ldd 命令对于诊断程序依赖性问题非常有用。通过查看程序的依赖库列表，你可以确定程序是否缺少某些依赖库或使用了不兼容的库版本</li>
<li>需要注意的是，ldd 命令只能查看程序或共享库的直接依赖库，无法递归地列出所有依赖关系。如果你需要查看所有依赖库，可以使用工具如 readelf 或 objdump 结合脚本来实现</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_62_unset/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_62_unset/" class="post-title-link" itemprop="url">linux_2_62_unset</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>unset命令</li>
</ul>
<h2 id="linux-unset命令-详解"><a href="#linux-unset命令-详解" class="headerlink" title="linux unset命令 详解"></a>linux unset命令 详解</h2><p><code>unset</code> 是一个 Linux&#x2F;Unix 命令，用于删除环境变量或取消变量的赋值。它的主要作用是将变量从 shell 的环境中移除。以下是关于 <code>unset</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> [选项] [变量名]</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><strong>-f, –force：</strong> 强制删除函数定义，即使函数是只读的。</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>删除环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> MY_VARIABLE</span><br></pre></td></tr></table></figure>
<p>这将删除名为 <code>MY_VARIABLE</code> 的环境变量。</p>
</li>
<li><p><strong>删除多个环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> VAR1 VAR2 VAR3</span><br></pre></td></tr></table></figure>
<p>可以一次删除多个环境变量。</p>
</li>
<li><p><strong>删除数组中的元素：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> my_array[2]</span><br></pre></td></tr></table></figure>
<p>可以从数组中删除指定索引处的元素。</p>
</li>
<li><p><strong>删除函数定义：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> -f my_function</span><br></pre></td></tr></table></figure>
<p>使用 <code>-f</code> 选项，可以删除名为 <code>my_function</code> 的函数定义。</p>
</li>
</ol>
<h3 id="示例解释："><a href="#示例解释：" class="headerlink" title="示例解释："></a>示例解释：</h3><ul>
<li><p><strong>删除环境变量：</strong> <code>unset</code> 主要用于删除已定义的环境变量。这对于清理不再需要的变量或重置变量的值是有用的。</p>
</li>
<li><p><strong>删除多个环境变量：</strong> 通过在一条命令中列出多个变量名，可以同时删除多个环境变量。</p>
</li>
<li><p><strong>删除数组中的元素：</strong> 在 Bash 中，可以使用 <code>unset</code> 删除数组中的特定元素，通过指定数组名和元素索引。</p>
</li>
<li><p><strong>删除函数定义：</strong> 使用 <code>-f</code> 选项，可以强制删除已定义的函数，即使函数是只读的。</p>
</li>
</ul>
<p><strong>注意：</strong> <code>unset</code> 命令不仅可以删除环境变量，还可以删除函数定义。在使用时，应谨慎，确保不会删除关键变量或函数。</p>
<h2 id="linux-unset命令-常用技巧"><a href="#linux-unset命令-常用技巧" class="headerlink" title="linux unset命令 常用技巧"></a>linux unset命令 常用技巧</h2><p><code>unset</code> 命令在 Linux 中通常用于删除环境变量或取消变量的赋值。以下是一些 <code>unset</code> 命令的常用技巧：</p>
<ol>
<li><p><strong>删除环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> MY_VARIABLE</span><br></pre></td></tr></table></figure>
<p>这将删除名为 <code>MY_VARIABLE</code> 的环境变量。</p>
</li>
<li><p><strong>删除数组元素：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_array=(1 2 3 4 5)</span><br><span class="line"><span class="built_in">unset</span> my_array[2]</span><br></pre></td></tr></table></figure>
<p>在 Bash 中，可以使用 <code>unset</code> 删除数组中的特定元素，通过指定数组名和元素索引。</p>
</li>
<li><p><strong>删除多个环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> VAR1 VAR2 VAR3</span><br></pre></td></tr></table></figure>
<p>一次性删除多个环境变量。</p>
</li>
<li><p><strong>删除所有环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> $(<span class="built_in">env</span> | grep -o <span class="string">&#x27;^[^=]\+=&#x27;</span> | sed <span class="string">&#x27;s/=//&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>使用命令替换和管道，删除所有环境变量。这样做时要非常谨慎，以免删除系统关键变量。</p>
</li>
<li><p><strong>在函数中使用 unset：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">my_function</span></span>() &#123;</span><br><span class="line">    <span class="built_in">unset</span> MY_VARIABLE</span><br><span class="line">    <span class="comment"># 函数的其他操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在函数中使用 <code>unset</code> 可以清除特定的环境变量，确保函数内部不受其影响。</p>
</li>
<li><p><strong>取消变量的赋值：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_variable=<span class="string">&quot;some_value&quot;</span></span><br><span class="line"><span class="built_in">unset</span> my_variable</span><br></pre></td></tr></table></figure>
<p>使用 <code>unset</code> 可以取消变量的赋值，将其还原为未定义状态。</p>
</li>
<li><p><strong>强制删除只读变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">readonly_var=<span class="string">&quot;read-only&quot;</span></span><br><span class="line"><span class="built_in">unset</span> readonly_var</span><br></pre></td></tr></table></figure>
<p>尝试使用 <code>unset</code> 删除只读变量时会报错，但可以通过 <code>unset</code> 命令的 <code>-f</code> 选项强制删除。</p>
</li>
<li><p><strong>删除函数定义：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> -f my_function</span><br></pre></td></tr></table></figure>
<p>使用 <code>-f</code> 选项，可以删除已定义的函数。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>unset</code> 命令，清理和管理环境变量，以及取消变量和函数的赋值。</p>
<h2 id="unset"><a href="#unset" class="headerlink" title="unset"></a>unset</h2><ul>
<li><p>简介：</p>
<ul>
<li>Linux unset命令用于删除变量或函数</li>
<li>unset为shell内建指令，可删除变量或函数</li>
</ul>
</li>
<li><p>语法：</p>
<ul>
<li><code>unset [-fv][变量或函数名称]</code></li>
</ul>
</li>
<li><p>参数：</p>
<ul>
<li><code>-f</code>  仅删除函数</li>
<li><code>-v</code>  仅删除变量</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_59_readelf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_59_readelf/" class="post-title-link" itemprop="url">linux_2_59_readelf</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>realelf命令</li>
</ul>
<h2 id="linux-realelf命令-详解"><a href="#linux-realelf命令-详解" class="headerlink" title="linux realelf命令 详解"></a>linux realelf命令 详解</h2><p>在 Linux 中，<code>readelf</code> 命令用于显示 ELF（Executable and Linkable Format）文件的信息，包括可执行文件、共享库以及目标文件等。ELF 是一种用于描述二进制文件结构的标准格式，常见于 Linux 和许多类 Unix 操作系统中。以下是关于 <code>readelf</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf [选项] 文件</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><p><strong>-a, –all：</strong> 显示所有信息。</p>
</li>
<li><p><strong>-h, –file-header：</strong> 显示 ELF 文件头部信息。</p>
</li>
<li><p><strong>-l, –program-headers：</strong> 显示程序头部表信息。</p>
</li>
<li><p><strong>-S, –section-headers：</strong> 显示节头部表信息。</p>
</li>
<li><p><strong>-e, –headers：</strong> 等同于 <code>-h -l -S</code>，显示所有头部信息。</p>
</li>
<li><p><strong>-s, –symbols：</strong> 显示符号表。</p>
</li>
<li><p><strong>-d, –dynamic：</strong> 显示动态节信息。</p>
</li>
<li><p><strong>-A, –arch-specific：</strong> 显示体系结构特定标记。</p>
</li>
<li><p><strong>-x &lt;number or name&gt;, –hex-dump&#x3D;&lt;number or name&gt;：</strong> 以十六进制格式显示指定节的内容。</p>
</li>
<li><p><strong>-w[lLiaprmfFsoRtUu], –debug-dump[&#x3D;option]：</strong> 显示调试节的详细信息。</p>
</li>
<li><p><strong>-p &lt;string&gt;, –string-dump&#x3D;&lt;string&gt;：</strong> 显示指定节的字符串表。</p>
</li>
<li><p><strong>–version：</strong> 显示 <code>readelf</code> 版本信息。</p>
</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>显示 ELF 文件头信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -h executable_file</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示程序头表信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -l executable_file</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示节头表信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -S executable_file</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示符号表信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -s executable_file</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示动态节信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -d executable_file</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>以十六进制格式显示指定节的内容：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -x .text executable_file</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示调试信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -w executable_file</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="示例解释："><a href="#示例解释：" class="headerlink" title="示例解释："></a>示例解释：</h3><ul>
<li><p><strong>ELF 文件头信息：</strong> 使用 <code>-h</code> 选项显示 ELF 文件的头部信息，包括文件类型、入口点地址、程序头部表偏移、节头部表偏移等。</p>
</li>
<li><p><strong>程序头表和节头表信息：</strong> 使用 <code>-l</code> 和 <code>-S</code> 选项分别显示程序头表和节头表的详细信息。</p>
</li>
<li><p><strong>符号表信息：</strong> 使用 <code>-s</code> 选项显示 ELF 文件的符号表，包括函数、变量等。</p>
</li>
<li><p><strong>动态节信息：</strong> 使用 <code>-d</code> 选项显示 ELF 文件的动态节信息，这对于共享库和动态链接很有用。</p>
</li>
<li><p><strong>以十六进制格式显示指定节的内容：</strong> 使用 <code>-x</code> 选项可以查看指定节的内容，例如 <code>.text</code> 节包含可执行代码。</p>
</li>
<li><p><strong>调试信息：</strong> 使用 <code>-w</code> 选项显示 ELF 文件的调试信息，包括源代码、调试符号等。</p>
</li>
</ul>
<h2 id="linux-realelf命令-常用技巧"><a href="#linux-realelf命令-常用技巧" class="headerlink" title="linux realelf命令 常用技巧"></a>linux realelf命令 常用技巧</h2><p>在 Linux 中，<code>readelf</code> 命令是一个强大的工具，可以用于分析和查看 ELF（Executable and Linkable Format）文件的结构和信息。以下是一些常用的 <code>readelf</code> 命令技巧和用法：</p>
<ol>
<li><p><strong>查看 ELF 文件头信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -h executable_file</span><br></pre></td></tr></table></figure>
<p>通过 <code>-h</code> 选项，可以查看 ELF 文件的头部信息，包括文件类型、入口点地址、程序头部表偏移、节头部表偏移等。</p>
</li>
<li><p><strong>查看程序头表信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -l executable_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-l</code> 选项，可以查看 ELF 文件的程序头表信息，包括每个程序头条目的详细信息。</p>
</li>
<li><p><strong>查看节头表信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -S executable_file</span><br></pre></td></tr></table></figure>
<p>通过 <code>-S</code> 选项，可以查看 ELF 文件的节头表信息，包括每个节的详细信息，如名称、大小、偏移等。</p>
</li>
<li><p><strong>查看符号表信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -s executable_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项，可以查看 ELF 文件的符号表信息，包括函数、变量等的详细信息。</p>
</li>
<li><p><strong>查看动态节信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -d executable_file</span><br></pre></td></tr></table></figure>
<p>通过 <code>-d</code> 选项，可以查看 ELF 文件的动态节信息，包括共享库的动态链接信息。</p>
</li>
<li><p><strong>以十六进制格式查看指定节的内容：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -x .text executable_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-x</code> 选项，可以查看指定节（这里是 <code>.text</code> 节）的内容，以十六进制格式显示。</p>
</li>
<li><p><strong>查看字符串表信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -p .strtab executable_file</span><br></pre></td></tr></table></figure>
<p>通过 <code>-p</code> 选项，可以查看指定节（这里是 <code>.strtab</code> 节）的字符串表信息。</p>
</li>
<li><p><strong>查看调试信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -w executable_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-w</code> 选项，可以查看 ELF 文件的调试信息，包括源代码、调试符号等。</p>
</li>
<li><p><strong>显示所有信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -a executable_file</span><br></pre></td></tr></table></figure>
<p>通过 <code>-a</code> 选项，可以显示 ELF 文件的所有信息，包括头部、节头、程序头、符号表、动态节等。</p>
</li>
</ol>
<p>这些技巧可以帮助你更全面地了解 ELF 文件的结构和内容，对于调试、性能优化以及软件逆向工程等方面都非常有用。</p>
<h2 id="readelf"><a href="#readelf" class="headerlink" title="readelf"></a>readelf</h2><ul>
<li><p>readelf 是一个命令行工具，用于显示 ELF（Executable and Linkable Format）格式的文件的信息。ELF 是一种常用的二进制文件格式，用于可执行文件、共享库和目标文件。</p>
</li>
<li><p>使用 readelf 命令可以查看和分析 ELF 文件的各种属性和部分内容，包括符号表、节表、段表、动态链接、重定位信息等。它提供了对 ELF 文件结构的详细解析和显示。</p>
</li>
<li><p>以下是一些常用的 readelf 命令示例：</p>
</li>
</ul>
<ol>
<li><p>查看 ELF 文件的头部信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -h executable</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看 ELF 文件的节表信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -S executable</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看 ELF 文件的符号表信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -s executable</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看 ELF 文件的动态链接信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -d executable</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看 ELF 文件的重定位信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -r executable</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="安装readelf"><a href="#安装readelf" class="headerlink" title="安装readelf"></a>安装readelf</h2><ul>
<li><p>readelf 是 binutils 软件包的一部分，它通常预装在大多数 Linux 发行版中。如果你无法使用 readelf 命令，你可以尝试安装 binutils 软件包，以确保 readelf 工具可用。</p>
</li>
<li><p>对于基于 Debian&#x2F;Ubuntu 的系统，可以使用以下命令安装 binutils：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install binutils</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于基于 Red Hat&#x2F;CentOS 的系统，可以使用以下命令安装 binutils：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install binutils</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装完成后，你就可以使用 readelf 命令来查看和分析 ELF 文件的信息了。请注意，安装软件包可能需要管理员权限，因此在安装时可能需要使用 sudo 或 root 用户身份运行命令。</p>
</li>
<li><p>如果你的系统已经安装了 binutils 软件包，但仍然无法使用 readelf 命令，可能是因为它不在系统的 PATH 环境变量中。在这种情况下，你可以尝试使用绝对路径来运行 readelf，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/readelf -h executable</span><br></pre></td></tr></table></figure></li>
</ul>
<p>根据你的系统配置和安装方式，实际的 readelf 路径可能会有所不同。你可以使用 <code>which readelf</code> 命令来查找正确的路径。</p>
<p>这些命令示例只是 readelf 命令的一小部分功能演示，readelf 还提供了其他选项和功能，可以根据需要进行查看和分析 ELF 文件的更多细节。使用 <code>readelf --help</code> 命令可以查看 readelf 的完整选项列表和用法说明。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_66_dmesg/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_66_dmesg/" class="post-title-link" itemprop="url">linux_2_66_dmesg</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>dmesg命令</li>
</ul>
<h2 id="linux-dmesg命令-详解"><a href="#linux-dmesg命令-详解" class="headerlink" title="linux dmesg命令 详解"></a>linux dmesg命令 详解</h2><p><code>dmesg</code> 命令用于显示 Linux 内核环缓冲区的信息，其中包含了内核启动和运行过程中的消息。这些消息通常包括硬件、驱动程序、系统错误等的信息。下面是 <code>dmesg</code> 命令的一些常用选项和用法：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><ol>
<li><p><strong>查看所有的内核消息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg</span><br></pre></td></tr></table></figure>
<p>这会显示内核环缓冲区中的所有消息，包括启动信息、硬件检测、驱动程序加载等。</p>
</li>
<li><p><strong>只显示最新的几条消息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | <span class="built_in">tail</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>tail</code> 命令可以只显示最新的几条消息，以便查看最近的系统活动。</p>
</li>
<li><p><strong>实时监视内核消息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg -w</span><br></pre></td></tr></table></figure>
<p>使用 <code>-w</code> 选项可以实时监视内核消息，新的消息会实时显示在终端上。</p>
</li>
</ol>
<h3 id="选项和过滤："><a href="#选项和过滤：" class="headerlink" title="选项和过滤："></a>选项和过滤：</h3><ol start="4">
<li><p><strong>过滤包含特定关键字的消息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep <span class="string">&quot;keyword&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 命令可以过滤只显示包含特定关键字的消息，方便查找特定信息。</p>
</li>
<li><p><strong>显示特定设备的消息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep <span class="string">&quot;sda&quot;</span></span><br></pre></td></tr></table></figure>
<p>可以使用 <code>grep</code> 过滤显示与特定设备相关的消息，例如硬盘 <code>sda</code>。</p>
</li>
<li><p><strong>显示特定级别的消息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg -l err</span><br></pre></td></tr></table></figure>
<p>使用 <code>-l</code> 选项可以指定消息的级别，例如 <code>err</code> 表示只显示错误级别的消息。可选的级别包括 <code>emerg</code>, <code>alert</code>, <code>crit</code>, <code>err</code>, <code>warn</code>, <code>notice</code>, <code>info</code>, 和 <code>debug</code>。</p>
</li>
<li><p><strong>显示时间戳：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg -T</span><br></pre></td></tr></table></figure>
<p>使用 <code>-T</code> 选项可以显示人类可读的时间戳，而不是默认的秒数。</p>
</li>
</ol>
<h3 id="更多选项："><a href="#更多选项：" class="headerlink" title="更多选项："></a>更多选项：</h3><ol start="8">
<li><p><strong>清除内核环缓冲区：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg -c</span><br></pre></td></tr></table></figure>
<p>使用 <code>-c</code> 选项可以清除内核环缓冲区，将其重置为空。</p>
</li>
<li><p><strong>将内核消息保存到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg &gt; dmesg.log</span><br></pre></td></tr></table></figure>
<p>将内核消息保存到文件中，以便后续查看或分析。</p>
</li>
<li><p><strong>查看内核消息的缓冲区大小：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg -s</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项可以查看当前内核消息缓冲区的大小。</p>
</li>
</ol>
<p><code>dmesg</code> 命令对于诊断系统问题、查看硬件信息以及了解系统启动和运行过程中的事件非常有用。根据具体的需求和问题，选择适当的选项和过滤方式，可以更方便地获取所需的信息。</p>
<h2 id="dmesg"><a href="#dmesg" class="headerlink" title="dmesg"></a>dmesg</h2><p><code>dmesg</code>是一个Linux命令，用于显示内核环缓冲区的内容。它可以提供有关系统启动期间发生的事件、硬件故障、驱动程序加载和其他内核消息的详细信息。</p>
<p>以下是<code>dmesg</code>命令的常用选项和用法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg [options]</span><br></pre></td></tr></table></figure>

<p>常用选项：</p>
<ul>
<li><code>-c, --clear</code>：清除内核环缓冲区的内容。</li>
<li><code>-s, --buffer-size=size</code>：设置内核环缓冲区的大小。</li>
<li><code>-n, --console-level=level</code>：设置在控制台上显示的内核消息的级别。</li>
<li><code>-r, --raw</code>：以原始格式显示内核消息，不进行解析。</li>
<li><code>-T, --ctime</code>：以人类可读的日期和时间格式显示内核消息的时间戳。</li>
<li><code>--color[=when]</code>：设置输出中的颜色。</li>
<li><code>-h, --help</code>：显示帮助信息。</li>
</ul>
<p>示例用法：</p>
<ol>
<li>显示内核环缓冲区的内容：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg</span><br></pre></td></tr></table></figure>

<p>上述命令将显示内核环缓冲区中的所有消息。</p>
<ol start="2">
<li>清除内核环缓冲区的内容：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg -c</span><br></pre></td></tr></table></figure>

<p>上述命令将清除内核环缓冲区的内容。</p>
<ol start="3">
<li>以人类可读的日期和时间格式显示内核消息：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg -T</span><br></pre></td></tr></table></figure>

<p>上述命令将以人类可读的日期和时间格式显示内核消息的时间戳。</p>
<ol start="4">
<li>设置内核消息的显示级别：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg -n 4</span><br></pre></td></tr></table></figure>

<p>上述命令将仅显示级别为4（警告级别）及以上的内核消息。</p>
<p><code>dmesg</code>命令还支持其他选项和用法，您可以通过<code>man dmesg</code>命令查看完整的帮助文档和更多示例。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_63_ln/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_63_ln/" class="post-title-link" itemprop="url">linux_2_63_ln</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>ln命令</li>
</ul>
<h2 id="linux-ln命令-详解"><a href="#linux-ln命令-详解" class="headerlink" title="linux ln命令 详解"></a>linux ln命令 详解</h2><p><code>ln</code> 命令用于在文件系统中创建链接。链接可以分为硬链接（hard link）和符号链接（symbolic link，也称为软链接）。硬链接是文件系统中同一索引节点（inode）上的多个文件名，它们共享相同的数据块。符号链接是一个指向另一个文件或目录的特殊文件，类似于 Windows 中的快捷方式。以下是关于 <code>ln</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> [选项] 源文件 目标文件</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><p><strong>-s, –symbolic：</strong> 创建符号链接。</p>
</li>
<li><p><strong>-b, –backup：</strong> 在覆盖目标文件之前创建备份。</p>
</li>
<li><p><strong>-i, –interactive：</strong> 在覆盖目标文件之前进行交互式确认。</p>
</li>
<li><p><strong>-v, –verbose：</strong> 显示详细的输出。</p>
</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>创建硬链接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> source_file hard_link</span><br></pre></td></tr></table></figure>
<p>这会在文件系统上创建一个硬链接。</p>
</li>
<li><p><strong>创建符号链接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s source_file symbolic_link</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项，创建一个符号链接。</p>
</li>
<li><p><strong>创建符号链接到目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /path/to/directory symbolic_link_to_directory</span><br></pre></td></tr></table></figure>
<p>创建符号链接指向目录。</p>
</li>
<li><p><strong>创建备份并覆盖目标文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -b source_file target_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-b</code> 选项，创建备份并覆盖目标文件。</p>
</li>
<li><p><strong>交互式创建链接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -i source_file target_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-i</code> 选项，进行交互式确认。</p>
</li>
<li><p><strong>递归创建符号链接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -sT /path/to/source_directory /path/to/symbolic_link_directory</span><br></pre></td></tr></table></figure>
<p>使用 <code>-sT</code> 选项，递归创建符号链接。</p>
</li>
</ol>
<h3 id="示例解释："><a href="#示例解释：" class="headerlink" title="示例解释："></a>示例解释：</h3><ul>
<li><p><strong>硬链接和符号链接：</strong> <code>ln</code> 命令可以创建硬链接或符号链接。硬链接是文件系统中同一索引节点上的多个文件名，它们共享相同的数据块。符号链接是一个特殊类型的文件，指向另一个文件或目录。</p>
</li>
<li><p><strong>创建符号链接到目录：</strong> 通过 <code>-s</code> 选项，可以创建符号链接指向目录。</p>
</li>
<li><p><strong>创建备份并覆盖目标文件：</strong> 使用 <code>-b</code> 选项，<code>ln</code> 在覆盖目标文件之前会创建一个备份。</p>
</li>
<li><p><strong>交互式创建链接：</strong> 使用 <code>-i</code> 选项，<code>ln</code> 在覆盖目标文件之前会进行交互式确认，避免误操作。</p>
</li>
<li><p><strong>递归创建符号链接：</strong> 使用 <code>-sT</code> 选项，可以递归创建符号链接，通常在创建指向目录的链接时使用。</p>
</li>
</ul>
<h2 id="linux-ln命令-常用技巧"><a href="#linux-ln命令-常用技巧" class="headerlink" title="linux ln命令 常用技巧"></a>linux ln命令 常用技巧</h2><p><code>ln</code> 命令是在 Linux 中创建链接的强大工具，下面是一些 <code>ln</code> 命令的常用技巧：</p>
<ol>
<li><p><strong>创建硬链接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> source_file hard_link</span><br></pre></td></tr></table></figure>
<p>这会在文件系统上创建一个硬链接，硬链接与源文件共享相同的 inode 和数据块。</p>
</li>
<li><p><strong>创建符号链接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s source_file symbolic_link</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项创建符号链接，这是指向源文件的特殊文件。</p>
</li>
<li><p><strong>创建符号链接到目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /path/to/directory symbolic_link_to_directory</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项，创建符号链接指向目录。</p>
</li>
<li><p><strong>创建链接时避免覆盖目标文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -b source_file target_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-b</code> 选项，在覆盖目标文件之前会创建备份。</p>
</li>
<li><p><strong>递归创建符号链接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -sT /path/to/source_directory /path/to/symbolic_link_directory</span><br></pre></td></tr></table></figure>
<p>使用 <code>-sT</code> 选项，递归创建符号链接，通常在创建指向目录的链接时使用。</p>
</li>
<li><p><strong>创建链接时进行交互式确认：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -i source_file target_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-i</code> 选项，创建链接时进行交互式确认，以避免误操作。</p>
</li>
<li><p><strong>使用相对路径创建符号链接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -sT ../source_file /path/to/symbolic_link</span><br></pre></td></tr></table></figure>
<p>使用 <code>-sT</code> 选项和相对路径，可以创建指向父目录中文件的符号链接。</p>
</li>
<li><p><strong>创建硬链接的数量统计：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f -links +1 -<span class="built_in">exec</span> <span class="built_in">ls</span> -l &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>find</code> 命令和 <code>-links</code> 选项，可以列出硬链接数量大于1的文件。</p>
</li>
<li><p><strong>创建硬链接并保留原始文件的权限和时间戳：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -p source_file hard_link</span><br></pre></td></tr></table></figure>
<p>使用 <code>cp</code> 命令的 <code>-p</code> 选项，创建硬链接并保留原始文件的权限和时间戳。</p>
</li>
</ol>
<p>这些技巧能够帮助你更灵活地使用 <code>ln</code> 命令，创建不同类型的链接，并在需要时进行一些额外的操作。</p>
<h2 id="ln"><a href="#ln" class="headerlink" title="ln"></a>ln</h2><ul>
<li><p>简介：</p>
<ul>
<li>它的功能是为某一个文件在另外一个位置建立一个同步的链接</li>
<li>当我们需要在不同的目录，用到相同的文件时，我们不需要在每一个需要的目录下都放一个必须相同的文件，我们只要在某个固定的目录，放上该文件，然后在 其它的目录下用ln命令链接（link）它就可以，不必重复的占用磁盘空间。</li>
</ul>
</li>
<li><p>语法：</p>
<ul>
<li><code>ln [参数][源文件或目录][目标文件或目录]</code></li>
</ul>
</li>
<li><p>参数的格式为：</p>
<ul>
<li><code>[-bdfinsvF] [-S backup-suffix] [-V &#123;numbered,existing,simple&#125;]</code></li>
<li><code>[--help] [--version] [--]</code></li>
</ul>
</li>
<li><p>详解：</p>
<ul>
<li>Linux文件系统中，有所谓的链接(link)，我们可以将其视为档案的别名，而链接又可分为两种 : 硬链接(hard link)与软链接(symbolic link)，硬链接的意思是一个档案可以有多个名称，而软链接的方式则是产生一个特殊的档案，该档案的内容是指向另一个档案的位置。硬链接是存在同一个文件系统中，而软链接却可以跨越不同的文件系统。</li>
<li>不论是硬链接或软链接都不会将原本的档案复制一份，只会占用非常少量的磁碟空间</li>
<li>软链接：<ul>
<li>软链接，以路径的形式存在。类似于Windows操作系统中的快捷方式</li>
<li>软链接可以 跨文件系统 ，硬链接不可以</li>
<li>软链接可以对一个不存在的文件名进行链接</li>
<li>软链接可以对目录进行链接</li>
</ul>
</li>
<li>硬链接<ul>
<li>硬链接，以文件副本的形式存在。但不占用实际空间。</li>
<li>不允许给目录创建硬链接</li>
<li>硬链接只有在同一个文件系统中才能创建</li>
</ul>
</li>
</ul>
</li>
<li><p>参数</p>
<ul>
<li>必要参数<ul>
<li><code>--backup[=CONTROL]</code> 备份已存在的目标文件</li>
<li><code>-b</code> 类似 –backup ，但不接受参数</li>
<li><code>-d</code> 允许超级用户制作目录的硬链接</li>
<li><code>-f</code> 强制执行</li>
<li><code>-i</code> 交互模式，文件存在则提示用户是否覆盖</li>
<li><code>-n</code> 把符号链接视为一般目录</li>
<li><code>-s</code> 软链接(符号链接)</li>
<li><code>-v</code> 显示详细的处理过程</li>
</ul>
</li>
<li>选择参数<ul>
<li><code>-S &quot;-S&lt;字尾备份字符串&gt; &quot;</code>或 <code>&quot;--suffix=&lt;字尾备份字符串&gt;&quot;</code></li>
<li><code>-V &quot;-V&lt;备份方式&gt;&quot;</code>或<code>&quot;--version-control=&lt;备份方式&gt;&quot;</code></li>
<li><code>--help</code> 显示帮助信息</li>
<li><code>--version</code> 显示版本信息</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_64_snap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_64_snap/" class="post-title-link" itemprop="url">linux_2_64_snap</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>linux snap命令 详解</li>
</ul>
<h2 id="linux-snap命令-详解"><a href="#linux-snap命令-详解" class="headerlink" title="linux snap命令 详解"></a>linux snap命令 详解</h2><p>Snap是一种在Linux系统中用于安装、管理和运行应用程序的包管理系统。Snap包是一种打包了应用程序及其依赖项的独立软件包，具有自包含性和可移植性。Snap包可以在不同的Linux发行版上运行，而无需担心依赖关系和兼容性问题。以下是一些常用的Snap命令及其详解：</p>
<ol>
<li><p><strong>安装Snap：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install snapd</span><br></pre></td></tr></table></figure>
<p>该命令用于安装Snap运行时环境。</p>
</li>
<li><p><strong>查找Snap包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap find &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>用于查找Snap Store中特定应用程序的Snap包。</p>
</li>
<li><p><strong>安装Snap包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap install &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>用于安装指定的Snap包。</p>
</li>
<li><p><strong>卸载Snap包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap remove &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>用于卸载已安装的Snap包。</p>
</li>
<li><p><strong>列出所有已安装的Snap包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap list</span><br></pre></td></tr></table></figure>
<p>该命令列出系统中所有已安装的Snap包。</p>
</li>
<li><p><strong>更新所有已安装的Snap包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap refresh</span><br></pre></td></tr></table></figure>
<p>用于更新系统中所有已安装的Snap包。</p>
</li>
<li><p><strong>更新特定Snap包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap refresh &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>用于更新指定的Snap包。</p>
</li>
<li><p><strong>显示Snap包的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap info &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>用于显示特定Snap包的详细信息，包括版本、发布者等。</p>
</li>
<li><p><strong>启动Snap应用程序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap run &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>用于启动已安装的Snap应用程序。</p>
</li>
<li><p><strong>查看Snap应用程序的日志：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap logs &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>用于查看Snap应用程序的运行日志。</p>
</li>
<li><p><strong>管理Snap用户权限：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap connections &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>用于显示Snap应用程序的接口连接信息，包括已授予和已拒绝的权限。</p>
</li>
</ol>
<p>这些命令涵盖了常见的Snap操作，让你能够轻松安装、更新和管理Snap应用程序。注意，一些命令可能需要使用<code>sudo</code>来获取管理员权限。</p>
<h2 id="linux-snap命令-常用技巧"><a href="#linux-snap命令-常用技巧" class="headerlink" title="linux snap命令 常用技巧"></a>linux snap命令 常用技巧</h2><p>除了基本的Snap命令之外，以下是一些在使用Snap时常用的技巧：</p>
<ol>
<li><p><strong>查看系统中已安装的Snap包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap list</span><br></pre></td></tr></table></figure>
<p>使用这个命令可以快速查看系统中已安装的所有Snap包，以及它们的版本和发布者。</p>
</li>
<li><p><strong>搜索Snap Store中的应用程序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap find &lt;search-term&gt;</span><br></pre></td></tr></table></figure>
<p>使用此命令可以在Snap Store中搜索应用程序。替换<code>&lt;search-term&gt;</code>为你要查找的应用程序名称或关键字。</p>
</li>
<li><p><strong>禁用自动更新：</strong><br>默认情况下，Snap包会定期自动更新。如果你想禁用自动更新，可以使用如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap <span class="built_in">set</span> core refresh.schedule=&lt;<span class="keyword">time</span>&gt;</span><br></pre></td></tr></table></figure>
<p>将<code>&lt;time&gt;</code>替换为一个未来的时间，例如”23:00”，表示在每天晚上11点进行更新检查。</p>
</li>
<li><p><strong>强制更新所有Snap包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap refresh --beta --devmode --edge &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>使用此命令可以强制更新指定Snap包到其最新的beta、devmode或edge版本。</p>
</li>
<li><p><strong>回滚Snap包版本：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap revert &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>如果更新后出现问题，你可以使用此命令回滚Snap包到之前的版本。</p>
</li>
<li><p><strong>设置Snap代理：</strong><br>如果你需要通过代理连接Snap Store，可以设置代理：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap <span class="built_in">set</span> system proxy.http=<span class="string">&quot;http://your-proxy-server:port&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> snap <span class="built_in">set</span> system proxy.https=<span class="string">&quot;http://your-proxy-server:port&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>手动下载Snap包：</strong><br>如果你想手动下载Snap包而不是使用<code>sudo snap install</code>，可以使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap download &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>清理不再使用的Snap数据：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> snap refresh --list</span><br><span class="line"><span class="built_in">sudo</span> snap refresh --clean</span><br></pre></td></tr></table></figure>
<p>查看可用更新并清理不再需要的旧版本数据。</p>
</li>
<li><p><strong>查看Snap应用程序的接口连接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap interfaces &lt;package-name&gt;</span><br></pre></td></tr></table></figure>
<p>查看Snap应用程序与系统接口的连接情况，以了解其权限和访问级别。</p>
</li>
</ol>
<p>这些技巧可以帮助你更有效地使用Snap包管理系统，以及解决一些常见的使用场景和问题。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_65_iostat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_65_iostat/" class="post-title-link" itemprop="url">linux_2_65_iostat</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>iostat命令</li>
</ul>
<h2 id="linux-iostat命令-详解"><a href="#linux-iostat命令-详解" class="headerlink" title="linux iostat命令 详解"></a>linux iostat命令 详解</h2><p><code>iostat</code> 是一个用于监控系统输入&#x2F;输出设备和CPU利用率的 Linux 命令。它提供了关于系统性能的实时和平均数据。<code>iostat</code> 是 <code>sysstat</code> 工具包的一部分，因此在使用之前，你可能需要安装这个工具包。</p>
<h3 id="安装-sysstat-工具包："><a href="#安装-sysstat-工具包：" class="headerlink" title="安装 sysstat 工具包："></a>安装 sysstat 工具包：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install sysstat   <span class="comment"># For Debian/Ubuntu</span></span><br><span class="line"><span class="built_in">sudo</span> yum install sysstat       <span class="comment"># For Red Hat/CentOS</span></span><br></pre></td></tr></table></figure>

<h3 id="iostat-基本用法："><a href="#iostat-基本用法：" class="headerlink" title="iostat 基本用法："></a>iostat 基本用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat [options] [interval [count]]</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>options：</strong> 可选参数，包括：</p>
<ul>
<li><code>-c</code>：显示 CPU 使用情况。</li>
<li><code>-d</code>：显示磁盘使用情况。</li>
<li><code>-k</code>：以 KB&#x2F;s 显示数据传输速率。</li>
<li><code>-m</code>：以 MB&#x2F;s 显示数据传输速率。</li>
<li><code>-t</code>：显示时间戳。</li>
</ul>
</li>
<li><p><strong>interval：</strong> 两次输出之间的时间间隔（秒）。</p>
</li>
<li><p><strong>count：</strong> 输出次数。</p>
</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>查看 CPU 使用情况：</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -c 2 5</span><br></pre></td></tr></table></figure>

<p> 这将每隔 2 秒输出一次 CPU 使用情况，共输出 5 次。</p>
</li>
<li><p><strong>查看磁盘使用情况：</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -d 2 5</span><br></pre></td></tr></table></figure>

<p> 这将每隔 2 秒输出一次磁盘使用情况，共输出 5 次。</p>
</li>
<li><p><strong>以 KB&#x2F;s 显示磁盘传输速率：</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -d -k 2 5</span><br></pre></td></tr></table></figure>

<p> 这将每隔 2 秒以 KB&#x2F;s 显示磁盘传输速率，共输出 5 次。</p>
</li>
<li><p><strong>显示时间戳：</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -t 2 5</span><br></pre></td></tr></table></figure>

<p> 这将每隔 2 秒输出一次带有时间戳的系统统计信息，共输出 5 次。</p>
</li>
</ol>
<h3 id="输出解释："><a href="#输出解释：" class="headerlink" title="输出解释："></a>输出解释：</h3><ul>
<li><p><strong>CPU 部分：</strong></p>
<ul>
<li><code>%user</code>：用户态 CPU 占用百分比。</li>
<li><code>%nice</code>：优先级较高的用户态 CPU 占用百分比。</li>
<li><code>%system</code>：内核态 CPU 占用百分比。</li>
<li><code>%iowait</code>：等待磁盘 I&#x2F;O 的 CPU 占用百分比。</li>
<li><code>%steal</code>：被虚拟机监视程序（VM hypervisor）偷取的 CPU 占用百分比。</li>
<li><code>%idle</code>：空闲 CPU 占用百分比。</li>
</ul>
</li>
<li><p><strong>磁盘部分：</strong></p>
<ul>
<li><code>tps</code>：每秒钟传输的块设备 I&#x2F;O 事务数。</li>
<li><code>Blk_read/s</code>：每秒读取的块数据量（KB&#x2F;s）。</li>
<li><code>Blk_wrtn/s</code>：每秒写入的块数据量（KB&#x2F;s）。</li>
<li><code>Blk_read</code>：总的读取块数。</li>
<li><code>Blk_wrtn</code>：总的写入块数。</li>
</ul>
</li>
</ul>
<p><code>iostat</code> 提供了对系统性能的快速概览，可以用于监测系统的负载、磁盘 I&#x2F;O 和 CPU 使用情况。</p>
<h2 id="linux-iostat命令-常用技巧"><a href="#linux-iostat命令-常用技巧" class="headerlink" title="linux iostat命令 常用技巧"></a>linux iostat命令 常用技巧</h2><p>在使用 <code>iostat</code> 命令时，以下是一些常用的技巧和选项，以更有效地监测系统的 I&#x2F;O 性能：</p>
<ol>
<li><p><strong>监测特定磁盘的 I&#x2F;O：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -d &lt;disk_name&gt; 2 5</span><br></pre></td></tr></table></figure>
<p>将 <code>&lt;disk_name&gt;</code> 替换为要监测的磁盘的名称，这样可以针对特定磁盘进行 I&#x2F;O 监测。</p>
</li>
<li><p><strong>以 MB&#x2F;s 显示数据传输速率：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -d -m 2 5</span><br></pre></td></tr></table></figure>
<p>使用 <code>-m</code> 选项以 MB&#x2F;s 显示磁盘传输速率，这对于更容易理解大量数据的流动速率很有帮助。</p>
</li>
<li><p><strong>仅显示 CPU 信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -c 2 5</span><br></pre></td></tr></table></figure>
<p>使用 <code>-c</code> 选项仅显示 CPU 相关的信息，有助于监测 CPU 利用率。</p>
</li>
<li><p><strong>显示所有设备的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -x 2 5</span><br></pre></td></tr></table></figure>
<p>使用 <code>-x</code> 选项显示详细信息，包括每个设备的更多统计数据，如每个设备的平均负载、I&#x2F;O 请求的等待时间等。</p>
</li>
<li><p><strong>指定输出字段顺序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -d -m -k 2 5 -p sda sdb</span><br></pre></td></tr></table></figure>
<p>使用 <code>-p</code> 选项可以指定要显示的磁盘设备，这对于只关注特定设备很有帮助。</p>
</li>
<li><p><strong>实时监测 I&#x2F;O 活动：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -xtc 2</span><br></pre></td></tr></table></figure>
<p>使用 <code>-t</code> 选项以及 <code>-c</code> 和 <code>-x</code> 选项，可以实时监测 I&#x2F;O 活动、CPU 使用率和扩展信息。</p>
</li>
<li><p><strong>自定义输出字段：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -d -m -k -N -o JSON 2 5</span><br></pre></td></tr></table></figure>
<p>使用 <code>-o</code> 选项以 JSON 格式输出信息，可以更容易地集成到脚本或其他工具中进行后续处理。</p>
</li>
<li><p><strong>查看磁盘队列长度：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -x 2 5 | grep avgqu-sz</span><br></pre></td></tr></table></figure>
<p>使用 <code>-x</code> 选项查看平均磁盘队列长度 (<code>avgqu-sz</code>)，这是一个指标，用于评估磁盘 I&#x2F;O 请求的排队情况。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>iostat</code> 命令，以满足你的具体需求并更好地监测系统的 I&#x2F;O 性能。</p>
<h2 id="iostat"><a href="#iostat" class="headerlink" title="iostat"></a>iostat</h2><p><code>iostat</code>是一个Linux命令，用于报告和存档系统磁盘IO活动的统计信息。它可以提供有关磁盘读写速度、IO等待时间、IO请求队列长度以及CPU利用率的信息。</p>
<p>以下是<code>iostat</code>命令的常用选项和用法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat [options] [interval] [count]</span><br></pre></td></tr></table></figure>

<p>常用选项：</p>
<ul>
<li><code>-c</code>：仅显示CPU利用率统计。</li>
<li><code>-d</code>：仅显示磁盘IO统计。</li>
<li><code>-k</code>：以KB为单位显示统计信息。</li>
<li><code>-m</code>：以MB为单位显示统计信息。</li>
<li><code>-x</code>：显示详细的磁盘IO统计，包括每个设备的读写速度、IO等待时间、IO请求队列长度等。</li>
<li><code>-t</code>：在每一行的输出中显示时间戳。</li>
<li><code>-y</code>：在每一行的输出中显示日期和时间。</li>
<li><code>-h</code>：显示帮助信息。</li>
</ul>
<p>示例用法：</p>
<ol>
<li>显示磁盘IO统计信息：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat</span><br></pre></td></tr></table></figure>

<p>上述命令将显示所有磁盘设备的读写速度、IO等待时间和IO请求队列长度。</p>
<ol start="2">
<li>以1秒的间隔连续显示磁盘IO统计信息，共显示5次：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat 1 5</span><br></pre></td></tr></table></figure>

<p>上述命令将每秒显示一次磁盘IO统计信息，连续显示5次。</p>
<ol start="3">
<li>仅显示CPU利用率统计信息：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -c</span><br></pre></td></tr></table></figure>

<p>上述命令将仅显示CPU的利用率统计信息。</p>
<ol start="4">
<li>显示详细的磁盘IO统计信息：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -x</span><br></pre></td></tr></table></figure>

<p>上述命令将显示详细的磁盘IO统计信息，包括每个设备的读写速度、IO等待时间、IO请求队列长度等。</p>
<p><code>iostat</code>命令还支持其他选项和用法，您可以通过<code>man iostat</code>命令查看完整的帮助文档和更多示例。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_68_ps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_68_ps/" class="post-title-link" itemprop="url">linux_2_68_ps</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>ps命令</li>
</ul>
<h2 id="linux-ps命令-详解"><a href="#linux-ps命令-详解" class="headerlink" title="linux ps命令 详解"></a>linux ps命令 详解</h2><p><code>ps</code> 命令用于显示系统中当前运行的进程信息。它提供了关于进程的详细信息，包括进程ID（PID）、CPU利用率、内存占用等。以下是一些常用的 <code>ps</code> 命令选项和用法：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><ol>
<li><p><strong>显示当前用户的所有进程：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps</span><br></pre></td></tr></table></figure>
<p>这将显示当前用户的所有进程的基本信息。</p>
</li>
<li><p><strong>显示所有用户的所有进程：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux</span><br></pre></td></tr></table></figure>
<p>使用 <code>aux</code> 选项可以显示所有用户的所有进程，包括系统进程。</p>
</li>
</ol>
<h3 id="选项和过滤："><a href="#选项和过滤：" class="headerlink" title="选项和过滤："></a>选项和过滤：</h3><ol start="3">
<li><p><strong>显示详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef</span><br></pre></td></tr></table></figure>
<p>使用 <code>-ef</code> 选项可以显示更详细的信息，包括进程的父进程ID、启动时间等。</p>
</li>
<li><p><strong>以树状结构显示进程：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps auxf</span><br></pre></td></tr></table></figure>
<p>使用 <code>auxf</code> 选项以树状结构显示进程，显示进程之间的父子关系。</p>
</li>
<li><p><strong>按内存使用排序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux --<span class="built_in">sort</span>=-%mem</span><br></pre></td></tr></table></figure>
<p>使用 <code>--sort=-%mem</code> 选项可以按内存使用的百分比降序排序显示进程。</p>
</li>
<li><p><strong>显示进程的线程信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eLf</span><br></pre></td></tr></table></figure>
<p>使用 <code>-L</code> 选项可以显示进程的线程信息。</p>
</li>
<li><p><strong>显示特定用户的进程：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -u username</span><br></pre></td></tr></table></figure>
<p>使用 <code>-u</code> 选项可以显示特定用户的进程。</p>
</li>
<li><p><strong>按进程名过滤显示：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -C process_name</span><br></pre></td></tr></table></figure>
<p>使用 <code>-C</code> 选项可以按进程名过滤显示。</p>
</li>
</ol>
<h3 id="更多选项："><a href="#更多选项：" class="headerlink" title="更多选项："></a>更多选项：</h3><ol start="9">
<li><p><strong>显示进程树：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree</span><br></pre></td></tr></table></figure>
<p>使用 <code>pstree</code> 命令可以以树状结构显示进程树。</p>
</li>
<li><p><strong>以用户格式显示进程：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eo user,pid,%cpu,%mem,cmd</span><br></pre></td></tr></table></figure>
<p>使用 <code>-eo</code> 选项可以以用户定义的格式显示进程信息，这里列出了用户、进程ID、CPU利用率、内存占用和命令。</p>
</li>
<li><p><strong>查看进程的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -p pid -o pid,ppid,uid,gid,cmd</span><br></pre></td></tr></table></figure>
<p>使用 <code>-p</code> 选项指定进程ID，并使用 <code>-o</code> 选项指定要显示的信息。</p>
</li>
</ol>
<p><code>ps</code> 命令提供了广泛的选项，使得你可以根据不同的需求查看和分析进程信息。根据实际情况选择合适的选项，可以更好地了解系统中运行的进程。</p>
<h2 id="linux-ps命令-常用技巧"><a href="#linux-ps命令-常用技巧" class="headerlink" title="linux ps命令 常用技巧"></a>linux ps命令 常用技巧</h2><p>以下是一些在使用 <code>ps</code> 命令时常用的技巧和选项，可以更灵活地查看和管理进程信息：</p>
<h3 id="1-查看指定用户的进程："><a href="#1-查看指定用户的进程：" class="headerlink" title="1. 查看指定用户的进程："></a>1. <strong>查看指定用户的进程：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -u username</span><br></pre></td></tr></table></figure>
<p>使用 <code>-u</code> 选项可以显示特定用户的进程。将 <code>username</code> 替换为要查看的用户名。</p>
<h3 id="2-按进程名过滤显示："><a href="#2-按进程名过滤显示：" class="headerlink" title="2. 按进程名过滤显示："></a>2. <strong>按进程名过滤显示：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -C process_name</span><br></pre></td></tr></table></figure>
<p>使用 <code>-C</code> 选项可以按进程名过滤显示，只显示指定进程名的进程。</p>
<h3 id="3-显示所有进程树："><a href="#3-显示所有进程树：" class="headerlink" title="3. 显示所有进程树："></a>3. <strong>显示所有进程树：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree</span><br></pre></td></tr></table></figure>
<p>使用 <code>pstree</code> 命令以树状结构显示所有进程的父子关系。</p>
<h3 id="4-按-CPU-利用率排序显示进程："><a href="#4-按-CPU-利用率排序显示进程：" class="headerlink" title="4. 按 CPU 利用率排序显示进程："></a>4. <strong>按 CPU 利用率排序显示进程：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux --<span class="built_in">sort</span>=-%cpu</span><br></pre></td></tr></table></figure>
<p>使用 <code>--sort=-%cpu</code> 选项可以按 CPU 利用率降序排序显示进程。</p>
<h3 id="5-以用户定义格式显示进程信息："><a href="#5-以用户定义格式显示进程信息：" class="headerlink" title="5. 以用户定义格式显示进程信息："></a>5. <strong>以用户定义格式显示进程信息：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eo user,pid,%cpu,%mem,cmd</span><br></pre></td></tr></table></figure>
<p>使用 <code>-eo</code> 选项以用户定义的格式显示进程信息，列出了用户、进程ID、CPU利用率、内存占用和命令。</p>
<h3 id="6-显示线程信息："><a href="#6-显示线程信息：" class="headerlink" title="6. 显示线程信息："></a>6. <strong>显示线程信息：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eLf</span><br></pre></td></tr></table></figure>
<p>使用 <code>-L</code> 选项显示进程的线程信息。</p>
<h3 id="7-显示所有进程的详细信息："><a href="#7-显示所有进程的详细信息：" class="headerlink" title="7. 显示所有进程的详细信息："></a>7. <strong>显示所有进程的详细信息：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef</span><br></pre></td></tr></table></figure>
<p>使用 <code>-ef</code> 选项显示所有进程的详细信息，包括进程的父进程ID、启动时间等。</p>
<h3 id="8-显示所有进程的详细信息（BSD格式）："><a href="#8-显示所有进程的详细信息（BSD格式）：" class="headerlink" title="8. 显示所有进程的详细信息（BSD格式）："></a>8. <strong>显示所有进程的详细信息（BSD格式）：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux</span><br></pre></td></tr></table></figure>
<p>使用 <code>aux</code> 选项以 BSD 格式显示所有进程的详细信息。</p>
<h3 id="9-显示进程的线程数："><a href="#9-显示进程的线程数：" class="headerlink" title="9. 显示进程的线程数："></a>9. <strong>显示进程的线程数：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eT</span><br></pre></td></tr></table></figure>
<p>使用 <code>-T</code> 选项显示进程的线程数。</p>
<h3 id="10-显示所有进程的信息（包括僵尸进程）："><a href="#10-显示所有进程的信息（包括僵尸进程）：" class="headerlink" title="10. 显示所有进程的信息（包括僵尸进程）："></a>10. <strong>显示所有进程的信息（包括僵尸进程）：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -e</span><br></pre></td></tr></table></figure>
<p>使用 <code>-e</code> 选项显示所有进程的信息，包括僵尸进程。</p>
<h3 id="11-显示进程的状态信息："><a href="#11-显示进程的状态信息：" class="headerlink" title="11. 显示进程的状态信息："></a>11. <strong>显示进程的状态信息：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -o pid,state,cmd</span><br></pre></td></tr></table></figure>
<p>使用 <code>-o</code> 选项显示进程的状态信息，包括进程ID、状态和命令。</p>
<h3 id="12-显示所有进程的内存占用情况："><a href="#12-显示所有进程的内存占用情况：" class="headerlink" title="12. 显示所有进程的内存占用情况："></a>12. <strong>显示所有进程的内存占用情况：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux --<span class="built_in">sort</span>=-%mem</span><br></pre></td></tr></table></figure>
<p>使用 <code>--sort=-%mem</code> 选项按内存占用降序排序显示所有进程的信息。</p>
<p>这些技巧和选项可以帮助你更灵活地使用 <code>ps</code> 命令，根据具体的需求查看和管理进程信息。根据情况选择合适的选项，可以更方便地进行系统监控和故障排查。</p>
<h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><ul>
<li>ps命令用于报告当前系统的进程状态，可以搭配kill指令随时中断，删除不必要的程序。</li>
<li>ps明星是最基本的同时也是非常强大的进程查看命令，使用该命令可以确定有哪些进程正在运行和运行的状态，进程是否结束，进程有没有僵死，哪些进程占用了过多的资源等等</li>
<li>参数<ul>
<li><code>a</code> : 显示当前终端下的所有进程信息，包括其他用户的进程</li>
<li><code>u</code> : 使用以用户为主的格式输出进程信息</li>
<li><code>x</code> : 显示当前用户在所有终端下的进程</li>
</ul>
</li>
<li>字段解释<ul>
<li><code>USER</code> : 启动该进程的用户账号名称</li>
<li><code>PID</code>  : 该进程的ID号,在当前系统中是唯一的</li>
<li><code>%CPU</code> : CPU占用的百分比</li>
<li><code>%MEM</code> : 内存占用的百分比</li>
<li><code>VSZ</code>  : 占用虚拟内存(swap空间)的大小</li>
<li><code>RSS</code>  : 占用常驻内存(物理内存)的大小</li>
<li><code>TTY</code>  : 该进程在哪个终端上运行. <code>&quot;?&quot;</code>表示未知或不需要终端</li>
<li><code>STAT</code> : 显示了进程当前的状态<ul>
<li><code>S , interruptible sleep (waiting for an event to complete</code> : 休眠</li>
<li><code>R , running or runnable (on run queue)</code> : 运行</li>
<li><code>Z , defunct(&quot;zombie&quot;) process, terminated but not reaped by its parent</code> : 僵死, 对于僵死状态的进程应该手动终止</li>
<li><code>&lt; , high-priority (not nice to other users)</code> : 高优先级</li>
<li><code>N , low-priority (nice to other users)</code> : 低优先级</li>
<li><code>s , is a session leader</code> : 父进程</li>
<li><code>+ , is in the foreground process group</code> : 前台进程</li>
<li><code>l , is multi-threaded(using CLONE_THREAD, like NPTL pthreads do)</code>:多线程</li>
</ul>
</li>
<li><code>START</code>: 启动该进程的时间</li>
<li><code>TIME</code> : 该进程占用CPU的时间</li>
<li><code>COMMAND</code>: 启动该进程的命令的名称</li>
</ul>
</li>
<li>参数<ul>
<li><code>e</code> : 显示系统内的所有进程信息</li>
<li><code>l</code> : 使用长(long)格式显示进程信息</li>
<li><code>f</code> : 使用完整的(full)格式显示进程信息</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/27/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><span class="page-number current">28</span><a class="page-number" href="/page/29/">29</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/">34</a><a class="extend next" rel="next" href="/page/29/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">zhang junyi</p>
  <div class="site-description" itemprop="description">工作学习笔记</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">672</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">98</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/junyiha" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;junyiha" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://x.com/zhangjunyiha" title="Twitter → https:&#x2F;&#x2F;x.com&#x2F;zhangjunyiha" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhang junyi</span>
</div>

<!--
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
