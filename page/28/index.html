<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"junyiha.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="工作学习笔记">
<meta property="og:type" content="website">
<meta property="og:title" content="junyi&#39;s blog">
<meta property="og:url" content="https://junyiha.github.io/page/28/index.html">
<meta property="og:site_name" content="junyi&#39;s blog">
<meta property="og:description" content="工作学习笔记">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="zhang junyi">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://junyiha.github.io/page/28/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>junyi's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">junyi's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">hahahahaha</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_34_export/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_34_export/" class="post-title-link" itemprop="url">linux_2_34_export</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>export命令</li>
</ul>
<h2 id="linux-export命令-详解"><a href="#linux-export命令-详解" class="headerlink" title="linux export命令 详解"></a>linux export命令 详解</h2><p><code>export</code>命令用于将变量设置为环境变量，使其在当前Shell及其子进程中可见。环境变量是一种全局变量，对于所有运行在当前Shell下的命令都是可见的。以下是<code>export</code>命令的基本语法和一些示例：</p>
<h3 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> VARIABLE=value</span><br></pre></td></tr></table></figure>

<p>其中，<code>VARIABLE</code>是环境变量的名称，<code>value</code>是变量的值。</p>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>设置单个环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> MY_VARIABLE=<span class="string">&quot;Hello, World!&quot;</span></span><br></pre></td></tr></table></figure>
<p>这将创建一个名为<code>MY_VARIABLE</code>的环境变量，其值为”Hello, World!”。</p>
</li>
<li><p><strong>设置多个环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> VAR1=<span class="string">&quot;Value1&quot;</span> VAR2=<span class="string">&quot;Value2&quot;</span></span><br></pre></td></tr></table></figure>
<p>通过在一行上设置多个变量，可以一次性导出多个环境变量。</p>
</li>
<li><p><strong>在变量中包含空格：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GREETING=<span class="string">&quot;Hello, World!&quot;</span></span><br></pre></td></tr></table></figure>
<p>如果变量的值包含空格或特殊字符，可以使用引号将其括起来。</p>
</li>
<li><p><strong>查看当前的环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span></span><br></pre></td></tr></table></figure>
<p>不带任何参数，可以查看当前所有的环境变量。</p>
</li>
<li><p><strong>在一行中执行命令并设置环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MY_VARIABLE=<span class="string">&quot;Hello&quot;</span> <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>在执行命令前设置环境变量，仅对该命令生效。</p>
</li>
</ol>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li><p><strong>环境变量生命周期：</strong> 使用<code>export</code>设置的环境变量在当前Shell及其所有子进程中可见。当当前Shell关闭时，这些环境变量也将失效。</p>
</li>
<li><p><strong>查看特定环境变量：</strong> 若要查看特定环境变量的值，可以使用<code>echo</code>命令或<code>env</code>命令。例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$MY_VARIABLE</span></span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">env</span> | grep MY_VARIABLE</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>永久设置环境变量：</strong> 若要使环境变量在系统重启后仍然有效，可以将<code>export</code>语句添加到用户的配置文件（如<code>~/.bashrc</code>或<code>~/.bash_profile</code>）中。</p>
</li>
<li><p><strong>无需<code>export</code>的本地变量：</strong> 如果变量只在当前Shell中使用，而不需要在子进程中可见，可以不使用<code>export</code>，直接设置变量即可。</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MY_LOCAL_VARIABLE=<span class="string">&quot;Local Value&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>export</code>命令是在Shell脚本和交互式Shell中管理环境变量的重要工具，它允许你创建、修改和删除环境变量，以满足特定的需求。</p>
<h2 id="linux-export命令-常用技巧"><a href="#linux-export命令-常用技巧" class="headerlink" title="linux export命令 常用技巧"></a>linux export命令 常用技巧</h2><p>在使用<code>export</code>命令时，有一些常用的技巧和选项，可以帮助你更灵活地处理环境变量。以下是一些常见的<code>export</code>命令技巧：</p>
<ol>
<li><p><strong>在一行中执行命令并设置环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MY_VARIABLE=<span class="string">&quot;Hello&quot;</span> <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>在执行命令前设置环境变量，仅对该命令生效。</p>
</li>
<li><p><strong>在一行中定义并导出环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> MY_VARIABLE=<span class="string">&quot;Hello&quot;</span> &amp;&amp; <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>使用<code>&amp;&amp;</code>运算符可以确保导出环境变量后再执行后续的命令。</p>
</li>
<li><p><strong>清除环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> MY_VARIABLE</span><br></pre></td></tr></table></figure>
<p>使用<code>unset</code>命令可以清除已导出的环境变量。</p>
</li>
<li><p><strong>将变量值追加到现有值：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/new/directory</span><br></pre></td></tr></table></figure>
<p>使用<code>$PATH</code>获取现有的<code>PATH</code>值，并将新目录追加到其中。</p>
</li>
<li><p><strong>设置多个变量并导出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> VAR1=<span class="string">&quot;Value1&quot;</span> VAR2=<span class="string">&quot;Value2&quot;</span></span><br></pre></td></tr></table></figure>
<p>通过在一行上设置多个变量，可以一次性导出多个环境变量。</p>
</li>
<li><p><strong>查看当前Shell的所有环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span></span><br></pre></td></tr></table></figure>
<p>不带任何参数，可以查看当前所有的环境变量。</p>
</li>
<li><p><strong>在子Shell中执行命令并保留环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">export</span> MY_VARIABLE=<span class="string">&quot;Hello&quot;</span> &amp;&amp; some_command)</span><br></pre></td></tr></table></figure>
<p>使用圆括号创建子Shell，在其中执行命令，并确保在子Shell中导出的环境变量不会影响到父Shell。</p>
</li>
<li><p><strong>将命令的输出赋值给变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> MY_VARIABLE=$(some_command)</span><br></pre></td></tr></table></figure>
<p>使用命令替换<code>$()</code>将命令的输出赋值给环境变量。</p>
</li>
<li><p><strong>将当前目录添加到<code>PATH</code>中：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:.</span><br></pre></td></tr></table></figure>
<p>将当前目录添加到<code>PATH</code>中，以便执行当前目录中的命令。</p>
</li>
</ol>
<p>这些技巧可以帮助你更好地使用<code>export</code>命令，灵活地管理和调整环境变量，以满足不同的需求。确保理解环境变量的生命周期和影响范围，以避免潜在的问题。</p>
<h2 id="export"><a href="#export" class="headerlink" title="export"></a>export</h2><ul>
<li>export,命令用于设置或显示环境变量</li>
<li>在shell中执行程序时,shell会提供一组环境变量.</li>
<li>export可新增,修改或删除环境变量,供后续执行的程序使用</li>
<li>export的效力仅限于该次登录操作</li>
<li>语法:<code>export [-fnp] [变量名称] = [变量设置值]</code><ul>
<li><code>-f</code>:代表变量名称中为函数名称</li>
<li><code>-n</code>:删除指定的变量.变量实际上并未删除,只是不会输出到后续指令的执行环境中</li>
<li><code>-p</code>:列出所有的shell赋予程序的环境变量</li>
</ul>
</li>
</ul>
<p>在Linux中，<code>export</code>命令用于设置环境变量。环境变量是在Shell会话中可用的全局变量，它们包含了对系统行为和配置起作用的值。</p>
<p>以下是<code>export</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export [option] variable=value</span><br></pre></td></tr></table></figure>

<p>其中，<code>option</code>是可选的一些选项，<code>variable</code>是要设置的环境变量的名称，<code>value</code>是要分配给该环境变量的值。</p>
<p>以下是一些常见的<code>export</code>命令选项和用法：</p>
<ol>
<li><p>设置环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export VARIABLE=value</span><br></pre></td></tr></table></figure>

<p>此命令将设置名为<code>VARIABLE</code>的环境变量，并将其值设置为<code>value</code>。</p>
</li>
<li><p>查看当前环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export</span><br></pre></td></tr></table></figure>

<p>此命令将列出当前所有已设置的环境变量及其值。</p>
</li>
<li><p>设置多个环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export VAR1=value1 VAR2=value2 VAR3=value3</span><br></pre></td></tr></table></figure>

<p>此命令将一次性设置多个环境变量，并为每个变量指定一个值。</p>
</li>
</ol>
<p>环境变量在Shell会话中起作用，它们可以用于配置系统行为、定义路径、设置临时变量等。通过<code>export</code>命令设置的环境变量可以在当前Shell会话及其子进程中访问。</p>
<p>请注意，通过<code>export</code>命令设置的环境变量在Shell会话结束时会失效。如果您希望永久性地设置环境变量，可以将其添加到Shell配置文件（如<code>.bashrc</code>或<code>.profile</code>）中。</p>
<h2 id="linux-export命令-高级技巧"><a href="#linux-export命令-高级技巧" class="headerlink" title="linux export命令 高级技巧"></a>linux export命令 高级技巧</h2><p>在高级应用场景下，<code>export</code>命令可以结合其他工具和技巧，提供更灵活、强大的环境变量管理。以下是一些高级的<code>export</code>命令技巧：</p>
<ol>
<li><p><strong>使用<code>env</code>命令预设环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">env</span> MY_VARIABLE=<span class="string">&quot;Hello&quot;</span> some_command</span><br></pre></td></tr></table></figure>
<p>使用<code>env</code>命令可以在执行命令的同时预设环境变量，而不需要显式使用<code>export</code>。</p>
</li>
<li><p><strong>在脚本中使用<code>set -a</code>导出所有变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">set</span> -a</span><br><span class="line">MY_VARIABLE=<span class="string">&quot;Hello&quot;</span></span><br><span class="line">some_command</span><br></pre></td></tr></table></figure>
<p>使用<code>set -a</code>可以自动将所有变量导出为环境变量，而无需显式使用<code>export</code>。</p>
</li>
<li><p><strong>使用<code>declare</code>命令声明并导出环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -x MY_VARIABLE=<span class="string">&quot;Hello&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用<code>declare -x</code>命令可以声明并导出环境变量，类似于<code>export</code>的作用。</p>
</li>
<li><p><strong>通过<code>source</code>命令加载变量定义：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> my_variables.sh</span><br></pre></td></tr></table></figure>
<p>将变量定义存储在脚本中，然后使用<code>source</code>或<code>.</code>命令加载它们，使其成为当前Shell的一部分。</p>
</li>
<li><p><strong>使用<code>trap</code>命令在脚本退出时清除环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">trap</span> <span class="string">&#x27;unset MY_VARIABLE&#x27;</span> EXIT</span><br><span class="line">MY_VARIABLE=<span class="string">&quot;Hello&quot;</span></span><br><span class="line">some_command</span><br></pre></td></tr></table></figure>
<p>使用<code>trap</code>命令可以在脚本退出时自动清除导出的环境变量。</p>
</li>
<li><p><strong>动态设置<code>PS1</code>环境变量以自定义Shell提示符：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\u@\h:\w\$ &#x27;</span></span><br></pre></td></tr></table></figure>
<p>定义<code>PS1</code>环境变量可以自定义Shell的提示符，提高Shell使用体验。</p>
</li>
<li><p><strong>使用<code>eval</code>执行动态生成的<code>export</code>语句：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> <span class="string">&quot;export <span class="variable">$VARIABLE_NAME</span>=<span class="variable">$VARIABLE_VALUE</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>在脚本中使用<code>eval</code>执行动态生成的<code>export</code>语句，根据需要设置环境变量。</p>
</li>
<li><p><strong>使用<code>declare</code>动态创建函数并导出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -fx my_function</span><br><span class="line"><span class="built_in">export</span> -f my_function</span><br></pre></td></tr></table></figure>
<p>使用<code>declare -f</code>可以导出函数定义作为环境变量，然后使用<code>export -f</code>进行导出。</p>
</li>
</ol>
<p>这些高级技巧可以在更复杂的脚本和环境中提供更大的灵活性。在使用这些技巧时，要注意确保代码的可读性和安全性，以及理解环境变量的作用范围和生命周期。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_38_chown/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_38_chown/" class="post-title-link" itemprop="url">linux_2_38_chown</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>chown命令</li>
</ul>
<h2 id="linux-chown命令-详解"><a href="#linux-chown命令-详解" class="headerlink" title="linux chown命令 详解"></a>linux chown命令 详解</h2><p><code>chown</code> 是 Linux 系统中用于修改文件或目录的所有者（owner）和&#x2F;或所属组（group）的命令。以下是 <code>chown</code> 命令的详解：</p>
<h3 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> [选项] 新所有者[:新所属组] 文件或目录</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><strong>-c：</strong> 只在发生更改时显示操作信息。</li>
<li><strong>-R：</strong> 递归地更改指定目录及其所有子目录和文件的所有者和&#x2F;或所属组。</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>更改文件所有者：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> newowner file.txt</span><br></pre></td></tr></table></figure>
<p>将 <code>file.txt</code> 的所有者更改为 <code>newowner</code>。</p>
</li>
<li><p><strong>更改文件所有者和所属组：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> newowner:newgroup file.txt</span><br></pre></td></tr></table></figure>
<p>将 <code>file.txt</code> 的所有者更改为 <code>newowner</code>，所属组更改为 <code>newgroup</code>。</p>
</li>
<li><p><strong>递归更改目录及其内容的所有者：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R newowner:newgroup directory/</span><br></pre></td></tr></table></figure>
<p>递归地将 <code>directory/</code> 及其所有子目录和文件的所有者更改为 <code>newowner</code>，所属组更改为 <code>newgroup</code>。</p>
</li>
<li><p><strong>仅显示发生更改的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -c newowner:newgroup file.txt</span><br></pre></td></tr></table></figure>
<p>仅在发生更改时显示操作信息。</p>
</li>
<li><p><strong>使用数字 UID 和 GID：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> 1001:1001 file.txt</span><br></pre></td></tr></table></figure>
<p>使用数字 UID（用户标识）和 GID（组标识）更改文件所有者和所属组。</p>
</li>
<li><p><strong>更改目录所有者，但保持原有所属组：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> newowner: directory/</span><br></pre></td></tr></table></figure>
<p>仅更改 <code>directory/</code> 的所有者，所属组保持不变。</p>
</li>
<li><p><strong>更改文件所有者，但保持原有所属组：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> newowner file.txt</span><br></pre></td></tr></table></figure>
<p>仅更改 <code>file.txt</code> 的所有者，所属组保持不变。</p>
</li>
<li><p><strong>递归更改所有者但忽略错误：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R --ignore-errors newowner:newgroup directory/</span><br></pre></td></tr></table></figure>
<p>递归地将 <code>directory/</code> 及其所有子目录和文件的所有者更改为 <code>newowner</code>，所属组更改为 <code>newgroup</code>，但忽略错误。</p>
</li>
<li><p><strong>将文件所有者设置为当前用户：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> $(<span class="built_in">whoami</span>) file.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>whoami</code> 命令获取当前用户并将文件所有者设置为当前用户。</p>
</li>
<li><p><strong>将目录所有者设置为特定用户的主目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> user: directory/</span><br></pre></td></tr></table></figure>
<p>将 <code>directory/</code> 的所有者更改为 <code>user</code>，通常用于将用户的主目录的所有者更改为该用户。</p>
</li>
</ol>
<p><code>chown</code> 命令是一个强大的权限管理工具，允许管理员或文件所有者更改文件和目录的所有者和&#x2F;或所属组。使用时请小心，确保对文件和目录的更改是必要的，以免引起不必要的权限问题。</p>
<h2 id="linux-chown命令-常用技巧"><a href="#linux-chown命令-常用技巧" class="headerlink" title="linux chown命令 常用技巧"></a>linux chown命令 常用技巧</h2><p>以下是一些在使用 <code>chown</code> 命令时的常用技巧：</p>
<ol>
<li><p><strong>递归更改目录及其内容的所有者和所属组：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R newowner:newgroup directory/</span><br></pre></td></tr></table></figure>
<p>使用 <code>-R</code> 选项递归地将目录及其所有子目录和文件的所有者和所属组更改为指定的值。</p>
</li>
<li><p><strong>递归更改目录及其内容的所有者，但保持原有所属组：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R newowner: directory/</span><br></pre></td></tr></table></figure>
<p>仅更改目录的所有者，保持原有所属组。</p>
</li>
<li><p><strong>将文件所有者设置为当前用户：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> $(<span class="built_in">whoami</span>) file.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>whoami</code> 获取当前用户，并将文件的所有者更改为当前用户。</p>
</li>
<li><p><strong>将文件所有者和所属组还原为默认值：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> : file.txt</span><br></pre></td></tr></table></figure>
<p>将文件的所有者和所属组都还原为默认值。</p>
</li>
<li><p><strong>使用数字 UID 和 GID 更改所有者和所属组：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> 1001:1001 file.txt</span><br></pre></td></tr></table></figure>
<p>使用数字 UID 和 GID 更改文件的所有者和所属组。</p>
</li>
<li><p><strong>在 <code>find</code> 命令中使用 <code>chown</code>：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> f -<span class="built_in">exec</span> <span class="built_in">chown</span> newowner:newgroup &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>find</code> 命令查找特定类型的文件并逐一使用 <code>chown</code> 更改它们的所有者和所属组。</p>
</li>
<li><p><strong>仅更改目录的所有者，不包括文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> d -<span class="built_in">exec</span> <span class="built_in">chown</span> newowner &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>find</code> 命令仅更改目录的所有者，而不包括文件。</p>
</li>
<li><p><strong>忽略错误并继续进行更改：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> --ignore-errors newowner:newgroup directory/</span><br></pre></td></tr></table></figure>
<p>使用 <code>--ignore-errors</code> 选项忽略错误，继续进行更改。</p>
</li>
<li><p><strong>将所有文件及其子目录的所有者和所属组设置为特定值：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">exec</span> <span class="built_in">chown</span> newowner:newgroup &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>find</code> 命令递归地将所有文件及其子目录的所有者和所属组设置为指定的值。</p>
</li>
<li><p><strong>在 <code>xargs</code> 中使用 <code>chown</code>：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> f | xargs <span class="built_in">chown</span> newowner:newgroup</span><br></pre></td></tr></table></figure>
<p>使用 <code>xargs</code> 将 <code>find</code> 命令的输出作为参数传递给 <code>chown</code>，以批量更改文件的所有者和所属组。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>chown</code> 命令，适应不同的场景和需求。在使用时，请确保了解 <code>chown</code> 的影响，并小心处理文件和目录的所有者和所属组。</p>
<h2 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h2><ul>
<li>chown,(change owner)命令用于设置文件所有者和文件关联组的命令</li>
<li>chwon需要超级用户root的权限才能执行此命令，非超级用户如需要设置关联组可能需要使用<code>chgrp</code>命令</li>
<li>参数<ul>
<li><code>user</code> : 新的文件拥有者的使用者ID</li>
<li><code>group</code>: 新的文件拥有着的使用者组（group）</li>
<li><code>-c</code>   : 显示更改的部分的信息</li>
<li><code>-f</code>   : 忽略错误信息</li>
<li><code>-h</code>   : 修复符号链接</li>
<li><code>-v</code>   : 显示详细的处理信息</li>
<li><code>-R</code>   : 处理指定目录以及其子目录下的所有文件</li>
</ul>
</li>
</ul>
<p>在Linux中，<code>chown</code>命令用于修改文件或目录的所有者（owner）。它允许管理员将文件或目录的所有权转移给其他用户或用户组。</p>
<p>以下是<code>chown</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown [options] owner[:group] file(s)</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，<code>owner</code>是要设置的新所有者的用户名或用户ID，<code>group</code>是要设置的新所属组的组名或组ID，<code>file(s)</code>是要修改所有者的文件或目录列表。</p>
<p>以下是一些常见的<code>chown</code>命令选项和用法：</p>
<ol>
<li><p>修改文件所有者：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown user1 file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将将<code>file.txt</code>文件的所有者设置为<code>user1</code>。</p>
</li>
<li><p>修改文件所属组：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown :group1 file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将将<code>file.txt</code>文件的所属组设置为<code>group1</code>，而不修改所有者。</p>
</li>
<li><p>修改文件所有者和所属组：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown user1:group1 file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将将<code>file.txt</code>文件的所有者设置为<code>user1</code>，所属组设置为<code>group1</code>。</p>
</li>
</ol>
<p><code>chown</code>命令还支持其他一些选项，如递归修改目录及其子文件的所有者、通过用户ID或组ID设置所有者等。</p>
<p>请注意，只有管理员或文件所有者才能使用<code>chown</code>命令修改文件的所有者。此外，一些特殊文件和目录（如系统文件）可能受到权限限制，不允许普通用户修改所有者。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_35_awk/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_35_awk/" class="post-title-link" itemprop="url">linux_2_35_awk</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>awk命令</li>
</ul>
<h2 id="linux-awk命令-详解"><a href="#linux-awk命令-详解" class="headerlink" title="linux awk命令 详解"></a>linux awk命令 详解</h2><p><code>awk</code>是一种文本处理工具，用于在文本文件中查找、过滤和处理数据。它以行为单位处理文件，可以根据指定的规则对文件内容进行分析和处理。以下是<code>awk</code>命令的基本语法和一些常用选项：</p>
<h3 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;pattern &#123; action &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>

<ul>
<li><code>pattern</code>: 模式，用于匹配文本的特定部分。</li>
<li><code>&#123; action &#125;</code>: 动作，对匹配模式的行执行的具体操作。</li>
<li><code>filename</code>: 要处理的文件的名称。</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>打印文件的每一行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123; print &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>这会打印文件中的每一行。</p>
</li>
<li><p><strong>打印指定列的内容：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123; print $1, $3 &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>打印文件中每行的第一个和第三个字段。</p>
</li>
<li><p><strong>使用条件打印行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;$2 &gt; 50 &#123; print $1, $2 &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>打印第二列大于50的行的第一列和第二列。</p>
</li>
<li><p><strong>计算列的总和：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123; sum += $2 &#125; END &#123; print sum &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>计算文件第二列的总和，并在文件处理结束后打印结果。</p>
</li>
<li><p><strong>查找匹配模式的行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;/pattern/ &#123; print &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>打印包含指定模式的行。</p>
</li>
<li><p><strong>使用自定义分隔符：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">&#x27;:&#x27;</span> <span class="string">&#x27;&#123; print $1, $3 &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>-F</code>选项指定字段分隔符，例如冒号。</p>
</li>
<li><p><strong>使用条件进行计算：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123; if ($2 &gt; 50) &#123; total += $2 &#125; &#125; END &#123; print total &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>仅当第二列大于50时才计算总和。</p>
</li>
<li><p><strong>使用<code>BEGIN</code>块初始化变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;BEGIN &#123; total=0 &#125; &#123; total += $2 &#125; END &#123; print total &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>BEGIN</code>块初始化变量，然后在处理文件时进行累加。</p>
</li>
<li><p><strong>删除重复行并排序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;!seen[$0]++&#x27;</span> filename | <span class="built_in">sort</span></span><br></pre></td></tr></table></figure>
<p>删除文件中的重复行并按字典顺序排序。</p>
</li>
<li><p><strong>处理特定字段的特定范围：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;$1 == &quot;John&quot; &amp;&amp; $3 &gt;= 30 &#123; print &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>打印第一列为”John”且第三列大于等于30的行。</p>
</li>
</ol>
<p><code>awk</code>命令非常强大，可以通过组合不同的模式和动作来进行复杂的文本处理。以上示例只是简单演示了<code>awk</code>的基本用法，你可以根据需要结合更多的特性和选项来进行更复杂的文本处理操作。</p>
<h2 id="linux-awk命令-常用技巧"><a href="#linux-awk命令-常用技巧" class="headerlink" title="linux awk命令 常用技巧"></a>linux awk命令 常用技巧</h2><p><code>awk</code>是一个功能强大的文本处理工具，具有丰富的功能和灵活的语法。以下是一些常用的<code>awk</code>命令技巧：</p>
<ol>
<li><p><strong>使用多个命令块：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;/pattern/ &#123;print &quot;Found:&quot;, $0&#125; /another/ &#123;print &quot;Another:&quot;, $0&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>可以在同一行使用多个模式和动作块，每个模式和动作块组合以大括号分隔。</p>
</li>
<li><p><strong>设置字段分隔符：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;print $1, $3&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>-F</code>选项设置字段分隔符，适用于以逗号分隔的CSV文件等。</p>
</li>
<li><p><strong>使用<code>NR</code>和<code>NF</code>内置变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print NR, NF, $0&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>NR</code>表示当前行号，<code>NF</code>表示当前行的字段数。在<code>&#123;print NR, NF, $0&#125;</code>中，<code>$0</code>表示整行。</p>
</li>
<li><p><strong>计算每列的平均值：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123; for (i=1; i&lt;=NF; i++) sum[i]+=$i &#125; END &#123; for (i=1; i&lt;=NF; i++) printf &quot;%s %.2f\n&quot;, &quot;Column&quot;, i, sum[i]/NR &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用循环计算每列的总和，然后在<code>END</code>块中计算平均值。</p>
</li>
<li><p><strong>在输出中使用格式化字符串：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;printf &quot;Name: %-10s, Age: %02d\n&quot;, $1, $2&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>printf</code>函数输出格式化的字符串，可以控制字段的宽度和对齐方式。</p>
</li>
<li><p><strong>处理文件中的日期：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">&#x27;-&#x27;</span> <span class="string">&#x27;&#123;print &quot;Year:&quot;, $1, &quot;Month:&quot;, $2, &quot;Day:&quot;, $3&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用自定义分隔符处理日期字段。</p>
</li>
<li><p><strong>过滤并显示指定行数：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;NR&gt;=5 &amp;&amp; NR&lt;=10&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>NR</code>过滤指定行数的行。</p>
</li>
<li><p><strong>使用数组保存数据：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;data[$1]+=$2&#125; END &#123;for (key in data) print key, data[key]&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用数组保存数据，可以用于统计和汇总操作。</p>
</li>
<li><p><strong>使用<code>substr</code>函数截取字符串：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print substr($1, 1, 3)&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>substr</code>函数截取字符串的一部分。</p>
</li>
<li><p><strong>按列排序输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print $2, $1&#125;&#x27;</span> filename | <span class="built_in">sort</span></span><br></pre></td></tr></table></figure>
<p>使用<code>sort</code>命令按照第二列进行排序输出。</p>
</li>
</ol>
<p>这些技巧可以帮助你更好地利用<code>awk</code>进行文本处理，满足不同场景下的需求。<code>awk</code>的灵活性和强大的功能使其成为处理文本数据的重要工具。</p>
<h2 id="linux-awk命令-高级技巧"><a href="#linux-awk命令-高级技巧" class="headerlink" title="linux awk命令 高级技巧"></a>linux awk命令 高级技巧</h2><p><code>awk</code>命令提供了一系列高级技巧，允许更灵活、复杂的文本处理操作。以下是一些高级的<code>awk</code>技巧：</p>
<ol>
<li><p><strong>使用自定义函数：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;function my_function(x) &#123; return x*2 &#125; &#123;print my_function($1)&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>可以在<code>awk</code>中定义和使用自定义函数。</p>
</li>
<li><p><strong>多条件处理：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;if ($1 &gt; 50 &amp;&amp; $2 == &quot;John&quot;) print $0&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用多个条件结合逻辑运算符进行复杂的过滤。</p>
</li>
<li><p><strong>动态生成<code>awk</code>代码：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -v field=2 <span class="string">&#x27;&#123;print $field&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用变量动态指定要处理的字段。</p>
</li>
<li><p><strong>模式范围匹配：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;/start_pattern/, /end_pattern/ &#123;print&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用模式范围匹配处理一段特定范围内的数据。</p>
</li>
<li><p><strong>内置<code>BEGIN</code>和<code>END</code>块：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;BEGIN &#123;print &quot;Start Processing&quot;&#125; &#123;print $0&#125; END &#123;print &quot;End Processing&quot;&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>BEGIN</code>和<code>END</code>块在处理之前和之后执行特定的操作。</p>
</li>
<li><p><strong>处理多个文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print FILENAME, $0&#125;&#x27;</span> file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p><code>awk</code>可以处理多个文件，使用<code>FILENAME</code>变量可以获取当前正在处理的文件名。</p>
</li>
<li><p><strong>对每行应用多个动作：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;gsub(&quot;old&quot;, &quot;new&quot;); print&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>gsub</code>函数替换每一行中的字符串，并在同一行中执行其他操作。</p>
</li>
<li><p><strong>获取命令的输出作为输入：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> &lt;(some_command)</span><br></pre></td></tr></table></figure>
<p>使用<code>&lt;(command)</code>语法可以将命令的输出作为<code>awk</code>的输入。</p>
</li>
<li><p><strong>处理非定长字段：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>NF</code>表示最后一个字段，即使字段的数量是变化的。</p>
</li>
<li><p><strong>使用<code>getline</code>函数读取下一行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print; getline; print &quot;Next line:&quot;, $0&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>getline</code>函数读取下一行并进行处理。</p>
</li>
<li><p><strong>使用<code>next</code>跳过某些行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;/pattern/ &#123;print; next&#125; &#123;print &quot;Skipped:&quot;, $0&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用<code>next</code>跳过某些行的处理。</p>
</li>
</ol>
<p>这些高级技巧可以在复杂的文本处理场景中发挥作用，充分发挥<code>awk</code>的强大功能。注意在使用高级功能时要谨慎，确保代码可读性和可维护性。</p>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><ul>
<li>AWK,是一种处理文本文件的语言,是一个强大的文本分析工具</li>
<li>语法:<code>awk [选项参数] &#39;script&#39; var=value file(s)</code> 或者 <code>awk [选项参数] -f scriptfile var=value file(s)</code></li>
<li>基本用法<ul>
<li><code>awk &#39;&#123;[pattern] action&#125;&#39; &#123;filenames&#125;</code> , 行匹配语句 <code>awk &#39;&#39;</code> 只能用单引号</li>
<li><code>awk &#39;&#123;print $1, $4&#125;&#39; log.txt</code>, 每行按空格或TAB分割,输出文本的1,4项</li>
<li><code>awk -F</code>, -F相当于内置变量FS,指定分割字符</li>
<li><code>awk -v</code> ,设置变量</li>
<li>awk -f {awk脚本} {文件名}</li>
</ul>
</li>
</ul>
<p>在Linux中，<code>awk</code>命令是一种强大的文本处理工具，用于从文本文件中提取和处理数据。它读取输入文件的每一行，按照指定的模式进行匹配，并执行相应的操作。</p>
<p>以下是<code>awk</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;pattern &#123; action &#125;&#x27; input_file</span><br></pre></td></tr></table></figure>

<p>其中，<code>pattern</code>是用于匹配文本行的条件，<code>action</code>是要执行的操作，<code>input_file</code>是要处理的输入文件。</p>
<p>以下是一些常见的<code>awk</code>命令的用法：</p>
<ol>
<li><p>打印文件的某一列：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123; print $2 &#125;&#x27; input_file</span><br></pre></td></tr></table></figure>

<p>此命令将打印输入文件中的每一行的第二列。</p>
</li>
<li><p>使用条件过滤行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;$3 &gt; 10 &#123; print &#125;&#x27; input_file</span><br></pre></td></tr></table></figure>

<p>此命令将打印输入文件中第三列大于10的行。</p>
</li>
<li><p>计算行数、列数或总和：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;END &#123; print NR &#125;&#x27; input_file</span><br></pre></td></tr></table></figure>

<p>此命令将打印输入文件中的行数。</p>
</li>
</ol>
<p><code>awk</code>命令还支持其他一些高级功能，如使用正则表达式进行模式匹配、定义变量和函数、处理字段分隔符等。您可以根据需要使用更复杂的<code>awk</code>脚本进行数据处理。</p>
<p>请注意，<code>awk</code>命令可以与管道符号（<code>|</code>）和其他命令一起使用，以实现更复杂的数据处理任务。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_40_file/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_40_file/" class="post-title-link" itemprop="url">linux_2_40_file</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>file命令</li>
</ul>
<h2 id="linux-file命令-详解"><a href="#linux-file命令-详解" class="headerlink" title="linux file命令 详解"></a>linux file命令 详解</h2><p><code>file</code> 是一个在 Linux 和其他类 Unix 系统上用于确定文件类型的命令。它通过检查文件的内容、文件系统信息和魔术数字等来进行文件类型的猜测。下面是一些关于 <code>file</code> 命令的详解：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file [选项] 文件名</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-b</code>：仅显示文件类型，不显示文件名。</li>
<li><code>-i</code>：显示 MIME 类型。</li>
<li><code>-z</code>：在输出中不显示文件名。</li>
<li><code>-L</code>：对符号链接进行解引用，显示链接目标的文件类型。</li>
<li><code>-k</code>：在输出中不显示错误消息。</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>显示文件类型和文件名：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file filename</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>仅显示文件类型，不显示文件名：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file -b filename</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示 MIME 类型：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file -i filename</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>对符号链接进行解引用：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file -L symlink</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="示例输出："><a href="#示例输出：" class="headerlink" title="示例输出："></a>示例输出：</h3><ul>
<li><p>对于普通文本文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filename: ASCII text</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于 ELF 可执行文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">executable: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=..., not stripped</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">directory</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于符号链接：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">symbolic link to anotherfile</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h3><p><code>file</code> 命令通过检查文件的前几个字节（魔术数字）、文件系统信息和其他特征来判断文件类型。它还可以利用 <code>libmagic</code> 库来获取更准确的文件类型信息。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li><code>file</code> 命令的准确性取决于文件的内容，因此对于某些类型的文件，可能需要依赖文件扩展名或其他方法来确保准确性。</li>
<li>在某些系统上，可能需要安装 <code>file</code> 或 <code>libmagic</code> 库。</li>
</ul>
<p>总的来说，<code>file</code> 是一个强大的命令，可用于快速确定文件类型，特别是当文件没有明显的扩展名时。</p>
<h2 id="linux-file命令-常用技巧"><a href="#linux-file命令-常用技巧" class="headerlink" title="linux file命令 常用技巧"></a>linux file命令 常用技巧</h2><p><code>file</code> 命令在 Linux 系统中是一个非常有用的工具，以下是一些常用的技巧和用法：</p>
<ol>
<li><p><strong>显示文件类型和信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file filename</span><br></pre></td></tr></table></figure>
<p>这是最基本的用法，会显示文件类型和相关信息。</p>
</li>
<li><p><strong>仅显示文件类型，不显示文件名：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file -b filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-b</code> 选项，仅显示文件类型而不包含文件名。</p>
</li>
<li><p><strong>显示 MIME 类型：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file -i filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-i</code> 选项，显示 MIME 类型。</p>
</li>
<li><p><strong>递归检查目录下的所有文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file -r /path/to/directory</span><br></pre></td></tr></table></figure>
<p>使用 <code>-r</code> 选项，可以递归地检查指定目录下的所有文件。</p>
</li>
<li><p><strong>对符号链接进行解引用：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file -L symlink</span><br></pre></td></tr></table></figure>
<p>使用 <code>-L</code> 选项，显示符号链接指向的文件类型。</p>
</li>
<li><p><strong>批量检查多个文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file file1 file2 file3</span><br></pre></td></tr></table></figure>
<p>可以同时检查多个文件的类型。</p>
</li>
<li><p><strong>使用通配符检查多个文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file *.txt</span><br></pre></td></tr></table></figure>
<p>使用通配符，可以一次性检查指定类型的多个文件。</p>
</li>
<li><p><strong>过滤输出，仅显示特定类型的文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file -i * | grep <span class="string">&quot;text/&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用管道和 <code>grep</code>，可以过滤输出，仅显示特定 MIME 类型的文件。</p>
</li>
<li><p><strong>使用 find 结合 file 检查文件类型：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> f -<span class="built_in">exec</span> file &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>使用 <code>find</code> 命令结合 <code>file</code>，可以在指定路径下递归检查所有文件的类型。</p>
</li>
<li><p><strong>将输出保存到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file filename &gt; output.txt</span><br></pre></td></tr></table></figure>
<p>可以将 <code>file</code> 命令的输出保存到文件中，以供后续查看或分析。</p>
</li>
<li><p><strong>显示文件的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file -k filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-k</code> 选项，显示文件的详细信息，包括错误消息。</p>
</li>
</ol>
<p>这些技巧能够帮助你更灵活地使用 <code>file</code> 命令来检查和处理不同类型的文件。</p>
<h2 id="file"><a href="#file" class="headerlink" title="file"></a>file</h2><!-- + 使用file命令,查看某个文件的类型信息 -->

<ul>
<li><p>简介：</p>
<ul>
<li>file 命令是一个在 Linux 系统中用于确定文件类型的实用工具。它通过检查文件内容和一些特征来确定文件的类型，而不仅仅依赖于文件扩展名</li>
</ul>
</li>
<li><p>语法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file [选项] 文件名</span><br></pre></td></tr></table></figure>
</li>
<li><p>选项：</p>
<ul>
<li>-b 或 –brief：以简洁模式输出，只显示文件类型</li>
<li>-i 或 –mime：显示文件的 MIME 类型</li>
<li>-m &lt;魔术文件&gt; 或 –magic-file&#x3D;&lt;魔术文件&gt;：指定自定义的魔术文件来识别文件类型</li>
<li>-z 或 –uncompress：对于压缩文件，显示原始文件类型</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_37_whereis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_37_whereis/" class="post-title-link" itemprop="url">linux_2_37_whereis</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>whereis命令</li>
</ul>
<h2 id="linux-whereis命令-详解"><a href="#linux-whereis命令-详解" class="headerlink" title="linux whereis命令 详解"></a>linux whereis命令 详解</h2><p><code>whereis</code> 是 Linux 中的一个用于查找二进制、源代码和帮助文档文件的命令。它提供了一种简便的方式来查找系统中特定文件或程序的位置。以下是<code>whereis</code>命令的详解：</p>
<h3 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis [选项] 文件或程序名</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><strong>-b：</strong> 限制搜索二进制文件。</li>
<li><strong>-m：</strong> 限制搜索帮助手册文件。</li>
<li><strong>-s：</strong> 限制搜索源代码文件。</li>
<li><strong>-u：</strong> 显示不包括指定文件类型的位置。</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ol>
<li><p><strong>查找二进制文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>这将返回 <code>ls</code> 命令的二进制文件、帮助文件和源代码文件的路径。</p>
</li>
<li><p><strong>限制搜索类型：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -b <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>仅显示 <code>ls</code> 命令的二进制文件路径。</p>
</li>
<li><p><strong>查找帮助文档：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -m <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>仅显示 <code>ls</code> 命令的帮助文档路径。</p>
</li>
<li><p><strong>查找源代码：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -s <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>仅显示 <code>ls</code> 命令的源代码路径。</p>
</li>
<li><p><strong>显示多个文件的位置：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis <span class="built_in">ls</span> grep</span><br></pre></td></tr></table></figure>
<p>查找多个文件或程序的位置。</p>
</li>
<li><p><strong>显示不同类型的位置：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -b -m <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>仅显示 <code>ls</code> 命令的二进制文件和帮助文档路径。</p>
</li>
<li><p><strong>不同文件类型的路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -u <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>显示不包括 <code>ls</code> 命令的源代码文件的路径。</p>
</li>
</ol>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li><code>whereis</code> 主要用于查找系统命令或文件，不适用于用户自定义的脚本或其他非系统提供的文件。</li>
<li><code>whereis</code> 会搜索默认的系统路径，如 <code>/bin</code>、<code>/usr/bin</code> 等，因此，如果某个程序或文件不在这些路径下，<code>whereis</code> 将无法找到它。</li>
</ul>
<p>总的来说，<code>whereis</code> 是一个方便的工具，用于快速查找系统中二进制、源代码和帮助文档文件的位置。如果需要查找更广泛范围的文件，或者需要自定义搜索路径，可能需要使用其他工具如 <code>find</code> 或 <code>locate</code>。</p>
<h2 id="linux-whereis命令-常用技巧"><a href="#linux-whereis命令-常用技巧" class="headerlink" title="linux whereis命令 常用技巧"></a>linux whereis命令 常用技巧</h2><p>虽然 <code>whereis</code> 命令相对简单，但你可以通过一些技巧来更灵活地使用它：</p>
<ol>
<li><p><strong>结合通配符进行模糊搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -b -u <span class="string">&quot;*keyword*&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用通配符 <code>*</code> 可以进行模糊搜索，查找包含指定关键字的二进制文件。</p>
</li>
<li><p><strong>使用管道和其他命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -b <span class="built_in">command</span> | xargs <span class="built_in">ls</span> -l</span><br></pre></td></tr></table></figure>
<p>结合 <code>xargs</code> 可以将 <code>whereis</code> 的输出作为参数传递给其他命令，这里是 <code>ls -l</code>。</p>
</li>
<li><p><strong>输出详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -l <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-l</code> 选项可以输出详细的信息，包括文件类型和路径。</p>
</li>
<li><p><strong>查找共享库文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -M /lib /usr/lib -f libc.so</span><br></pre></td></tr></table></figure>
<p>使用 <code>-M</code> 选项指定额外的搜索路径，查找共享库文件。</p>
</li>
<li><p><strong>在路径中搜索指定文件类型：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -b -B /path/to/search -f filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-B</code> 选项指定自定义搜索路径，查找指定文件类型。</p>
</li>
<li><p><strong>使用别名简化命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> ws=<span class="string">&#x27;whereis -b -m -s&#x27;</span></span><br><span class="line">ws <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<p>创建一个别名（这里是 <code>ws</code>），以简化 <code>whereis</code> 的命令行输入。</p>
</li>
<li><p><strong>结合 <code>find</code> 进行更复杂的搜索：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find $(whereis -b <span class="built_in">command</span> | <span class="built_in">cut</span> -d<span class="string">&#x27; &#x27;</span> -f2) -name <span class="string">&quot;*.txt&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>find</code> 命令可以基于 <code>whereis</code> 的结果执行更复杂的搜索操作。</p>
</li>
<li><p><strong>将 <code>whereis</code> 结果导入数组：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">paths=($(whereis -b <span class="built_in">command</span> | <span class="built_in">cut</span> -d<span class="string">&#x27; &#x27;</span> -f2))</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;paths[0]&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>将 <code>whereis</code> 的输出导入到 Bash 数组中，以便进一步处理。</p>
</li>
<li><p><strong>显示文件权限和所有者：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -l <span class="built_in">ls</span> | xargs <span class="built_in">ls</span> -l</span><br></pre></td></tr></table></figure>
<p>结合 <code>-l</code> 选项和 <code>xargs</code> 来显示文件的权限和所有者信息。</p>
</li>
<li><p><strong>过滤结果：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis -b <span class="built_in">command</span> | grep <span class="string">&quot;/bin/&quot;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 命令过滤 <code>whereis</code> 的输出，只显示包含 “&#x2F;bin&#x2F;“ 的路径。</p>
</li>
</ol>
<p>这些技巧可以帮助你更好地利用 <code>whereis</code> 命令，使其更适应你的需求。根据具体情况，你可能会结合其他命令和选项以达到更复杂的搜索和操作。</p>
<h2 id="whereis"><a href="#whereis" class="headerlink" title="whereis"></a>whereis</h2><ul>
<li>检查二进制文件和库文件的位置<ul>
<li><code>whereis systemctl</code></li>
</ul>
</li>
</ul>
<p>在Linux中，<code>whereis</code>命令用于定位可执行程序、源代码文件和帮助文档的位置。它提供了一个简单的方法来查找特定命令或文件在系统中的位置。</p>
<p>以下是<code>whereis</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis [options] command</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，<code>command</code>是要查找的命令或文件。</p>
<p>以下是一些常见的<code>whereis</code>命令选项和用法：</p>
<ol>
<li><p>查找可执行程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis ls</span><br></pre></td></tr></table></figure>

<p>此命令将显示<code>ls</code>命令的可执行程序位置。</p>
</li>
<li><p>查找源代码文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis grep</span><br></pre></td></tr></table></figure>

<p>此命令将显示<code>grep</code>命令的源代码文件位置。</p>
</li>
<li><p>查找帮助文档：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis man</span><br></pre></td></tr></table></figure>

<p>此命令将显示<code>man</code>命令的帮助文档位置。</p>
</li>
</ol>
<p><code>whereis</code>命令会搜索特定文件类型的位置，并显示相关信息，包括可执行程序、源代码和帮助文档的路径。它会搜索系统默认的搜索路径，如<code>/bin</code>、<code>/usr/bin</code>等。</p>
<p>请注意，<code>whereis</code>命令仅搜索已经建立索引的文件和路径，因此可能无法找到某些文件。另外，它不会搜索用户自定义的路径或目录。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_36_sed/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_36_sed/" class="post-title-link" itemprop="url">linux_2_36_sed</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>sed命令</li>
</ul>
<h2 id="linux-sed命令-详解"><a href="#linux-sed命令-详解" class="headerlink" title="linux sed命令 详解"></a>linux sed命令 详解</h2><p><code>sed</code>（流编辑器）是一个在命令行中使用的文本处理工具，用于对文本流进行过滤和转换。它通常用于从输入文本中选择、删除、替换文本，以及对文本进行其他一些操作。以下是<code>sed</code>命令的一些常见用法和选项的详解：</p>
<h3 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [选项] <span class="string">&#x27;脚本&#x27;</span> 文件</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-n</code>：抑制默认的输出，只输出经过编辑的行。</li>
<li><code>-e</code>：指定要执行的编辑命令。</li>
<li><code>-f</code>：从文件中读取编辑脚本。</li>
<li><code>-i</code>：直接修改文件内容，而不是输出到标准输出。</li>
</ul>
<h3 id="基本编辑命令："><a href="#基本编辑命令：" class="headerlink" title="基本编辑命令："></a>基本编辑命令：</h3><ol>
<li><p><strong>替换文本：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/old_text/new_text/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<p>这将在<code>file.txt</code>中查找并替换第一次出现的<code>old_text</code>。</p>
</li>
<li><p><strong>全局替换：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/old_text/new_text/g&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<p>使用<code>g</code>标志进行全局替换，替换每一处匹配。</p>
</li>
<li><p><strong>删除行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;/pattern/d&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<p>删除包含指定模式的行。</p>
</li>
<li><p><strong>打印行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;2p&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<p>打印文件中的第二行。</p>
</li>
<li><p><strong>打印指定范围的行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;2,5p&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<p>打印文件中的第2到第5行。</p>
</li>
<li><p><strong>在指定行之前或之后插入文本：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;2i\inserted_text&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<p>在第2行之前插入文本。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;2a\appended_text&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<p>在第2行之后追加文本。</p>
</li>
<li><p><strong>使用正则表达式：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;/^pattern/s/old_text/new_text/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<p>仅在以<code>pattern</code>开头的行中替换<code>old_text</code>。</p>
</li>
<li><p><strong>多个编辑命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">&#x27;s/old/new/&#x27;</span> -e <span class="string">&#x27;s/another/replace/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<p>执行多个编辑命令。</p>
</li>
<li><p><strong>从文件读取编辑脚本：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -f script.sed file.txt</span><br></pre></td></tr></table></figure>
<p><code>script.sed</code>包含一系列<code>sed</code>编辑命令。</p>
</li>
<li><p><strong>将结果写入文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/old/new/&#x27;</span> file.txt &gt; new_file.txt</span><br></pre></td></tr></table></figure>
<p>将结果输出到新文件。</p>
</li>
</ol>
<p>这只是<code>sed</code>的一些基本用法，它还有更多高级的功能和选项。查阅<code>sed</code>的手册页（<code>man sed</code>）以获取更详细的信息。</p>
<h2 id="linux-sed命令-常用技巧"><a href="#linux-sed命令-常用技巧" class="headerlink" title="linux sed命令 常用技巧"></a>linux sed命令 常用技巧</h2><p><code>sed</code>是一个非常强大的文本处理工具，下面是一些在使用<code>sed</code>时常用的一些技巧：</p>
<ol>
<li><p><strong>使用正则表达式：</strong><br><code>sed</code>支持正则表达式，可以在模式匹配时灵活应用。例如，使用<code>.*</code>匹配任意字符。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/^.*pattern.*$/replacement/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>引用变量：</strong><br>可以在<code>sed</code>命令中使用变量，但是需要小心引号的使用，以确保变量被正确解释。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_var=<span class="string">&quot;pattern&quot;</span></span><br><span class="line">sed <span class="string">&quot;s/<span class="variable">$my_var</span>/new_text/&quot;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在匹配行之前或之后添加文本：</strong><br>使用<code>i</code>在匹配行之前插入文本，使用<code>a</code>在匹配行之后追加文本。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;/pattern/i\inserted_text&#x27;</span> file.txt</span><br><span class="line">sed <span class="string">&#x27;/pattern/a\appended_text&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用变量删除行：</strong><br>使用变量作为删除条件，可以动态指定要删除的内容。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete_var=<span class="string">&quot;pattern&quot;</span></span><br><span class="line">sed <span class="string">&quot;/<span class="variable">$delete_var</span>/d&quot;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>逆序打印文件：</strong><br>使用<code>-n</code>抑制默认输出，然后使用<code>p</code>打印行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;1!G;h;$p&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除空白行：</strong><br>删除文件中的空白行，包括只包含空格或制表符的行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;/^\s*$/d&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用变量替换定界符：</strong><br>如果模式或替换文本中包含斜杠(<code>/</code>)，可以使用其他定界符替代。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&quot;s|/old/|new|&quot;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>只处理文件的部分行：</strong><br>使用行号范围限定<code>sed</code>的操作范围。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;10,20s/old/new/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>反向引用匹配组：</strong><br>在替换文本中使用<code>\1</code>、<code>\2</code>等引用匹配组。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/\(pattern1\)\(pattern2\)/\2\1/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用<code>-i</code>选项直接修改文件：</strong><br>使用<code>-i</code>选项可以直接在原文件上修改，但请小心使用，确保备份数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/old/new/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li>
</ol>
<p>这些技巧只是<code>sed</code>的冰山一角。要深入了解，建议查看<code>sed</code>的文档和手册页（<code>man sed</code>）。</p>
<h2 id="linux-sed命令-高级技巧"><a href="#linux-sed命令-高级技巧" class="headerlink" title="linux sed命令 高级技巧"></a>linux sed命令 高级技巧</h2><p>以下是一些在使用<code>sed</code>时的高级技巧，这些技巧可以更灵活地处理文本：</p>
<ol>
<li><p><strong>使用地址范围：</strong><br>定义<code>sed</code>的操作范围，可以是行号范围，也可以是正则表达式匹配的范围。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;10,20s/old/new/&#x27;</span> file.txt</span><br><span class="line">sed <span class="string">&#x27;/start/,/end/s/old/new/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用命名标签：</strong><br>使用<code>b</code>命令和标签来进行跳转，可以提高脚本的可读性和复用性。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;:label /pattern/ &#123; s/old/new/; b label; &#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>处理多行模式空间：</strong><br><code>N</code>命令可以将下一行追加到模式空间中，使用<code>\n</code>表示换行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;N;s/\n/ /&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>保留匹配行之外的内容：</strong><br>使用<code>!</code>来反转匹配，保留非匹配行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;/pattern/!s/unwanted_text/new_text/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>只处理匹配的部分：</strong><br>使用匹配组来保留或替换匹配的部分。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/\(start_pattern\)keep_this_part\(end_pattern\)/\1replace_this_part\2/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用<code>h</code>和<code>H</code>保存和追加到保持缓冲区：</strong><br>将匹配的行保存到保持缓冲区，使用<code>h</code>，将下一行追加到保持缓冲区，使用<code>H</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;/pattern/&#123;h;&#125;;/next_pattern/&#123;H;x;p;&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>自定义分隔符：</strong><br>可以使用不同的分隔符，以避免在正则表达式中转义斜杠。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s|/old/|new|&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>执行<code>sed</code>脚本：</strong><br>将<code>sed</code>脚本保存到文件中，并通过<code>-f</code>选项执行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -f script.sed file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在指定行数插入或删除行：</strong><br>使用<code>sed</code>在指定行数之前或之后插入行，或者删除指定行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;2i\inserted_line&#x27;</span> file.txt</span><br><span class="line">sed <span class="string">&#x27;2a\appended_line&#x27;</span> file.txt</span><br><span class="line">sed <span class="string">&#x27;2d&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>逐行处理：</strong><br>使用<code>sed</code>逐行处理文件，对每一行执行命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">&#x27;s/old/new/&#x27;</span> -e <span class="string">&#x27;p&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li>
</ol>
<p>这些高级技巧可以使<code>sed</code>更加强大和灵活，但也需要谨慎使用，以确保正确处理文本数据。深入了解<code>sed</code>的文档和手册页对于理解和应用这些技巧非常有帮助。</p>
<h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><ul>
<li>sed, 利用脚本来处理文本文件，主要用来自动编辑一个或多个文件，简化对文件的反复操作，编写转换程序等</li>
<li>sed [-hnV] [-e<script>][-f<script文件>][文本文件]</li>
<li>参数说明<ul>
<li><code>-e&lt;script&gt;</code> : 以选项中指定的script来处理输入的文本文件</li>
<li><code>-f&lt;script 文件&gt;</code> ：以选项中指定的script文件来处理输入的文本文件</li>
<li><code>-h</code> ： 显示帮助</li>
<li><code>-n</code> ： 仅显示script处理后的结果</li>
</ul>
</li>
<li>动作说明<ul>
<li><code>a</code> ： 新增，a的后面可以接字符串，这些字符串会在新的一行出现（目前的下一行）</li>
<li><code>c</code> ： 取代，c的后面可以接字符串，这些字符串可以取代n1, n2之间的行</li>
<li><code>d</code> ： 删除，因为是删除，所以d后面通常不接任何东西</li>
<li><code>i</code> ： 插入，i的后面可以接字符串，而这些字符串会出现在新的一行（目前的上一行）</li>
<li><code>p</code> ： 打印，将某个选择的数据打印</li>
<li><code>s</code> :  取代，可以直接进行取代的工作，通常搭配正则表达式</li>
</ul>
</li>
</ul>
<p>在Linux中，<code>sed</code>命令是一种流编辑器，用于对文本进行流式处理和转换。它读取输入文本的每一行，根据指定的规则进行模式匹配和替换操作，并将处理后的文本输出到标准输出或指定的文件中。</p>
<p>以下是<code>sed</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [options] &#x27;command&#x27; input_file</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，<code>command</code>是要执行的<code>sed</code>命令，<code>input_file</code>是要处理的输入文件。</p>
<p>以下是一些常见的<code>sed</code>命令选项和用法：</p>
<ol>
<li><p>替换文本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/pattern/replacement/&#x27; input_file</span><br></pre></td></tr></table></figure>

<p>此命令将输入文件中的每一行，将匹配<code>pattern</code>的内容替换为<code>replacement</code>。</p>
</li>
<li><p>删除行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;3d&#x27; input_file</span><br></pre></td></tr></table></figure>

<p>此命令将删除输入文件中的第三行。</p>
</li>
<li><p>使用正则表达式进行匹配：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;/pattern/p&#x27; input_file</span><br></pre></td></tr></table></figure>

<p>此命令将仅打印匹配正则表达式<code>pattern</code>的行。</p>
</li>
</ol>
<p><code>sed</code>命令还支持其他一些高级功能，如全局替换、插入、追加和删除文本行，条件执行等。您可以使用不同的<code>sed</code>命令和选项来完成各种文本处理任务。</p>
<p>请注意，<code>sed</code>命令是一种非交互式的编辑器，它将按照指定的命令对输入文本进行处理，并将结果输出到标准输出或指定的文件中。它不会修改原始文件，除非您使用重定向符号（<code>&gt;</code>）将输出重定向到原始文件。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_42_realpath/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_42_realpath/" class="post-title-link" itemprop="url">linux_2_42_realpath</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>realpath命令</li>
</ul>
<h2 id="linux-realpath命令-详解"><a href="#linux-realpath命令-详解" class="headerlink" title="linux realpath命令 详解"></a>linux realpath命令 详解</h2><p><code>realpath</code> 命令用于获取指定文件或目录的真实路径。它会解析所有的符号链接并显示最终的规范化路径。以下是关于 <code>realpath</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> [选项] 文件名</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-e</code>：如果文件不存在，则不输出任何信息。</li>
<li><code>-m</code>：相当于 <code>--canonicalize-missing</code>，如果文件不存在，则不输出任何信息。</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>显示文件的真实路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> filename</span><br></pre></td></tr></table></figure>
<p>这将显示指定文件的真实路径，解析所有符号链接。</p>
</li>
<li><p><strong>显示目录的真实路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> /path/to/directory</span><br></pre></td></tr></table></figure>
<p>类似于文件，也可以用于显示指定目录的真实路径。</p>
</li>
<li><p><strong>如果文件不存在，则不输出任何信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> -e non_existent_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-e</code> 选项，如果文件不存在，则不输出任何信息。</p>
</li>
<li><p><strong>相当于 <code>-e</code> 的另一种写法：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> -m non_existent_file</span><br></pre></td></tr></table></figure>
<p>使用 <code>-m</code> 选项，也可以达到如果文件不存在，则不输出任何信息的效果。</p>
</li>
</ol>
<h3 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h3><p><code>realpath</code> 命令通过递归解析所有的符号链接来获取文件或目录的真实路径。它能够处理相对路径和绝对路径，并返回规范化的绝对路径。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li>在一些较旧的系统上，可能需要安装 <code>coreutils</code> 包（通常包含 <code>realpath</code>）来使用该命令。</li>
<li>对于不存在的文件，<code>realpath</code> 在默认情况下会输出错误消息，使用 <code>-e</code> 或 <code>-m</code> 选项可以避免这种输出。</li>
</ul>
<h3 id="示例输出："><a href="#示例输出：" class="headerlink" title="示例输出："></a>示例输出：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/path/to/filename</span><br></pre></td></tr></table></figure>

<p><code>realpath</code> 命令是在处理文件路径时非常有用的工具，尤其是当路径中包含符号链接或相对路径时。通过返回规范化的绝对路径，它有助于确保脚本或程序可以准确地访问所需的文件或目录。</p>
<h2 id="linux-realpath命令-常用技巧"><a href="#linux-realpath命令-常用技巧" class="headerlink" title="linux realpath命令 常用技巧"></a>linux realpath命令 常用技巧</h2><p><code>realpath</code> 命令在处理文件路径时非常实用，以下是一些常用的技巧：</p>
<ol>
<li><p><strong>显示文件的真实路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> filename</span><br></pre></td></tr></table></figure>
<p>最简单和最基本的用法是显示指定文件的真实路径。</p>
</li>
<li><p><strong>显示目录的真实路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> /path/to/directory</span><br></pre></td></tr></table></figure>
<p>类似于文件，也可以用于显示指定目录的真实路径。</p>
</li>
<li><p><strong>将相对路径转换为绝对路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> relative/path/to/file</span><br></pre></td></tr></table></figure>
<p><code>realpath</code> 可以将相对路径转换为绝对路径，方便在脚本中使用。</p>
</li>
<li><p><strong>显示目录中的所有文件的真实路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> /path/to/directory/*</span><br></pre></td></tr></table></figure>
<p>使用通配符，可以一次性显示目录中所有文件的真实路径。</p>
</li>
<li><p><strong>将路径保存到变量中：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filepath=$(<span class="built_in">realpath</span> filename)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$filepath</span></span><br></pre></td></tr></table></figure>
<p>将文件的真实路径保存到变量中，以便在脚本中进一步使用。</p>
</li>
<li><p><strong>判断文件是否存在并获取真实路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -e filename ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">realpath</span> filename</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;File not found.&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-e</code> 选项，可以判断文件是否存在，如果存在则显示真实路径。</p>
</li>
<li><p><strong>使用 <code>readlink</code> 代替 <code>realpath</code>：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">readlink</span> -f filename</span><br></pre></td></tr></table></figure>
<p>在一些系统上，<code>readlink</code> 也可以用来获取文件的真实路径，效果类似于 <code>realpath</code>。</p>
</li>
<li><p><strong>结合其他命令使用：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> $(<span class="built_in">realpath</span> /path/to/directory)</span><br></pre></td></tr></table></figure>
<p>可以结合其他命令使用，比如在脚本中切换到指定目录。</p>
</li>
<li><p><strong>使用 <code>-e</code> 选项检查路径的有效性：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">realpath</span> -e /path/to/possibly/invalid/path</span><br></pre></td></tr></table></figure>
<p>使用 <code>-e</code> 选项，可以检查路径是否有效，如果无效则不输出任何信息。</p>
</li>
</ol>
<p>这些技巧可以使你更灵活地使用 <code>realpath</code> 命令，适应不同的场景和需求。</p>
<h2 id="realpath"><a href="#realpath" class="headerlink" title="realpath"></a>realpath</h2><ul>
<li>获取指定文件或目录的绝对路径</li>
</ul>
<p>在Linux中，<code>realpath</code>命令用于获取给定路径的绝对路径。它会解析所有符号链接，并返回路径的规范化版本，消除任何冗余或相对路径。</p>
<p>以下是<code>realpath</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">realpath [options] file(s)</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，<code>file(s)</code>是要获取绝对路径的文件或目录列表。</p>
<p>以下是一些常见的<code>realpath</code>命令选项和用法：</p>
<ol>
<li><p>获取文件的绝对路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">realpath file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将返回<code>file.txt</code>文件的绝对路径。</p>
</li>
<li><p>获取目录的绝对路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">realpath /usr/local/bin</span><br></pre></td></tr></table></figure>

<p>此命令将返回<code>/usr/local/bin</code>目录的绝对路径。</p>
</li>
</ol>
<p><code>realpath</code>命令可以用于解析路径中的符号链接并返回规范化的绝对路径。它对于需要获取路径的确切位置和处理文件路径的任务非常有用。</p>
<p>请注意，<code>realpath</code>命令需要指定的路径存在才能返回绝对路径。如果路径不存在或无法访问，它会产生错误。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_39_which/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_39_which/" class="post-title-link" itemprop="url">linux_2_39_which</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>which命令</li>
</ul>
<h2 id="linux-which命令-详解"><a href="#linux-which命令-详解" class="headerlink" title="linux which命令 详解"></a>linux which命令 详解</h2><p>在Linux系统中，<code>which</code>命令用于查找指定命令的路径。它可以帮助你确定系统中使用哪个可执行文件来执行特定的命令。以下是<code>which</code>命令的基本用法和一些常见选项：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> [命令名称]</span><br></pre></td></tr></table></figure>

<h3 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
<p>这将输出 <code>ls</code> 命令的路径，告诉你系统使用哪个实际文件来执行 <code>ls</code>。</p>
<h3 id="常见选项："><a href="#常见选项：" class="headerlink" title="常见选项："></a>常见选项：</h3><ol>
<li><p><strong>-a, –all：</strong> 显示所有匹配的路径，而不仅仅是第一个匹配项。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> -a <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>-s, –silent：</strong> 无输出，只返回退出状态。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> -s <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>–skip-alias：</strong> 忽略命令的别名。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> --skip-alias <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>–skip-functions：</strong> 忽略命令的函数。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> --skip-functions <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>–show-dot：</strong> 显示当前目录中的匹配项。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> --show-dot <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>–show-tilde：</strong> 显示带有波浪号 <code>~</code> 的家目录路径。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> --show-tilde <span class="built_in">ls</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><code>which</code>命令的输出可以帮助你了解系统中命令的实际位置，有助于调试和确保你使用的是正确的可执行文件。请注意，有时候<code>type</code>命令也被用于类似的目的，它不仅显示可执行文件的路径，还会显示命令类型（例如，内建命令、别名等）。</p>
<h2 id="which"><a href="#which" class="headerlink" title="which"></a>which</h2><ul>
<li>which,用于输入命令的路径(locate a command)</li>
</ul>
<p>在Linux中，<code>which</code>命令用于定位可执行程序的路径。它用于确定给定命令的可执行文件的位置。</p>
<p>以下是<code>which</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which [options] command</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，<code>command</code>是要查找的命令。</p>
<p>以下是一些常见的<code>which</code>命令选项和用法：</p>
<ol>
<li><p>查找命令的路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which ls</span><br></pre></td></tr></table></figure>

<p>此命令将显示<code>ls</code>命令的可执行文件路径。</p>
</li>
<li><p>查找多个命令的路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which ls grep</span><br></pre></td></tr></table></figure>

<p>此命令将显示<code>ls</code>和<code>grep</code>命令的可执行文件路径。</p>
</li>
</ol>
<p><code>which</code>命令会搜索系统的<code>PATH</code>环境变量中列出的目录，以确定给定命令的可执行文件位置。它返回找到的第一个匹配的可执行文件路径。</p>
<p>请注意，<code>which</code>命令只能查找可执行程序的路径，无法查找其他类型的文件（如脚本文件或配置文件）的路径。</p>
<p><code>which</code>命令在确定命令是否存在以及确定特定命令的完整路径时非常有用。它对于解决命令不存在或多个版本的命令存在时很有帮助。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_45_expr/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_45_expr/" class="post-title-link" itemprop="url">linux_2_45_expr</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>expr命令</li>
</ul>
<h2 id="linux-expr命令-详解"><a href="#linux-expr命令-详解" class="headerlink" title="linux expr命令 详解"></a>linux expr命令 详解</h2><p><code>expr</code> 是一个用于在命令行中进行基本的数学和字符串操作的工具。它用于对表达式求值，并输出结果。以下是关于 <code>expr</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> [选项] 表达式</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><p><strong><code>LENGTH</code>：计算字符串长度。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> length <span class="string">&quot;hello&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>INDEX</code>：查找子字符串在字符串中的位置（索引从1开始）。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> index <span class="string">&quot;abcdef&quot;</span> <span class="string">&quot;cd&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>MATCH</code>：匹配字符串中的正则表达式。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> match <span class="string">&quot;12345&quot;</span> <span class="string">&#x27;\([0-9]\&#123;3\&#125;\)&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>SUBSTR</code>：提取字符串的子串。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> substr <span class="string">&quot;abcdefgh&quot;</span> 3 4</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>+</code>：加法。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> 2 + 3</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>-</code>：减法。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> 5 - 2</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>*</code>：乘法。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> 4 \* 3</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>/</code>：除法。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> 10 / 2</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>%</code>：取余。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> 10 % 3</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>计算表达式的值：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> 2 + 3</span><br></pre></td></tr></table></figure>
<p>这将输出 <code>5</code>。</p>
</li>
<li><p><strong>计算字符串长度：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> length <span class="string">&quot;hello&quot;</span></span><br></pre></td></tr></table></figure>
<p>这将输出 <code>5</code>。</p>
</li>
<li><p><strong>查找子字符串在字符串中的位置：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> index <span class="string">&quot;abcdef&quot;</span> <span class="string">&quot;cd&quot;</span></span><br></pre></td></tr></table></figure>
<p>这将输出 <code>3</code>，因为 “cd” 在字符串 “abcdef” 中的位置是3。</p>
</li>
<li><p><strong>匹配字符串中的正则表达式：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> match <span class="string">&quot;12345&quot;</span> <span class="string">&#x27;\([0-9]\&#123;3\&#125;\)&#x27;</span></span><br></pre></td></tr></table></figure>
<p>这将输出 <code>123</code>，因为正则表达式匹配了字符串的前三个数字。</p>
</li>
<li><p><strong>提取字符串的子串：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> substr <span class="string">&quot;abcdefgh&quot;</span> 3 4</span><br></pre></td></tr></table></figure>
<p>这将输出 <code>cdef</code>，提取了从位置3开始的4个字符。</p>
</li>
</ol>
<h3 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h3><p><code>expr</code> 命令用于求值表达式，并输出结果。它支持数学运算、字符串操作和正则表达式匹配。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li>在进行乘法运算时，需要使用转义字符 <code>\*</code>，以避免与 shell 中的通配符冲突。</li>
<li>在进行字符串操作时，注意使用正确的语法和参数。</li>
</ul>
<p><code>expr</code> 是一个轻量级的命令，适用于一些基本的数学和字符串操作。对于更复杂的运算和处理，可能需要使用更强大的编程语言或工具。</p>
<h2 id="linux-expr命令-常用技巧"><a href="#linux-expr命令-常用技巧" class="headerlink" title="linux expr命令 常用技巧"></a>linux expr命令 常用技巧</h2><p>以下是一些在使用 <code>expr</code> 命令时的常用技巧：</p>
<ol>
<li><p><strong>使用反引号执行命令替换：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result=`<span class="built_in">expr</span> 5 + 3`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$result</span></span><br></pre></td></tr></table></figure>
<p>使用反引号（&#96;&#96;）或 <code>$()</code> 进行命令替换，将 <code>expr</code> 命令的输出赋值给变量。</p>
</li>
<li><p><strong>避免空格错误：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result=$(<span class="built_in">expr</span> 5+3)</span><br></pre></td></tr></table></figure>
<p>注意在运算符和操作数之间加上空格，以避免语法错误。</p>
</li>
<li><p><strong>处理变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x=5</span><br><span class="line">y=3</span><br><span class="line">result=$(<span class="built_in">expr</span> <span class="variable">$x</span> + <span class="variable">$y</span>)</span><br></pre></td></tr></table></figure>
<p>可以使用变量进行运算，确保在变量和运算符之间添加适当的空格。</p>
</li>
<li><p><strong>比较数字：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ $(<span class="built_in">expr</span> 5 -eq 5) -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Equal&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>expr</code> 在 shell 脚本中进行数字比较。</p>
</li>
<li><p><strong>处理字符串长度：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="string">&quot;hello&quot;</span></span><br><span class="line">length=$(<span class="built_in">expr</span> length <span class="string">&quot;<span class="variable">$str</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>使用 <code>expr length</code> 获取字符串的长度。</p>
</li>
<li><p><strong>提取子字符串：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="string">&quot;abcdefgh&quot;</span></span><br><span class="line">substr=$(<span class="built_in">expr</span> substr <span class="string">&quot;<span class="variable">$str</span>&quot;</span> 3 4)</span><br></pre></td></tr></table></figure>
<p>使用 <code>expr substr</code> 提取字符串的子串。</p>
</li>
<li><p><strong>使用变量进行正则表达式匹配：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="string">&quot;12345&quot;</span></span><br><span class="line">match=$(<span class="built_in">expr</span> match <span class="string">&quot;<span class="variable">$str</span>&quot;</span> <span class="string">&#x27;\([0-9]\&#123;3\&#125;\)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>使用 <code>expr match</code> 对字符串进行正则表达式匹配。</p>
</li>
<li><p><strong>处理浮点数：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result=$(<span class="built_in">echo</span> <span class="string">&quot;scale=2; 5 / 3&quot;</span> | bc)</span><br></pre></td></tr></table></figure>
<p>如果需要进行浮点数运算，可以使用 <code>bc</code> 命令。</p>
</li>
</ol>
<p>这些技巧有助于更有效地使用 <code>expr</code> 命令，但需要注意的是，<code>expr</code> 主要适用于简单的数学运算和字符串操作，对于更复杂的需求可能需要其他更强大的工具。</p>
<h2 id="expr"><a href="#expr" class="headerlink" title="expr"></a>expr</h2><ul>
<li>expr, 是一个手工命令行计数器,用于在Unix&#x2F;Linux下求表达式变量的值,一般用于整数值,也可用于字符串</li>
<li>语法:<code>expr 表达式</code></li>
<li>表达式说明:<ul>
<li>用空格隔开每个项</li>
<li>用反斜杠<code>\</code>放在shell特定的字符前面</li>
<li>对包含空格和其他特殊字符的字符串要用引号括起来</li>
</ul>
</li>
</ul>
<p>在Linux中，<code>expr</code>命令用于执行基本的数学运算和字符串操作。它可以计算表达式的值并输出结果。</p>
<p>以下是<code>expr</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr expression</span><br></pre></td></tr></table></figure>

<p>其中，<code>expression</code>是要计算的表达式。</p>
<p>以下是<code>expr</code>命令常见的用法示例：</p>
<ol>
<li><p>计算两个数的和：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr 10 + 5</span><br></pre></td></tr></table></figure>

<p>此命令将计算10和5的和，并输出结果15。</p>
</li>
<li><p>执行字符串连接：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr &quot;Hello&quot; : &quot;He&quot; &quot;llo&quot;</span><br></pre></td></tr></table></figure>

<p>此命令将字符串”Hello”的前缀”He”与后缀”llo”连接起来，并输出结果”Hello”。</p>
</li>
<li><p>比较两个数的大小：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr 10 &quot;&gt;&quot; 5</span><br></pre></td></tr></table></figure>

<p>此命令将比较10和5的大小，如果10大于5，则输出结果1；否则输出结果0。</p>
</li>
</ol>
<p><code>expr</code>命令还支持其他一些运算符和操作，如减法、乘法、除法、求余等。它还可以用于处理字符串长度、子字符串提取、正则表达式匹配等操作。</p>
<p>请注意，<code>expr</code>命令的参数和操作符之间需要使用空格进行分隔。如果表达式中包含特殊字符，需要使用引号或转义字符进行处理。</p>
<p><code>expr</code>命令在Shell脚本和命令行环境中执行简单的数学计算和字符串操作时非常有用。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_43_diff/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_43_diff/" class="post-title-link" itemprop="url">linux_2_43_diff</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>diff命令</li>
</ul>
<h2 id="linux-diff命令-详解"><a href="#linux-diff命令-详解" class="headerlink" title="linux diff命令 详解"></a>linux diff命令 详解</h2><p><code>diff</code> 命令在 Linux 和类 Unix 系统上用于比较文件之间的差异。它能够逐行比较文本文件，并以可读的方式显示文件之间的不同之处。以下是关于 <code>diff</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff [选项] 文件1 文件2</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-u</code> 或 <code>--unified</code>：以统一格式显示差异。</li>
<li><code>-c</code> 或 <code>--context</code>：以上下文格式显示差异。</li>
<li><code>-r</code> 或 <code>--recursive</code>：递归比较目录中的文件。</li>
<li><code>-q</code> 或 <code>--brief</code>：仅显示文件是否不同，不显示详细差异。</li>
<li><code>-i</code> 或 <code>--ignore-case</code>：忽略大小写差异。</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>显示两个文件的差异：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>这将比较两个文件，并显示它们之间的差异。</p>
</li>
<li><p><strong>以统一格式显示差异：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -u file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>-u</code> 选项，以统一格式显示文件差异。</p>
</li>
<li><p><strong>递归比较目录中的文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -r directory1 directory2</span><br></pre></td></tr></table></figure>
<p>使用 <code>-r</code> 选项，递归比较两个目录中的文件。</p>
</li>
<li><p><strong>仅显示文件是否不同：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -q file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>-q</code> 选项，仅显示文件是否不同，不显示详细差异。</p>
</li>
<li><p><strong>忽略大小写差异：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -i file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>-i</code> 选项，忽略大小写进行文件比较。</p>
</li>
</ol>
<h3 id="示例输出："><a href="#示例输出：" class="headerlink" title="示例输出："></a>示例输出：</h3><ul>
<li><p>统一格式 (<code>-u</code> 选项) 的输出：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">--- file1.txt	2022-01-01 12:34:56.789012345 +0000</span><br><span class="line">+++ file2.txt	2022-01-01 12:34:56.789012345 +0000</span><br><span class="line">@@ -1,4 +1,4 @@</span><br><span class="line"> Line 1</span><br><span class="line"> Line 2</span><br><span class="line">-Line 3</span><br><span class="line">+Modified Line 3</span><br><span class="line"> Line 4</span><br></pre></td></tr></table></figure>
</li>
<li><p>上下文格式 (<code>-c</code> 选项) 的输出：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">***************</span><br><span class="line">*** 1,4 ****</span><br><span class="line"> Line 1</span><br><span class="line"> Line 2</span><br><span class="line"> Line 3</span><br><span class="line">! Line 4</span><br><span class="line">--- 1,4 ----</span><br><span class="line"> Line 1</span><br><span class="line"> Line 2</span><br><span class="line"> Modified Line 3</span><br><span class="line"> Line 4</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h3><p><code>diff</code> 命令逐行比较两个文本文件，并生成描述差异的文本输出。输出中以 <code>+</code> 表示新增的行，以 <code>-</code> 表示被删除的行。行前面的 <code>!</code> 标记表示差异的行。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li><code>diff</code> 命令通常用于比较文本文件，对于二进制文件可能不太适用。</li>
<li>输出的格式可以通过选项进行定制，以满足用户的需求。</li>
</ul>
<p><code>diff</code> 是一个强大的比较工具，常用于查找文件或目录之间的变化，是开发人员和系统管理员的常用工具之一。</p>
<h2 id="linux-diff命令-常用技巧"><a href="#linux-diff命令-常用技巧" class="headerlink" title="linux diff命令 常用技巧"></a>linux diff命令 常用技巧</h2><p>以下是一些在使用 <code>diff</code> 命令时常用的技巧：</p>
<ol>
<li><p><strong>使用统一格式 (<code>-u</code> 选项) 显示差异：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -u file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>统一格式更易读，通常是首选的差异显示方式。</p>
</li>
<li><p><strong>递归比较目录中的文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -r directory1 directory2</span><br></pre></td></tr></table></figure>
<p>使用 <code>-r</code> 选项，可以递归比较两个目录中的文件。</p>
</li>
<li><p><strong>使用上下文格式 (<code>-c</code> 选项) 显示差异：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -c file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>上下文格式对于显示更多上下文信息可能更有用。</p>
</li>
<li><p><strong>仅显示文件是否不同 (<code>-q</code> 选项)：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -q file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>-q</code> 选项，仅显示文件是否不同，不显示详细差异。</p>
</li>
<li><p><strong>忽略空白字符：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -b file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>-b</code> 选项，忽略空白字符的差异。</p>
</li>
<li><p><strong>忽略大小写 (<code>-i</code> 选项)：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -i file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>-i</code> 选项，忽略大小写进行文件比较。</p>
</li>
<li><p><strong>将差异输出到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff file1.txt file2.txt &gt; diff_output.txt</span><br></pre></td></tr></table></figure>
<p>将 <code>diff</code> 命令的输出保存到文件，以便后续查看或分析。</p>
</li>
<li><p><strong>使用颜色高亮显示差异：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff --color file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>通过 <code>--color</code> 选项，可以启用差异的颜色高亮显示，提高可读性。</p>
</li>
<li><p><strong>显示行号 (<code>-n</code> 选项)：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -n file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n</code> 选项，显示差异的行号。</p>
</li>
<li><p><strong>比较两个命令的输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 | diff - file.txt</span><br></pre></td></tr></table></figure>
<p>通过管道将命令的输出与文件进行比较，用于检查命令是否按预期工作。</p>
</li>
</ol>
<p>这些技巧有助于更灵活地使用 <code>diff</code> 命令，满足不同场景下的需求。</p>
<h2 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h2><ul>
<li>diff, 用于比较文件的差异</li>
<li>diff以逐行的方式,比较文本文件的异同处.如果指定要比较目录,则diff会比较目录中相同文件名的文件,但是不会比较其中子目录</li>
<li>递归比较两个文件夹之间的差异:<code>diff -r -q folder1 folder2</code><ul>
<li><code>-r</code> : 递归的比较</li>
<li><code>-q</code> : 只有在文件有差异的情况下报告</li>
</ul>
</li>
<li><code>diff</code>,常常与<code>grep</code>一起使用,筛选出想要的结果</li>
</ul>
<p>在Linux中，<code>diff</code>命令用于比较两个文件的内容并显示它们之间的差异。它可以用于比较文本文件、目录以及其他类型的文件。</p>
<p>以下是<code>diff</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff [options] file1 file2</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，<code>file1</code>和<code>file2</code>是要比较的两个文件。</p>
<p>以下是一些常见的<code>diff</code>命令选项和用法：</p>
<ol>
<li><p>比较文本文件的差异：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff file1.txt file2.txt</span><br></pre></td></tr></table></figure>

<p>此命令将比较<code>file1.txt</code>和<code>file2.txt</code>两个文本文件的内容，并显示它们之间的差异。</p>
</li>
<li><p>递归比较目录的差异：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -r dir1 dir2</span><br></pre></td></tr></table></figure>

<p>此命令将递归比较<code>dir1</code>和<code>dir2</code>两个目录及其子目录中的文件，并显示它们之间的差异。</p>
</li>
<li><p>生成可应用的补丁文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff -u file1.txt file2.txt &gt; patch.diff</span><br></pre></td></tr></table></figure>

<p>此命令将比较<code>file1.txt</code>和<code>file2.txt</code>两个文件的内容，并生成一个可应用的补丁文件<code>patch.diff</code>，以便在其他系统上应用差异。</p>
</li>
</ol>
<p><code>diff</code>命令提供了多种选项，用于控制输出格式、忽略空格或空行、显示上下文等。</p>
<p><code>diff</code>命令在版本控制系统和文件比较方面非常有用，可以帮助您查找文件之间的更改和差异。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_44_patch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_44_patch/" class="post-title-link" itemprop="url">linux_2_44_patch</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>patch命令</li>
</ul>
<h2 id="linux-patch命令-详解"><a href="#linux-patch命令-详解" class="headerlink" title="linux patch命令 详解"></a>linux patch命令 详解</h2><p><code>patch</code> 命令在 Linux 和类 Unix 系统上用于将补丁文件应用到源文件中，以进行文件的修改。补丁文件通常包含一组文件差异，<code>patch</code> 将这些差异应用到源文件，从而实现文件的更新。以下是关于 <code>patch</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patch [选项] [原始文件] &lt; 补丁文件</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-pNUM</code>：指定忽略路径中的前缀部分，通常用于跳过目录层级。</li>
<li><code>-i</code> 或 <code>--input</code>：指定补丁文件的路径。</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>应用补丁到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patch file.c &lt; patchfile.patch</span><br></pre></td></tr></table></figure>
<p>这将把 <code>patchfile.patch</code> 中的修改应用到 <code>file.c</code> 中。</p>
</li>
<li><p><strong>指定补丁文件的路径：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patch -i /path/to/patchfile.patch file.c</span><br></pre></td></tr></table></figure>
<p>使用 <code>-i</code> 选项，指定补丁文件的路径。</p>
</li>
<li><p><strong>忽略路径中的前缀部分：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patch -p1 &lt; patchfile.patch</span><br></pre></td></tr></table></figure>
<p>使用 <code>-p</code> 选项，指定忽略路径中的前缀部分，通常用于跳过目录层级。</p>
</li>
<li><p><strong>递归应用补丁到目录：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patch -p1 -i patchfile.patch -r rejected_patches -d /path/to/source</span><br></pre></td></tr></table></figure>
<p>使用 <code>-r</code> 选项，指定拒绝的补丁文件存放目录， <code>-d</code> 选项指定源文件的目录。</p>
</li>
</ol>
<h3 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h3><p><code>patch</code> 命令通过读取补丁文件，查看文件的差异并将这些差异应用到源文件中。差异通常以标准的 diff 或 unified diff 格式存在，描述了旧文件和新文件之间的变化。</p>
<h3 id="补丁文件的格式："><a href="#补丁文件的格式：" class="headerlink" title="补丁文件的格式："></a>补丁文件的格式：</h3><p><code>patch</code> 命令通常使用标准的 diff 或 unified diff 格式的补丁文件，其格式如下：</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--- oldfile.txt</span></span><br><span class="line"><span class="comment">+++ newfile.txt</span></span><br><span class="line"><span class="meta">@@ -1,4 +1,4 @@</span></span><br><span class="line"> Line 1</span><br><span class="line"> Line 2</span><br><span class="line"><span class="deletion">-Line 3</span></span><br><span class="line"><span class="addition">+Modified Line 3</span></span><br><span class="line"> Line 4</span><br></pre></td></tr></table></figure>

<ul>
<li><code>---</code> 行表示旧文件的路径。</li>
<li><code>+++</code> 行表示新文件的路径。</li>
<li><code>@@ -1,4 +1,4 @@</code> 行表示变更的行范围。</li>
</ul>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li>补丁文件通常是由 <code>diff</code> 命令生成的，因此生成补丁前后的文件内容应该是相对一致的。</li>
<li>使用 <code>patch</code> 前，建议备份原始文件，以防操作失误。</li>
</ul>
<p><code>patch</code> 命令是一个非常有用的工具，特别是在软件开发中，用于应用和管理源代码的补丁。</p>
<h2 id="patch"><a href="#patch" class="headerlink" title="patch"></a>patch</h2><ul>
<li>patch, 用于修补文件,用于不同文件打补丁.</li>
<li>patch,常与diff配合使用,diff可以用来分辨两个版本之间的差异,将旧的文件升级为新的文件时:先比较旧版本的差异,病将差异档制作成补丁文件,再由补丁文件更新旧文件</li>
</ul>
<p>在Linux中，<code>patch</code>命令用于应用补丁文件到源文件，实现对源文件的修改或更新。补丁文件通常是通过<code>diff</code>命令生成的，其中包含了对源文件所做的更改。</p>
<p>以下是<code>patch</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patch [options] [originalfile [patchfile]]</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，<code>originalfile</code>是要应用补丁的源文件，<code>patchfile</code>是补丁文件。</p>
<p>以下是一些常见的<code>patch</code>命令选项和用法：</p>
<ol>
<li><p>应用补丁到源文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patch source.c patchfile.patch</span><br></pre></td></tr></table></figure>

<p>此命令将补丁文件<code>patchfile.patch</code>应用到源文件<code>source.c</code>，并进行相应的修改。</p>
</li>
<li><p>从标准输入中读取补丁内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patch -i patchfile.patch</span><br></pre></td></tr></table></figure>

<p>此命令将从标准输入中读取补丁文件内容，并将其应用到当前目录下的相应文件。</p>
</li>
<li><p>显示补丁过程但不实际应用补丁：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patch -p1 --dry-run -i patchfile.patch</span><br></pre></td></tr></table></figure>

<p>此命令将显示应用补丁的过程，但不会实际修改文件。这对于预览补丁的影响非常有用。</p>
</li>
</ol>
<p><code>patch</code>命令还支持其他选项，如备份原始文件、忽略空白行、处理多个补丁等。</p>
<p>使用<code>patch</code>命令可以方便地将补丁应用到源文件中，以更新或修复代码。它在软件开发、版本管理和打补丁等方面非常有用。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_41_stat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_41_stat/" class="post-title-link" itemprop="url">linux_2_41_stat</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>stat命令</li>
</ul>
<h2 id="linux-stat命令-详解"><a href="#linux-stat命令-详解" class="headerlink" title="linux stat命令 详解"></a>linux stat命令 详解</h2><p><code>stat</code> 命令用于显示文件或文件系统的详细信息，包括文件的权限、拥有者、大小、修改时间等。以下是关于 <code>stat</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> [选项] 文件名</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-c</code>：自定义输出格式。</li>
<li><code>-t</code>：使用简洁的输出格式。</li>
<li><code>-f</code>：显示文件系统状态而非文件状态。</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>显示文件详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> filename</span><br></pre></td></tr></table></figure>
<p>这将显示文件的详细信息，包括文件大小、块大小、权限、拥有者、修改时间等。</p>
</li>
<li><p><strong>使用自定义输出格式：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -c <span class="string">&quot;%n Size: %s bytes Owner: %U Group: %G Permissions: %a&quot;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-c</code> 选项，可以自定义输出格式，这个例子显示了文件名、大小、拥有者、所属组和权限。</p>
</li>
<li><p><strong>使用简洁的输出格式：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -t filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-t</code> 选项，以简洁的格式显示文件的信息。</p>
</li>
<li><p><strong>显示文件系统状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -f /</span><br></pre></td></tr></table></figure>
<p>使用 <code>-f</code> 选项，可以显示文件系统的状态而不是单个文件。</p>
</li>
</ol>
<h3 id="示例输出："><a href="#示例输出：" class="headerlink" title="示例输出："></a>示例输出：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">File: &#x27;filename&#x27;</span><br><span class="line">Size: 1234          Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: 801h/2049d  Inode: 567890      Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: ( 1000/ username)   Gid: ( 1000/ groupname)</span><br><span class="line">Access: 2022-01-01 12:34:56.789012345 +0000</span><br><span class="line">Modify: 2022-01-01 12:34:56.789012345 +0000</span><br><span class="line">Change: 2022-01-01 12:34:56.789012345 +0000</span><br></pre></td></tr></table></figure>

<h3 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h3><p><code>stat</code> 命令通过读取文件系统的元数据（inode）来获取文件或文件系统的详细信息。它显示了文件的权限、拥有者、大小、链接数、inode 号码、块大小等信息。日期和时间的显示格式包括访问时间、修改时间和变更时间。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li><code>stat</code> 命令的输出可能会因操作系统和文件系统类型而有所不同。</li>
<li>有些文件系统可能不支持 <code>stat</code> 命令，或者可能需要特定的权限来执行。</li>
</ul>
<p><code>stat</code> 命令是一个非常强大的工具，可以用来查看文件和文件系统的详细信息，对于系统管理员和开发人员来说是一个很有用的诊断和调试工具。</p>
<h2 id="linux-stat命令-常用技巧"><a href="#linux-stat命令-常用技巧" class="headerlink" title="linux stat命令 常用技巧"></a>linux stat命令 常用技巧</h2><p><code>stat</code> 命令在 Linux 系统中用于查看文件或文件系统的详细信息。以下是一些 <code>stat</code> 命令的常用技巧：</p>
<ol>
<li><p><strong>显示文件详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> filename</span><br></pre></td></tr></table></figure>
<p>这是最基本的用法，显示指定文件的详细信息，包括大小、权限、拥有者、修改时间等。</p>
</li>
<li><p><strong>使用自定义输出格式：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -c <span class="string">&quot;%n Size: %s bytes Owner: %U Group: %G Permissions: %a&quot;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-c</code> 选项，可以自定义输出格式，按照自己的需求显示文件信息。</p>
</li>
<li><p><strong>仅显示文件大小：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -c <span class="string">&quot;%s&quot;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-c</code> 选项，仅显示文件的大小。</p>
</li>
<li><p><strong>显示文件的修改时间：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -c <span class="string">&quot;%y&quot;</span> filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-c</code> 选项，仅显示文件的修改时间。</p>
</li>
<li><p><strong>使用简洁格式显示文件信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -t filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-t</code> 选项，以简洁格式显示文件信息，更适合用于脚本或其他自动化任务。</p>
</li>
<li><p><strong>显示文件系统的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -f /</span><br></pre></td></tr></table></figure>
<p>使用 <code>-f</code> 选项，可以显示文件系统的详细信息，而不是单个文件。</p>
</li>
<li><p><strong>查看目录的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -c <span class="string">&quot;%n Size: %s bytes Items: %h&quot;</span> directory</span><br></pre></td></tr></table></figure>
<p>可以用 <code>stat</code> 命令查看目录的详细信息，包括目录下的项数。</p>
</li>
<li><p><strong>使用通配符查看多个文件的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -c <span class="string">&quot;%n Size: %s bytes&quot;</span> *.txt</span><br></pre></td></tr></table></figure>
<p>使用通配符，可以一次性查看多个文件的信息。</p>
</li>
<li><p><strong>将输出保存到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> filename &gt; output.txt</span><br></pre></td></tr></table></figure>
<p>将 <code>stat</code> 命令的输出保存到文件，以便后续查看或分析。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>stat</code> 命令，根据需求选择需要显示的信息以及输出格式。</p>
<h2 id="stat"><a href="#stat" class="headerlink" title="stat"></a>stat</h2><ul>
<li>也可以使用stat命令, 查看某个文件的类型信息</li>
</ul>
<p>在Linux中，<code>stat</code>命令用于显示文件或文件系统的详细信息。它提供了一种查看文件或目录的各种属性的方法，如文件大小、权限、最后访问时间、最后修改时间等。</p>
<p>以下是<code>stat</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat [options] file(s)</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，<code>file(s)</code>是要显示信息的文件或目录列表。</p>
<p>以下是一些常见的<code>stat</code>命令选项和用法：</p>
<ol>
<li><p>显示文件详细信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将显示<code>file.txt</code>文件的详细信息，包括文件大小、所属用户和组、权限等。</p>
</li>
<li><p>显示文件的最后访问时间：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat -c %x file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将仅显示<code>file.txt</code>文件的最后访问时间。</p>
</li>
<li><p>显示文件的修改时间：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat -c %y file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将仅显示<code>file.txt</code>文件的修改时间。</p>
</li>
</ol>
<p><code>stat</code>命令还支持其他一些选项，如自定义输出格式、显示文件系统信息等。</p>
<p>请注意，<code>stat</code>命令对于查看文件或目录的详细属性非常有用，特别是在需要获取文件元数据和状态信息时。它提供了比<code>ls</code>命令更详细和精确的信息。</p>
<h2 id="stat-详解"><a href="#stat-详解" class="headerlink" title="stat 详解"></a>stat 详解</h2><p><code>stat</code> 命令用于获取文件或文件系统的详细信息，包括文件大小、权限、最后访问时间、最后修改时间等。下面是 <code>stat</code> 命令的常用选项的详细解释：</p>
<ul>
<li><p><code>-c</code> 或 <code>--format=</code>：指定输出格式。可以使用 <code>%</code> 开头的占位符来表示不同的属性。例如 <code>%n</code> 表示文件名，<code>%s</code> 表示文件大小，<code>%a</code> 表示访问权限等。</p>
</li>
<li><p><code>-f</code>：以文件系统的方式显示信息，而不是文件的方式。</p>
</li>
<li><p><code>-t</code>：以简短的格式显示时间。</p>
</li>
<li><p><code>-L</code> 或 <code>--dereference</code>：对于符号链接文件，显示链接指向的文件的信息，而不是链接文件本身的信息。</p>
</li>
<li><p><code>-c</code> 或 <code>--changes</code>：仅显示发生更改的文件信息。</p>
</li>
<li><p><code>-r</code> 或 <code>--format=FORMAT</code>：指定自定义输出格式。可以使用 <code>--printf</code> 选项后跟一个格式字符串来指定输出的具体格式。</p>
</li>
<li><p><code>-s</code> 或 <code>--file-system</code>：显示文件系统的信息而不是文件的信息。</p>
</li>
<li><p><code>-x</code> 或 <code>--debug</code>：显示调试信息。</p>
</li>
<li><p><code>-h</code> 或 <code>--help</code>：显示帮助信息。</p>
</li>
</ul>
<p>这些选项可以根据具体的使用需求进行组合和调整，以获取所需的文件或文件系统的信息。</p>
<p>例如，使用以下命令获取文件 <code>example.txt</code> 的详细信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">stat</span> example.txt</span></span><br></pre></td></tr></table></figure>

<p>输出结果可能类似于：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  File: example.txt</span><br><span class="line">  Size: 1024          Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: 801h/2049d    Inode: 31474816    Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: ( 1000/   user)   Gid: ( 1000/   group)</span><br><span class="line">Access: 2023-07-04 10:15:32.555555555 +0000</span><br><span class="line">Modify: 2023-07-03 15:45:21.123456789 +0000</span><br><span class="line">Change: 2023-07-03 15:45:21.123456789 +0000</span><br><span class="line"> Birth: 2023-07-02 09:30:00.987654321 +0000</span><br></pre></td></tr></table></figure>

<p>这个输出提供了文件的名称、大小、权限、所有者、创建时间、访问时间和修改时间等信息。</p>
<p>请注意，<code>stat</code> 命令的输出格式和选项可能会根据不同的操作系统和文件系统有所不同。可以通过 <code>man stat</code> 命令来查看详细的文档和选项说明。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_47_tail/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_47_tail/" class="post-title-link" itemprop="url">linux_2_47_tail</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>tail命令</li>
</ul>
<h2 id="linux-tail命令-详解"><a href="#linux-tail命令-详解" class="headerlink" title="linux tail命令 详解"></a>linux tail命令 详解</h2><p><code>tail</code> 命令用于查看文件的末尾内容，默认显示文件的最后 10 行。它常用于实时监控日志文件，查看最新的更新。以下是关于 <code>tail</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> [选项] 文件名</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-n NUM</code> 或 <code>--lines=NUM</code>：指定显示的行数。</li>
<li><code>-f</code> 或 <code>--follow</code>：实时监控文件，显示新追加的内容。</li>
<li><code>-c NUM</code> 或 <code>--bytes=NUM</code>：指定显示的字节数。</li>
<li><code>-q</code> 或 <code>--quiet</code>：禁止显示文件名。</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>默认显示文件的最后 10 行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> filename</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示文件的最后 N 行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -n 20 filename</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>实时监控文件变化：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f filename</span><br></pre></td></tr></table></figure>
<p>在文件末尾持续显示新追加的内容，适用于监控日志文件。</p>
</li>
<li><p><strong>显示文件的最后 1KB 内容：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -c 1k filename</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>禁止显示文件名：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -q -n 5 filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-q</code> 选项，只显示行内容而不显示文件名。</p>
</li>
</ol>
<h3 id="实时监控日志的典型用法："><a href="#实时监控日志的典型用法：" class="headerlink" title="实时监控日志的典型用法："></a>实时监控日志的典型用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f /var/log/syslog</span><br></pre></td></tr></table></figure>

<p>上述命令将实时监控系统日志文件的变化，显示新追加的日志内容。</p>
<h3 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h3><p><code>tail</code> 命令通过在文件中定位到指定位置，或者通过持续读取文件末尾的内容，来显示文件的最后几行或字节。当使用 <code>-f</code> 选项时，<code>tail</code> 会持续监控文件的增长，并动态显示新追加的内容。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li><code>tail</code> 默认显示文件的最后 10 行，可以通过 <code>-n</code> 选项指定显示的行数。</li>
<li>当使用 <code>-f</code> 实时监控文件时，可以使用 <code>Ctrl + C</code> 终止监控。</li>
<li>通过 <code>-c</code> 选项可以指定以字节为单位显示文件的末尾内容。</li>
</ul>
<p><code>tail</code> 是一个简单但实用的命令，特别适用于查看和监控日志文件。在系统管理员和开发人员的日常工作中，<code>tail</code> 是一个常用的工具。</p>
<h2 id="linux-tail命令-常用技巧"><a href="#linux-tail命令-常用技巧" class="headerlink" title="linux tail命令 常用技巧"></a>linux tail命令 常用技巧</h2><p>以下是一些在使用 <code>tail</code> 命令时的常用技巧：</p>
<ol>
<li><p><strong>实时监控多个文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f file1.log file2.log</span><br></pre></td></tr></table></figure>
<p>使用 <code>tail -f</code> 同时监控多个文件，可以在日志文件切换或同时记录多个日志时非常有用。</p>
</li>
<li><p><strong>显示指定范围的行数：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -n +11 filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>+</code> 号可以显示指定范围之后的行数，上述例子显示从第11行开始到文件末尾的所有行。</p>
</li>
<li><p><strong>显示新追加的内容并保存到文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f filename | <span class="built_in">tee</span> output.log</span><br></pre></td></tr></table></figure>
<p>使用 <code>tee</code> 命令，可以实时显示新追加的内容并保存到文件中。</p>
</li>
<li><p><strong>以逆序方式显示文件内容：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tac</span> filename</span><br></pre></td></tr></table></figure>
<p>如果 <code>tac</code> 命令可用，可以以逆序方式显示文件内容，即从末尾到开头。</p>
</li>
<li><p><strong>仅显示文件末尾的几个字符：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -c 100 filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-c</code> 选项可以指定显示的字节数，上述例子显示文件末尾的100个字节。</p>
</li>
<li><p><strong>在文件内容变化时显示通知：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f filename | <span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span> notify-send <span class="string">&quot;<span class="variable">$line</span>&quot;</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>notify-send</code>（需要桌面通知支持）在文件内容发生变化时显示通知。</p>
</li>
<li><p><strong>显示文件末尾的最后修改时间：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -n 1 filename</span><br></pre></td></tr></table></figure>
<p>使用 <code>-n 1</code> 选项显示文件末尾的最后一行，通常是文件的最后修改时间。</p>
</li>
<li><p><strong>使用 awk 过滤特定列：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f access.log | awk <span class="string">&#x27;&#123;print $7, $9&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>awk</code> 过滤并显示日志文件中的特定列，上述例子显示访问日志中的第7列和第9列。</p>
</li>
<li><p><strong>显示文件的总行数：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -n +1 filename | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>
<p>使用 <code>wc -l</code> 命令可以显示文件的总行数，上述例子显示文件的实际行数。</p>
</li>
</ol>
<p>这些技巧可以让你更灵活地使用 <code>tail</code> 命令，适应不同的需求和场景。</p>
<h2 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h2><ul>
<li>tail, 用于查看文件的内容，有一个常用的参数<code>-r</code>常用于查阅正在改变的日志文件</li>
<li><code>tail -f filename</code> 会把<code>filename</code>文件里的最尾部的内容显示在屏幕上，并且不断刷新，只要filename更新就可以看到最新的文件内容</li>
<li>参数<ul>
<li><code>-f</code> : 循环读取</li>
<li><code>-q</code> : 不显示处理信息</li>
<li><code>-v</code> : 显示详细的处理信息</li>
<li><code>-c &lt;数目&gt;</code> : 显示的字节数</li>
<li><code>-n &lt;行数&gt;</code> : 显示文件的尾部n行内容</li>
</ul>
</li>
</ul>
<p>在Linux中，<code>tail</code>命令用于查看文件的末尾内容。它默认显示文件的最后10行，但也可以根据需要显示更多或更少的行数。</p>
<p>以下是<code>tail</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail [options] file</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，<code>file</code>是要查看的文件。</p>
<p>以下是一些常见的<code>tail</code>命令选项和用法：</p>
<ol>
<li><p>查看文件的最后10行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将显示<code>file.txt</code>文件的最后10行内容。</p>
</li>
<li><p>查看文件的指定行数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -n 20 file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将显示<code>file.txt</code>文件的最后20行内容。</p>
</li>
<li><p>实时监视文件的新增内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f file.txt</span><br></pre></td></tr></table></figure>

<p>此命令将持续显示<code>file.txt</code>文件的末尾内容，并随着文件的更新实时显示新增内容。</p>
</li>
</ol>
<p><code>tail</code>命令还支持其他选项，如显示文件的字节数、显示文件尾部的特定字节数、处理多个文件等。</p>
<p><code>tail</code>命令在日志文件查看、实时监控文件变化等场景下非常有用。它可以帮助您快速定位文件的末尾内容，查找关键信息或进行实时追踪。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_46_dstat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_46_dstat/" class="post-title-link" itemprop="url">linux_2_46_dstat</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>dstat命令</li>
</ul>
<h2 id="linux-dstat命令-详解"><a href="#linux-dstat命令-详解" class="headerlink" title="linux dstat命令 详解"></a>linux dstat命令 详解</h2><p><code>dstat</code> 是一个用于显示系统性能统计信息的命令行工具。它汇总了许多系统资源的统计数据，包括 CPU 使用率、内存使用情况、磁盘 I&#x2F;O、网络流量等。以下是关于 <code>dstat</code> 命令的详细解释：</p>
<h3 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h3><p>在大多数 Linux 系统中，可以使用包管理器安装 <code>dstat</code>。例如，在基于 Debian 的系统上可以使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install dstat</span><br></pre></td></tr></table></figure>

<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat [选项] [间隔时间] [次数]</span><br></pre></td></tr></table></figure>

<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-c</code>：显示 CPU 使用情况。</li>
<li><code>-m</code>：显示内存使用情况。</li>
<li><code>-d</code>：显示磁盘 I&#x2F;O。</li>
<li><code>-n</code>：显示网络流量。</li>
<li><code>-p</code>：显示进程统计信息。</li>
<li><code>-s</code>：显示系统信息。</li>
<li><code>-g</code>：显示页面交换情况。</li>
<li><code>-y</code>：显示系统负载情况。</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>默认显示所有信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat</span><br></pre></td></tr></table></figure>
<p>默认情况下，<code>dstat</code> 显示所有可用的性能统计信息。</p>
</li>
<li><p><strong>指定显示的模块：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -c -d -n</span><br></pre></td></tr></table></figure>
<p>使用 <code>-c</code>、<code>-d</code> 和 <code>-n</code> 选项指定显示 CPU 使用情况、磁盘 I&#x2F;O 和网络流量。</p>
</li>
<li><p><strong>指定间隔时间和次数：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -c -d -n 2 5</span><br></pre></td></tr></table></figure>
<p>指定每2秒更新一次，总共更新5次。</p>
</li>
<li><p><strong>显示进程统计信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -p</span><br></pre></td></tr></table></figure>
<p>使用 <code>-p</code> 选项显示进程统计信息。</p>
</li>
<li><p><strong>显示系统信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -s</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项显示系统信息。</p>
</li>
</ol>
<h3 id="示例输出："><a href="#示例输出：" class="headerlink" title="示例输出："></a>示例输出：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">----total-cpu-usage---- -dsk/total- -net/total- ---paging-- ---system--</span><br><span class="line">usr sys idl wai hiq siq| read  writ| recv  send|  in   out | int   csw </span><br><span class="line">  6   1  89   3   0   1|  15k   67k|   0     0 |   0     0 |3265  7054</span><br><span class="line">  4   1  90   4   0   1|   0    48k| 948B 2142B|   0     0 |2651  6167</span><br><span class="line">  5   1  90   3   0   1|   0     0 |   0     0 |   0     0 |2621  6069</span><br></pre></td></tr></table></figure>

<h3 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h3><p><code>dstat</code> 通过读取系统的 <code>/proc</code> 文件系统以及其他系统文件，实时地收集各种性能统计信息，并以可读性强的格式显示出来。它可以在终端中实时更新数据，也可以在后台运行。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul>
<li><code>dstat</code> 提供了许多选项，根据需求选择需要的模块，以避免信息过于庞大。</li>
<li>在使用 <code>-p</code> 选项时，可能需要 root 权限以查看其他进程的统计信息。</li>
</ul>
<p><code>dstat</code> 是一个方便的工具，用于实时监控系统的性能。它对于系统管理员、开发人员和调试人员来说是一个有用的资源。</p>
<h2 id="linux-dstat命令-常用技巧"><a href="#linux-dstat命令-常用技巧" class="headerlink" title="linux dstat命令 常用技巧"></a>linux dstat命令 常用技巧</h2><p>以下是一些在使用 <code>dstat</code> 命令时的常用技巧：</p>
<ol>
<li><p><strong>指定特定模块的显示：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -c --top-cpu</span><br></pre></td></tr></table></figure>
<p>使用 <code>--top-cpu</code> 选项，只显示 CPU 使用最高的进程信息。类似的，<code>--top-mem</code> 可以显示内存使用最高的进程信息。</p>
</li>
<li><p><strong>指定特定时间间隔和次数：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -c -d -n -s --output report.csv 5 3</span><br></pre></td></tr></table></figure>
<p>在指定时间间隔和次数内，将统计信息输出到 <code>report.csv</code> 文件中。</p>
</li>
<li><p><strong>显示磁盘 I&#x2F;O 指定分区：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -d -D sda,sdb</span><br></pre></td></tr></table></figure>
<p>使用 <code>-D</code> 选项，可以指定要监控的磁盘分区。</p>
</li>
<li><p><strong>显示网络流量指定接口：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -n -N eth0,eth1</span><br></pre></td></tr></table></figure>
<p>使用 <code>-N</code> 选项，可以指定要监控的网络接口。</p>
</li>
<li><p><strong>显示系统负载和运行进程数：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -l</span><br></pre></td></tr></table></figure>
<p>使用 <code>-l</code> 选项，显示系统负载和运行进程数。</p>
</li>
<li><p><strong>显示缓存和缓冲区使用情况：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat --vmstat</span><br></pre></td></tr></table></figure>
<p>使用 <code>--vmstat</code> 选项，显示缓存和缓冲区的使用情况。</p>
</li>
<li><p><strong>显示中断和上下文切换：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -y</span><br></pre></td></tr></table></figure>
<p>使用 <code>-y</code> 选项，显示中断和上下文切换。</p>
</li>
<li><p><strong>显示系统调用和上下文切换：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -c -y</span><br></pre></td></tr></table></figure>
<p>使用 <code>-c</code> 和 <code>-y</code> 选项，同时显示系统调用和上下文切换。</p>
</li>
<li><p><strong>在后台运行 <code>dstat</code>：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> dstat -c -d -n 5 10 &gt; dstat_output.txt &amp;</span><br></pre></td></tr></table></figure>
<p>使用 <code>nohup</code> 命令和 <code>&amp;</code> 将 <code>dstat</code> 放入后台运行，并将输出保存到文件。</p>
</li>
<li><p><strong>自定义输出格式：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat --output report.csv --noupdate -c -d -n</span><br></pre></td></tr></table></figure>
<p>使用 <code>--noupdate</code> 选项，禁止在屏幕上实时更新，适用于将输出保存到文件中。</p>
</li>
</ol>
<p>这些技巧可以使你更灵活地使用 <code>dstat</code> 命令，根据具体的监控需求进行调整。 <code>dstat</code> 提供了丰富的选项，适用于多种系统监控场景。</p>
<h2 id="dstat"><a href="#dstat" class="headerlink" title="dstat"></a>dstat</h2><ul>
<li><code>versatile tool for generating system resource statistics.(多功能系统资源统计生成工具)</code></li>
<li>检测界面各参数含义（部分）<ul>
<li>Procs<ul>
<li><code>r</code> : 运行的和等待（CPU时间片）运行的进程，这个值也可以判断是否需要增加CPU</li>
<li><code>b</code> : 处于不可中断状态的进程数，常见的情况是由IO引起的</li>
</ul>
</li>
<li>Memory<ul>
<li><code>swpd</code> : 切换到交换内存上的内存（默认以KB为单位）。如果swpd的值不为0，</li>
<li><code>free</code> : 空闲的物理内存</li>
<li><code>buff</code> : 作为buffer cache的内存，对块设备的读写进行缓冲</li>
<li><code>cache</code>: 作为page cache 的内存，文件系统的cache。</li>
</ul>
</li>
<li>Swap<ul>
<li><code>si</code> : 交换内存使用，由磁盘调入内存</li>
<li><code>so</code> : 交换内存使用，由内存调入磁盘</li>
</ul>
</li>
<li>磁盘IO<ul>
<li><code>bi</code> : 从块设备读入的数据总量（读磁盘）</li>
<li><code>bo</code> : 写入到块设备的数据总量 (写磁盘)</li>
</ul>
</li>
<li>System<ul>
<li><code>in</code> : 每秒产生的中断次数</li>
<li><code>cs</code> : 每秒产生的上下文切换次数</li>
</ul>
</li>
<li>Cpu<ul>
<li><code>usr</code> : 用户进程消耗的CPU时间百分比</li>
<li><code>sys</code> : 内核进程消耗的CPU时间百分比</li>
<li><code>wai</code> : IO等待消耗的CPU时间百分比</li>
<li><code>wai</code> : CPU处在空间状态时间百分比</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>在Linux中，<code>dstat</code>命令用于实时监视系统资源的使用情况。它提供了对CPU、内存、磁盘、网络等资源的详细统计信息，并以交互式方式显示结果。</p>
<p>以下是<code>dstat</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat [options]</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，用于指定要显示的资源和其他配置。</p>
<p>以下是一些常见的<code>dstat</code>命令选项和用法：</p>
<ol>
<li><p>显示默认的系统资源统计信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat</span><br></pre></td></tr></table></figure>

<p>此命令将以默认配置显示实时的CPU、内存、磁盘和网络统计信息。</p>
</li>
<li><p>指定要显示的资源：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -c -m -d</span><br></pre></td></tr></table></figure>

<p>此命令将只显示CPU使用情况、内存使用情况和磁盘活动的统计信息。</p>
</li>
<li><p>指定刷新间隔：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dstat -r 5</span><br></pre></td></tr></table></figure>

<p>此命令将每隔5秒刷新一次统计信息。</p>
</li>
</ol>
<p><code>dstat</code>命令还支持其他一些选项，如指定输出格式、显示进程统计信息、监视网络连接等。</p>
<p>使用<code>dstat</code>命令可以方便地监视系统资源的使用情况，帮助识别性能瓶颈和优化系统配置。它特别适用于在终端环境中实时查看系统的运行状态。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_50_loginctl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_50_loginctl/" class="post-title-link" itemprop="url">linux_2_50_loginctl</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>loginctl命令</li>
</ul>
<h2 id="linux-loginctl命令-详解"><a href="#linux-loginctl命令-详解" class="headerlink" title="linux loginctl命令 详解"></a>linux loginctl命令 详解</h2><p><code>loginctl</code> 是一个用于查看和管理用户登录会话的 systemd 工具。它提供了一种方式来检查和控制登录到系统的用户，以及相关的会话和底层的 seat、控制组（cgroup）等信息。以下是一些常用的 <code>loginctl</code> 命令以及它们的详解：</p>
<ol>
<li><p><strong>列出当前登录的用户：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-sessions</span><br></pre></td></tr></table></figure>
<p>列出当前系统上的用户登录会话。</p>
</li>
<li><p><strong>显示所有座位（seat）信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-seats</span><br></pre></td></tr></table></figure>
<p>列出系统上所有的座位，一个座位通常对应一个物理控制台或虚拟控制台。</p>
</li>
<li><p><strong>显示指定用户的登录会话信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定用户登录会话的详细信息，其中 <code>&lt;session_id&gt;</code> 是登录会话的 ID。</p>
</li>
<li><p><strong>显示座位的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-seat &lt;seat_id&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定座位的详细信息，其中 <code>&lt;seat_id&gt;</code> 是座位的 ID。</p>
</li>
<li><p><strong>显示用户的座位信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-user &lt;user_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定用户的座位信息，其中 <code>&lt;user_name&gt;</code> 是用户名。</p>
</li>
<li><p><strong>显示所有活动的座位和登录会话：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-users</span><br></pre></td></tr></table></figure>
<p>列出当前系统上所有活动的用户及其座位信息。</p>
</li>
<li><p><strong>结束用户的登录会话：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl terminate-session &lt;session_id&gt;</span><br></pre></td></tr></table></figure>
<p>结束指定用户的登录会话，其中 <code>&lt;session_id&gt;</code> 是登录会话的 ID。</p>
</li>
<li><p><strong>结束座位上的所有登录会话：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl terminate-seat &lt;seat_id&gt;</span><br></pre></td></tr></table></figure>
<p>结束指定座位上的所有登录会话，其中 <code>&lt;seat_id&gt;</code> 是座位的 ID。</p>
</li>
<li><p><strong>显示控制组（cgroup）信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt; -p ControlGroup</span><br></pre></td></tr></table></figure>
<p>显示指定用户登录会话所属的 cgroup。</p>
</li>
<li><p><strong>显示登录会话的相关进程信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl session-status &lt;session_id&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定用户登录会话的进程和资源信息。</p>
</li>
<li><p><strong>以树状结构显示用户登录信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl tree</span><br></pre></td></tr></table></figure>
<p>以树状结构显示用户登录信息，包括座位、用户和登录会话的层次结构。</p>
</li>
</ol>
<p><code>loginctl</code> 提供了一种方便的方式来查看和管理用户登录会话，尤其在多用户环境中或涉及到控制台切换的情况下非常有用。通过这些命令，管理员可以实时监控用户的登录情况，同时也可以进行会话的管理和控制。</p>
<h2 id="linux-loginctl命令-常用技巧"><a href="#linux-loginctl命令-常用技巧" class="headerlink" title="linux loginctl命令 常用技巧"></a>linux loginctl命令 常用技巧</h2><p>以下是一些在使用 <code>loginctl</code> 命令时的常用技巧：</p>
<ol>
<li><p><strong>结合 <code>--output</code> 选项显示指定字段：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt; --output=FIELD</span><br></pre></td></tr></table></figure>
<p>使用 <code>--output</code> 选项可以只显示指定的字段，替换 <code>&lt;session_id&gt;</code> 为相应的登录会话 ID，<code>FIELD</code> 为要显示的字段，例如 <code>State</code>、<code>User</code>、<code>Seat</code> 等。</p>
</li>
<li><p><strong>使用 <code>--value</code> 选项仅显示值而不显示字段名：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt; --value</span><br></pre></td></tr></table></figure>
<p>使用 <code>--value</code> 选项可以只显示字段的值而不显示字段名。</p>
</li>
<li><p><strong>显示详细的用户信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-user &lt;user_name&gt; --all</span><br></pre></td></tr></table></figure>
<p>使用 <code>--all</code> 选项可以显示更详细的用户信息，包括座位、UID、GID 等。</p>
</li>
<li><p><strong>过滤显示活动用户的座位信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-users --property=Seats</span><br></pre></td></tr></table></figure>
<p>使用 <code>--property</code> 选项可以过滤显示用户信息中的特定属性，如 <code>Seats</code>。</p>
</li>
<li><p><strong>结合 <code>grep</code> 进行筛选：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-sessions | grep &lt;filter_condition&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 命令结合 <code>list-sessions</code> 可以根据某个条件过滤显示登录会话。</p>
</li>
<li><p><strong>使用 <code>--quiet</code> 选项减少输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl list-users --quiet</span><br></pre></td></tr></table></figure>
<p>使用 <code>--quiet</code> 选项可以减少输出，仅显示关键信息。</p>
</li>
<li><p><strong>显示登录会话的最近活动时间：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl show-session &lt;session_id&gt; -p IdletimeHint</span><br></pre></td></tr></table></figure>
<p>使用 <code>-p</code> 选项可以指定显示特定属性，例如 <code>IdletimeHint</code> 显示登录会话的最近空闲时间。</p>
</li>
<li><p><strong>显示用户登录会话的进程信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl session-status &lt;session_id&gt; --full</span><br></pre></td></tr></table></figure>
<p>使用 <code>--full</code> 选项可以显示更详细的用户登录会话进程信息。</p>
</li>
<li><p><strong>以 JSON 格式输出信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loginctl --quiet --output=json list-users</span><br></pre></td></tr></table></figure>
<p>使用 <code>--output=json</code> 选项可以以 JSON 格式输出信息，方便后续处理。</p>
</li>
<li><p><strong>结合 <code>watch</code> 实时监控：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 loginctl list-sessions</span><br></pre></td></tr></table></figure>
<p>使用 <code>watch</code> 命令可以实时监控登录会话的变化，每秒更新一次。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>loginctl</code> 命令，根据实际需求定制输出，过滤信息，以及实时监控用户登录情况。记住根据具体情况选择合适的选项和参数。</p>
<h2 id="loginctl"><a href="#loginctl" class="headerlink" title="loginctl"></a>loginctl</h2><p><code>loginctl</code> 是一个用于管理登录会话和用户登录状态的命令行工具。它是 systemd 的一部分，用于控制 Linux 系统上的用户登录和会话管理。</p>
<p>以下是一些常用的 <code>loginctl</code> 命令及其功能：</p>
<ul>
<li><code>loginctl list-sessions</code>：列出当前活动的登录会话。它会显示每个会话的 ID、用户、登录时间等信息。</li>
<li><code>loginctl show-session &lt;session_id&gt;</code>：显示指定会话的详细信息，包括会话状态、登录用户、登录时间等。</li>
<li><code>loginctl list-users</code>：列出当前活动的用户。它会显示每个用户的 ID、用户名等信息。</li>
<li><code>loginctl show-user &lt;user_id&gt;</code>：显示指定用户的详细信息，包括用户状态、默认会话、上次登录时间等。</li>
<li><code>loginctl session-status</code>：显示当前登录用户的会话状态和详细信息。</li>
<li><code>loginctl user-status</code>：显示当前用户的状态和详细信息。</li>
<li><code>loginctl lock-session</code>：锁定当前会话。这会使屏幕进入锁定状态，要解锁屏幕，需要提供用户密码。</li>
<li><code>loginctl unlock-session</code>：解锁当前会话。这会解除屏幕锁定状态。</li>
</ul>
<p>除了上述命令之外，<code>loginctl</code> 还提供其他一些管理登录会话和用户的功能，如关闭用户会话、终止登录会话、设置默认会话等。你可以通过 <code>man loginctl</code> 命令查看更多详细信息和可用选项。</p>
<p>需要注意的是，<code>loginctl</code> 命令需要 root 或具有适当权限的用户才能执行。它在使用 systemd 作为 init 系统的 Linux 发行版中可用。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_52_lsmod/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_52_lsmod/" class="post-title-link" itemprop="url">linux_2_52_lsmod</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>lsmod命令</li>
</ul>
<h2 id="linux-lsmod命令-详解"><a href="#linux-lsmod命令-详解" class="headerlink" title="linux lsmod命令 详解"></a>linux lsmod命令 详解</h2><p><code>lsmod</code> 命令用于列出当前加载在 Linux 内核中的模块（也称为内核模块或驱动程序）。以下是关于 <code>lsmod</code> 命令的详细说明：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod</span><br></pre></td></tr></table></figure>

<h3 id="参数说明："><a href="#参数说明：" class="headerlink" title="参数说明："></a>参数说明：</h3><ul>
<li><strong>无参数：</strong> 默认情况下，<code>lsmod</code> 将列出所有已加载的内核模块及其相关信息。</li>
</ul>
<h3 id="输出信息的列说明："><a href="#输出信息的列说明：" class="headerlink" title="输出信息的列说明："></a>输出信息的列说明：</h3><ol>
<li><strong>Module：</strong> 内核模块的名称。</li>
<li><strong>Size：</strong> 内核模块占用的内存大小（以字节为单位）。</li>
<li><strong>Used by：</strong> 使用该模块的其他模块或进程的计数。</li>
<li><strong>References：</strong> 内核模块的引用计数，表示有多少个内核对象正在使用该模块。</li>
</ol>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ lsmod</span><br><span class="line">Module                  Size  Used by</span><br><span class="line">nls_utf8               16384  1</span><br><span class="line">isofs                  49152  1</span><br><span class="line">udf                    98304  0</span><br><span class="line">crc_itu_t              16384  1 udf</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="详细解释："><a href="#详细解释：" class="headerlink" title="详细解释："></a>详细解释：</h3><ul>
<li><strong>Module：</strong> 列出已加载模块的名称。</li>
<li><strong>Size：</strong> 显示每个模块占用内存的大小。</li>
<li><strong>Used by：</strong> 显示使用该模块的其他模块或进程的计数。</li>
<li><strong>References：</strong> 显示模块的引用计数，表示有多少个内核对象正在使用该模块。</li>
</ul>
<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><strong>-h, –help：</strong> 显示帮助信息。</li>
<li><strong>-V, –version：</strong> 显示命令版本信息。</li>
</ul>
<h3 id="使用示例："><a href="#使用示例：" class="headerlink" title="使用示例："></a>使用示例：</h3><ol>
<li><p><strong>显示模块详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep &lt;module_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 过滤特定模块的详细信息。</p>
</li>
<li><p><strong>按模块大小排序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | <span class="built_in">sort</span> -k2 -n</span><br></pre></td></tr></table></figure>
<p>使用 <code>sort</code> 命令按模块大小排序。</p>
</li>
<li><p><strong>只显示已使用的模块：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep -v <span class="string">&quot;^$&quot;</span> | <span class="built_in">tail</span> -n +2</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 和 <code>tail</code> 过滤并排除无效行，只显示已使用的模块。</p>
</li>
</ol>
<p><code>lsmod</code> 命令对于了解系统当前加载的内核模块非常有用，可以在排查硬件或软件问题时提供有关系统状态的重要信息。</p>
<h2 id="lsmod"><a href="#lsmod" class="headerlink" title="lsmod"></a>lsmod</h2><p><code>lsmod</code> 是 Linux 系统上的一个命令行工具，用于列出当前加载的内核模块（驱动程序）。它可以显示系统中已加载的内核模块及其关联的信息。下面是对 <code>lsmod</code> 命令的详细解释：</p>
<ol>
<li><p><code>lsmod</code>：直接运行 <code>lsmod</code> 命令将列出当前加载的所有内核模块。</p>
</li>
<li><p><code>lsmod | less</code>：通过管道将 <code>lsmod</code> 的输出传递给 <code>less</code> 命令，以便在一页一页地浏览模块列表。</p>
</li>
<li><p><code>lsmod | grep &lt;pattern&gt;</code>：使用 <code>grep</code> 命令可以在模块列表中搜索特定模块或模块名称的模式匹配。例如，<code>lsmod | grep snd</code> 将显示与 “snd” 相关的内核模块。</p>
</li>
<li><p><code>lsmod -t</code>：使用 <code>-t</code> 选项可以按模块的使用计数对模块进行排序，并将最常使用的模块显示在前面。</p>
</li>
<li><p><code>lsmod -r</code>：使用 <code>-r</code> 选项可以反向排序模块列表，以显示使用计数最低的模块。</p>
</li>
<li><p><code>lsmod -v</code>：使用 <code>-v</code> 选项可以显示更详细的模块信息，包括模块的大小、依赖关系和状态等。</p>
</li>
<li><p><code>lsmod -h</code> 或 <code>lsmod --help</code>：显示 <code>lsmod</code> 命令的帮助信息，包括可用选项和用法示例。</p>
</li>
</ol>
<p>通过 <code>lsmod</code> 命令，你可以获取有关当前加载的内核模块的信息。这对于了解系统上使用的驱动程序、模块之间的依赖关系以及进行故障排除和性能优化等操作非常有用。请注意，你可能需要以超级用户权限（root 或使用 <code>sudo</code> 命令）运行 <code>lsmod</code> 命令，以便查看完整的模块列表。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_49_systemctl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_49_systemctl/" class="post-title-link" itemprop="url">linux_2_49_systemctl</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>systemctl命令</li>
</ul>
<h2 id="linux-systemctl命令-详解"><a href="#linux-systemctl命令-详解" class="headerlink" title="linux systemctl命令 详解"></a>linux systemctl命令 详解</h2><p><code>systemctl</code> 是 Linux 系统中用于管理系统服务（system services）和套接字（sockets）的命令。它是 systemd 系统管理守护进程的一部分，负责启动、停止、重启和管理系统服务。以下是一些常用的 <code>systemctl</code> 命令以及它们的详解：</p>
<ol>
<li><p><strong>启动一个服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>启动指定名称的服务。</p>
</li>
<li><p><strong>停止一个服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>停止指定名称的服务。</p>
</li>
<li><p><strong>重启一个服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>重启指定名称的服务。</p>
</li>
<li><p><strong>查看服务状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定名称的服务的当前状态，包括是否正在运行以及相关的信息。</p>
</li>
<li><p><strong>启用服务开机自启：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>设置指定名称的服务在系统启动时自动启动。</p>
</li>
<li><p><strong>禁用服务开机自启：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>取消指定名称的服务在系统启动时自动启动。</p>
</li>
<li><p><strong>显示所有已加载的服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-units --<span class="built_in">type</span>=service</span><br></pre></td></tr></table></figure>
<p>列出所有已加载的服务及其状态。</p>
</li>
<li><p><strong>显示所有已启用的服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-unit-files --<span class="built_in">type</span>=service | grep enabled</span><br></pre></td></tr></table></figure>
<p>列出所有已启用的服务。</p>
</li>
<li><p><strong>显示服务的依赖关系：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-dependencies &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定服务的依赖关系。</p>
</li>
<li><p><strong>重新加载服务配置：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl reload &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>重新加载指定服务的配置文件，不会停止服务。</p>
</li>
<li><p><strong>显示系统的引导目标（target）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl get-default</span><br></pre></td></tr></table></figure>
<p>显示系统当前的引导目标。</p>
</li>
<li><p><strong>更改系统的引导目标：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl set-default &lt;target_name&gt;</span><br></pre></td></tr></table></figure>
<p>设置系统的引导目标。</p>
</li>
</ol>
<p>这些是一些常见的 <code>systemctl</code> 命令，可以帮助你管理和维护系统服务。通过结合这些命令，你可以轻松地启动、停止、重启服务，管理它们的开机自启设置，并查看相关的状态和依赖关系。</p>
<h2 id="linux-systemctl命令-常用技巧"><a href="#linux-systemctl命令-常用技巧" class="headerlink" title="linux systemctl命令 常用技巧"></a>linux systemctl命令 常用技巧</h2><p>除了基本的 <code>systemctl</code> 命令之外，以下是一些常用的技巧和进阶用法：</p>
<ol>
<li><p><strong>模糊搜索服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-units --<span class="built_in">type</span>=service | grep &lt;keyword&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 命令结合 <code>list-units</code> 来进行模糊搜索服务，替换 <code>&lt;keyword&gt;</code> 为你感兴趣的关键字。</p>
</li>
<li><p><strong>显示服务的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl show &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示指定服务的详细信息，包括配置文件路径、依赖关系等。</p>
</li>
<li><p><strong>查看引导目标的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl show default.target</span><br></pre></td></tr></table></figure>
<p>显示当前引导目标的详细信息。</p>
</li>
<li><p><strong>过滤显示服务状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --state=active</span><br></pre></td></tr></table></figure>
<p>使用 <code>--state</code> 选项过滤显示服务的状态，例如，只显示正在运行的服务。</p>
</li>
<li><p><strong>查看服务的日志：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>journalctl</code> 命令查看指定服务的日志，替换 <code>&lt;service_name&gt;</code> 为你感兴趣的服务。</p>
</li>
<li><p><strong>查看最近的引导日志：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -xe</span><br></pre></td></tr></table></figure>
<p>查看最近的引导日志，用于排查系统启动时可能遇到的问题。</p>
</li>
<li><p><strong>查看引导目标的依赖关系：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-dependencies multi-user.target</span><br></pre></td></tr></table></figure>
<p>显示指定引导目标的依赖关系。</p>
</li>
<li><p><strong>使用通配符进行操作：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart <span class="string">&#x27;nginx*&#x27;</span></span><br></pre></td></tr></table></figure>
<p>使用通配符 <code>*</code> 来一次性操作符合条件的多个服务。</p>
</li>
<li><p><strong>查看系统启动时间：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd-analyze</span><br></pre></td></tr></table></figure>
<p>查看系统的启动时间及关键步骤，可以使用 <code>systemd-analyze blame</code> 查看各个服务的启动耗时。</p>
</li>
<li><p><strong>启动失败服务的故障排查：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status &lt;service_name&gt; -l</span><br></pre></td></tr></table></figure>
<p>使用 <code>-l</code> 选项显示更多详细的日志信息，有助于排查启动失败的服务问题。</p>
</li>
<li><p><strong>使用用户级服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --user start &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>对于用户级服务，可以使用 <code>--user</code> 选项来管理。</p>
</li>
</ol>
<p>这些技巧可以帮助你更高效地使用 <code>systemctl</code> 命令，进行服务管理和故障排查。记住在使用系统管理命令时要小心，确保了解命令的影响和安全性。</p>
<h2 id="linux-systemctl命令-高级技巧"><a href="#linux-systemctl命令-高级技巧" class="headerlink" title="linux systemctl命令 高级技巧"></a>linux systemctl命令 高级技巧</h2><p>以下是一些 <code>systemctl</code> 命令的高级技巧，适用于更深入的系统管理和故障排查：</p>
<ol>
<li><p><strong>使用 <code>--quiet</code> 选项：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --quiet start &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>--quiet</code> 选项可以使 <code>systemctl</code> 命令输出更加简洁，只显示关键信息。</p>
</li>
<li><p><strong>使用 <code>--failed</code> 选项查看失败的服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --failed</span><br></pre></td></tr></table></figure>
<p>列出所有启动失败的服务，方便快速定位问题。</p>
</li>
<li><p><strong>查看服务的所有相关日志：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u &lt;service_name&gt; --no-pager</span><br></pre></td></tr></table></figure>
<p>使用 <code>--no-pager</code> 选项可以直接在终端中显示所有相关日志，而不是通过分页器。</p>
</li>
<li><p><strong>手动启动服务：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --no-pager --quiet start &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>--no-pager</code> 选项可以避免 <code>systemctl</code> 命令使用分页器，而 <code>--quiet</code> 则可以减少输出。</p>
</li>
<li><p><strong>显示服务的详细依赖树：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-dependencies --all &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>显示服务的详细依赖树，包括所有被依赖的服务。</p>
</li>
<li><p><strong>使用 <code>--force</code> 选项强制操作：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --force restart &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>--force</code> 选项可以强制执行某些操作，如强制重启服务。</p>
</li>
<li><p><strong>查看系统引导的时间线：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd-analyze plot &gt; timeline.svg</span><br></pre></td></tr></table></figure>
<p>生成引导时间线图，以 SVG 格式保存在文件中，用于可视化系统引导的整个过程。</p>
</li>
<li><p><strong>查看服务启动的时间线：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd-analyze critical-chain &lt;service_name&gt;</span><br></pre></td></tr></table></figure>
<p>查看指定服务启动所花费的时间和关键步骤。</p>
</li>
<li><p><strong>查看用户单元的状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --user status</span><br></pre></td></tr></table></figure>
<p>查看用户级服务单元的状态，包括用户自定义的服务。</p>
</li>
<li><p><strong>查看服务单元的所有属性：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl show &lt;service_name&gt; --all</span><br></pre></td></tr></table></figure>
<p>显示指定服务单元的所有属性，包括默认值和用户自定义值。</p>
</li>
<li><p><strong>使用 <code>systemd-cgtop</code> 监控进程和资源：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemd-cgtop</span><br></pre></td></tr></table></figure>
<p>以实时方式监控系统中的控制组（cgroup）信息，包括进程数、CPU 使用情况等。</p>
</li>
</ol>
<p>这些高级技巧可以帮助你更深入地理解和利用 <code>systemctl</code> 命令，用于更复杂的系统管理任务和故障排查。请确保在使用这些命令时理解其影响，并根据需要适度使用。</p>
<h2 id="systemctl"><a href="#systemctl" class="headerlink" title="systemctl"></a>systemctl</h2><p>Systemd 是 Linux 系统中广泛使用的 init 系统和服务管理器。<code>systemctl</code> 是 Systemd 的主要命令，用于管理系统服务。下面是一些常用的 <code>systemctl</code> 命令及其功能：</p>
<ol>
<li><p>启动和停止服务：</p>
<ul>
<li>启动一个服务：<code>sudo systemctl start servicename</code></li>
<li>停止一个服务：<code>sudo systemctl stop servicename</code></li>
<li>重启一个服务：<code>sudo systemctl restart servicename</code></li>
<li>查看服务的状态：<code>sudo systemctl status servicename</code></li>
</ul>
</li>
<li><p>禁用和启用服务的自启动：</p>
<ul>
<li>禁用一个服务的自启动：<code>sudo systemctl disable servicename</code></li>
<li>启用一个服务的自启动：<code>sudo systemctl enable servicename</code></li>
</ul>
</li>
<li><p>查看服务列表：</p>
<ul>
<li>列出所有运行中的服务：<code>sudo systemctl list-units --type=service --state=running</code></li>
<li>列出所有已启用的服务：<code>sudo systemctl list-unit-files --type=service --state=enabled</code></li>
</ul>
</li>
<li><p>查看日志：</p>
<ul>
<li>查看一个服务的日志：<code>sudo journalctl -u servicename</code></li>
<li>查看系统日志：<code>sudo journalctl</code></li>
</ul>
</li>
<li><p>查看和切换系统运行级别（target）：</p>
<ul>
<li>查看当前运行级别：<code>sudo systemctl get-default</code></li>
<li>切换运行级别到图形界面：<code>sudo systemctl set-default graphical.target</code></li>
<li>切换运行级别到多用户文本界面：<code>sudo systemctl set-default multi-user.target</code></li>
</ul>
</li>
<li><p>重新加载 Systemd 配置：</p>
<ul>
<li>重新加载 Systemd 配置：<code>sudo systemctl daemon-reload</code></li>
</ul>
</li>
</ol>
<p>这些是一些常见的 <code>systemctl</code> 命令及其功能。<code>systemctl</code> 命令还有其他一些选项和功能，你可以使用 <code>man systemctl</code> 命令来查看完整的 <code>systemctl</code> 命令手册。</p>
<p>Systemd 提供了强大的服务管理功能，可以帮助你启动、停止、管理和监控系统服务。使用 <code>systemctl</code> 命令可以方便地执行这些操作，并管理系统的运行级别和自启动行为。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_51_lspci/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_51_lspci/" class="post-title-link" itemprop="url">linux_2_51_lspci</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>lspci命令</li>
</ul>
<h2 id="linux-lspci命令-详解"><a href="#linux-lspci命令-详解" class="headerlink" title="linux lspci命令 详解"></a>linux lspci命令 详解</h2><p><code>lspci</code> 是 Linux 系统中用于列出所有 PCI（Peripheral Component Interconnect）总线上的设备信息的命令。PCI 是一种计算机总线标准，用于连接计算机内部的硬件设备。以下是一些常用的 <code>lspci</code> 命令及其详解：</p>
<ol>
<li><p><strong>列出所有 PCI 设备的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci</span><br></pre></td></tr></table></figure>
<p>不带任何选项直接运行 <code>lspci</code>，将列出系统中所有 PCI 设备的详细信息，包括设备的厂商、型号、设备 ID、驱动程序等。</p>
</li>
<li><p><strong>只显示设备的类别和描述：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -nn</span><br></pre></td></tr></table></figure>
<p>使用 <code>-nn</code> 选项可以只显示设备的类别和描述，而不显示设备的厂商和型号名称。</p>
</li>
<li><p><strong>显示详细信息，包括设备的类别、描述、厂商和型号：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -v</span><br></pre></td></tr></table></figure>
<p>使用 <code>-v</code> 选项可以显示更详细的信息，包括设备的类别、描述、厂商、型号以及设备的状态等。</p>
</li>
<li><p><strong>只显示设备的总线信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -m</span><br></pre></td></tr></table></figure>
<p>使用 <code>-m</code> 选项可以只显示设备的总线信息，将输出用机器可读的格式显示。</p>
</li>
<li><p><strong>只显示指定厂商的设备信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -d &lt;vendor_id&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>-d</code> 选项可以只显示指定厂商（Vendor）的设备信息，其中 <code>&lt;vendor_id&gt;</code> 是厂商的 ID。</p>
</li>
<li><p><strong>只显示指定设备的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -s &lt;slot&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项可以只显示指定槽位（Slot）上的设备信息，其中 <code>&lt;slot&gt;</code> 是槽位的位置。</p>
</li>
<li><p><strong>以详细格式显示指定设备的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -vv -s &lt;slot&gt;</span><br></pre></td></tr></table></figure>
<p>结合 <code>-vv</code> 选项可以以更详细的格式显示指定槽位上的设备信息。</p>
</li>
<li><p><strong>显示设备和驱动程序的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -k</span><br></pre></td></tr></table></figure>
<p>使用 <code>-k</code> 选项可以显示设备及其关联的内核模块（驱动程序）的信息。</p>
</li>
<li><p><strong>以总线路径显示设备信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -t</span><br></pre></td></tr></table></figure>
<p>使用 <code>-t</code> 选项可以以总线路径的形式显示设备信息，显示设备之间的连接关系。</p>
</li>
<li><p><strong>显示 PCI Express 设备的链路状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -e</span><br></pre></td></tr></table></figure>
<p>使用 <code>-e</code> 选项可以显示 PCI Express 设备的链路状态，包括链路速度、宽度等信息。</p>
</li>
<li><p><strong>以 JSON 格式输出信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -x -json</span><br></pre></td></tr></table></figure>
<p>使用 <code>-x</code> 选项可以显示十六进制的寄存器内容，而 <code>-json</code> 选项以 JSON 格式输出信息。</p>
</li>
</ol>
<p>这些是 <code>lspci</code> 命令的一些常用选项，可以根据具体的需求来选择合适的选项，以获取有关系统中 PCI 设备的详细信息。</p>
<h2 id="linux-lspci命令-常用技巧"><a href="#linux-lspci命令-常用技巧" class="headerlink" title="linux lspci命令 常用技巧"></a>linux lspci命令 常用技巧</h2><p>以下是在使用 <code>lspci</code> 命令时的一些常用技巧，这些技巧可以帮助你更灵活地查看和分析 PCI 设备信息：</p>
<ol>
<li><p><strong>使用 <code>grep</code> 过滤信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep &lt;keyword&gt;</span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 命令可以过滤包含特定关键字的 PCI 设备信息，方便快速查找所需信息。</p>
</li>
<li><p><strong>显示所有网络设备：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep -i network</span><br></pre></td></tr></table></figure>
<p>使用 <code>-i</code> 选项可以忽略大小写，结合 <code>grep</code> 可以只显示与网络相关的 PCI 设备信息。</p>
</li>
<li><p><strong>显示所有显卡设备：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep -i vga</span><br></pre></td></tr></table></figure>
<p>结合 <code>grep</code> 可以只显示与显卡相关的 PCI 设备信息。</p>
</li>
<li><p><strong>显示设备的详细信息和驱动程序：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -v -nnk</span><br></pre></td></tr></table></figure>
<p>结合 <code>-v</code>、<code>-nn</code> 和 <code>-k</code> 选项可以显示设备的详细信息和关联的内核模块（驱动程序）。</p>
</li>
<li><p><strong>显示设备的总线路径和类别信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -t -nn</span><br></pre></td></tr></table></figure>
<p>结合 <code>-t</code> 和 <code>-nn</code> 选项可以显示设备的总线路径和设备类别信息。</p>
</li>
<li><p><strong>以 CSV 格式输出信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -mm</span><br></pre></td></tr></table></figure>
<p>使用 <code>-mm</code> 选项可以以 CSV 格式输出信息，方便后续处理。</p>
</li>
<li><p><strong>只显示设备的总线信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -m | awk -F<span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;print $1, $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>结合 <code>awk</code> 命令可以只显示设备的总线信息，提取第一列和第二列的信息。</p>
</li>
<li><p><strong>查看 PCI Express 设备的链路速度和宽度：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -vv | grep -i <span class="string">&quot;LnkSta:\|LnkCap:&quot;</span></span><br></pre></td></tr></table></figure>
<p>结合 <code>-vv</code> 选项可以显示 PCI Express 设备的链路状态和能力信息，用于了解设备的性能。</p>
</li>
<li><p><strong>显示设备的 PCI Express 版本信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -vv | grep -i <span class="string">&quot;PCIe&quot;</span></span><br></pre></td></tr></table></figure>
<p>结合 <code>-vv</code> 选项可以显示设备的 PCI Express 版本信息。</p>
</li>
<li><p><strong>使用 <code>cut</code> 提取特定列：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | <span class="built_in">cut</span> -d<span class="string">&#x27; &#x27;</span> -f1,2,3</span><br></pre></td></tr></table></figure>
<p>使用 <code>cut</code> 命令可以提取指定列，例如提取设备的总线号、设备号和函数号。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>lspci</code> 命令，根据实际需求选择合适的选项和工具，以便更方便地查看和分析 PCI 设备信息。</p>
<h2 id="lspci"><a href="#lspci" class="headerlink" title="lspci"></a>lspci</h2><p><code>lspci</code> 是 Linux 系统上用于列出 PCI（Peripheral Component Interconnect）设备信息的命令行工具。它可以显示计算机上安装的 PCI 设备的详细信息，包括设备的供应商、设备 ID、驱动程序等。下面是对 <code>lspci</code> 命令的详细解释：</p>
<ol>
<li><p><code>lspci</code>：直接运行 <code>lspci</code> 命令将列出计算机上所有的 PCI 设备。</p>
</li>
<li><p><code>lspci -v</code>：使用 <code>-v</code> 选项可以显示更详细的设备信息，包括设备的类别、子类别、供应商、设备 ID、IRQ（中断请求）、驱动程序等。</p>
</li>
<li><p><code>lspci -k</code>：使用 <code>-k</code> 选项可以显示每个设备所使用的内核模块（驱动程序）的信息。</p>
</li>
<li><p><code>lspci -n</code>：使用 <code>-n</code> 选项可以显示设备的供应商和设备 ID 的数字表示形式，而不是使用可读的文本。</p>
</li>
<li><p><code>lspci -s &lt;slot&gt;</code>：使用 <code>-s</code> 选项可以指定要查看的特定 PCI 插槽（槽位）。可以通过 <code>&lt;slot&gt;</code> 参数指定插槽的位置标识符。例如，<code>lspci -s 00:1f.3</code> 将只显示指定插槽位置的设备信息。</p>
</li>
<li><p><code>lspci -vvv</code> 或 <code>lspci -vvvv</code>：使用 <code>-vvv</code> 或 <code>-vvvv</code> 选项可以显示更详细的设备信息，包括设备寄存器、I&#x2F;O 空间、内存地址等。</p>
</li>
<li><p><code>lspci -H</code>：使用 <code>-H</code> 选项可以显示设备的层次结构信息，包括设备之间的连接关系。</p>
</li>
<li><p><code>lspci -t</code>：使用 <code>-t</code> 选项可以显示以树状结构形式展示的设备层次结构信息。</p>
</li>
</ol>
<p>这些选项只是 <code>lspci</code> 命令的一部分，你可以根据需要查阅 <code>lspci</code> 的手册页或使用命令的 <code>--help</code> 选项获取更详细的命令说明和选项信息。</p>
<p>通过 <code>lspci</code>，你可以获得关于计算机上安装的 PCI 设备的重要信息。这对于调试硬件问题、了解系统配置和识别设备驱动程序等方面非常有用。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_48_ip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_48_ip/" class="post-title-link" itemprop="url">linux_2_48_ip</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>ip命令</li>
</ul>
<h2 id="linux-ip命令-详解"><a href="#linux-ip命令-详解" class="headerlink" title="linux ip命令 详解"></a>linux ip命令 详解</h2><p><code>ip</code> 命令是 Linux 中用于配置网络接口和路由表的强大工具。它是 <code>ifconfig</code> 和 <code>route</code> 命令的继任者，提供了更多的功能和灵活性。以下是关于 <code>ip</code> 命令的详细解释：</p>
<h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip [选项] OBJECT COMMAND</span><br></pre></td></tr></table></figure>

<p><code>OBJECT</code> 可以是 <code>link</code>（网络接口）、<code>address</code>（IP 地址和路由表）、<code>route</code>（路由）、<code>neighbor</code>（ARP 缓存）、<code>rule</code>（路由策略）等。</p>
<h3 id="常用选项："><a href="#常用选项：" class="headerlink" title="常用选项："></a>常用选项：</h3><ul>
<li><code>-s</code> 或 <code>--stats</code>：显示详细的统计信息。</li>
<li><code>-d</code> 或 <code>--details</code>：显示更多的详细信息。</li>
<li><code>-f</code> 或 <code>--family</code>：指定地址族，如 <code>inet</code>（IPv4） 或 <code>inet6</code>（IPv6）。</li>
<li><code>-4</code> 或 <code>-6</code>：指定使用 IPv4 或 IPv6 地址。</li>
</ul>
<h3 id="示例用法："><a href="#示例用法：" class="headerlink" title="示例用法："></a>示例用法：</h3><ol>
<li><p><strong>显示网络接口信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span></span><br></pre></td></tr></table></figure>
<p>显示当前系统上的网络接口。</p>
</li>
<li><p><strong>显示指定接口的详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> show eth0</span><br></pre></td></tr></table></figure>
<p>显示名为 <code>eth0</code> 的网络接口的详细信息。</p>
</li>
<li><p><strong>启用或禁用网络接口：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> eth0 up</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> eth0 down</span><br></pre></td></tr></table></figure>
<p>启用或禁用名为 <code>eth0</code> 的网络接口。</p>
</li>
<li><p><strong>显示 IP 地址信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip a</span><br></pre></td></tr></table></figure>
<p>显示当前系统上的 IP 地址信息。</p>
</li>
<li><p><strong>为网络接口分配 IP 地址：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address add 192.168.1.2/24 dev eth0</span><br></pre></td></tr></table></figure>
<p>为名为 <code>eth0</code> 的网络接口分配 IP 地址。</p>
</li>
<li><p><strong>删除网络接口上的 IP 地址：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address del 192.168.1.2/24 dev eth0</span><br></pre></td></tr></table></figure>
<p>从名为 <code>eth0</code> 的网络接口上删除指定的 IP 地址。</p>
</li>
<li><p><strong>添加静态路由：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route add 192.168.2.0/24 via 192.168.1.1</span><br></pre></td></tr></table></figure>
<p>添加到网络 <code>192.168.2.0/24</code> 的静态路由。</p>
</li>
<li><p><strong>显示路由表：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip r</span><br></pre></td></tr></table></figure>
<p>显示当前系统上的路由表。</p>
</li>
<li><p><strong>删除路由：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route del 192.168.2.0/24</span><br></pre></td></tr></table></figure>
<p>从路由表中删除到网络 <code>192.168.2.0/24</code> 的路由。</p>
</li>
<li><p><strong>显示 ARP 缓存：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip neigh show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip n</span><br></pre></td></tr></table></figure>
<p>显示当前系统上的 ARP 缓存。</p>
</li>
<li><p><strong>添加静态 ARP 条目：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip neigh add 192.168.1.2 lladdr 00:11:22:33:44:55 dev eth0</span><br></pre></td></tr></table></figure>
<p>添加到 IP 地址 <code>192.168.1.2</code> 的静态 ARP 条目。</p>
</li>
</ol>
<p>这些示例演示了一些常见的 <code>ip</code> 命令用法，但 <code>ip</code> 命令支持的功能非常丰富，可用于更高级的网络配置和管理任务。</p>
<h2 id="linux-ip命令-常用技巧"><a href="#linux-ip命令-常用技巧" class="headerlink" title="linux ip命令 常用技巧"></a>linux ip命令 常用技巧</h2><p>以下是一些在使用 <code>ip</code> 命令时的常用技巧：</p>
<ol>
<li><p><strong>查看详细信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -s -d <span class="built_in">link</span> show eth0</span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code>（<code>--stats</code>）和 <code>-d</code>（<code>--details</code>）选项，显示更详细的网络接口信息。</p>
</li>
<li><p><strong>使用 <code>ip</code> 替代 <code>ifconfig</code>：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr show</span><br></pre></td></tr></table></figure>
<p><code>ip</code> 命令可以替代 <code>ifconfig</code> 来显示网络接口和 IP 地址信息，是一个更现代化的工具。</p>
</li>
<li><p><strong>显示指定地址族的信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -4 addr show</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -6 addr show</span><br></pre></td></tr></table></figure>
<p>使用 <code>-4</code> 或 <code>-6</code> 选项，只显示 IPv4 或 IPv6 地址信息。</p>
</li>
<li><p><strong>动态调整 MTU（最大传输单元）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> eth0 mtu 1400</span><br></pre></td></tr></table></figure>
<p>使用 <code>mtu</code> 选项，可以动态调整网络接口的最大传输单元。</p>
</li>
<li><p><strong>显示指定网络接口的广播地址：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr show eth0 | grep inet | awk <span class="string">&#x27;&#123;print $6&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 和 <code>awk</code> 来提取并显示广播地址。</p>
</li>
<li><p><strong>启用反向路径过滤（RP Filter）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip rpfilter show</span><br></pre></td></tr></table></figure>
<p><code>rpfilter</code> 是一种网络安全功能，可以使用 <code>ip rpfilter</code> 命令查看和配置。</p>
</li>
<li><p><strong>使用 <code>ip</code> 设置默认网关：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route add default via 192.168.1.1</span><br></pre></td></tr></table></figure>
<p>使用 <code>ip route</code> 命令可以设置默认网关，替代传统的 <code>route add default gw</code>。</p>
</li>
<li><p><strong>显示连接状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -s <span class="built_in">link</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>-s</code> 选项，显示连接状态和统计信息。</p>
</li>
<li><p><strong>显示指定端口的监听状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -ltnp | grep :80</span><br></pre></td></tr></table></figure>
<p>使用 <code>ss</code> 命令查看指定端口的监听状态。</p>
</li>
<li><p><strong>使用 <code>ip</code> 添加 VLAN：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> add <span class="built_in">link</span> eth0 name eth0.100 <span class="built_in">type</span> vlan <span class="built_in">id</span> 100</span><br></pre></td></tr></table></figure>
<p>使用 <code>ip</code> 命令可以方便地添加 VLAN。</p>
</li>
<li><p><strong>在 <code>ip</code> 命令中使用正则表达式过滤输出：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address show | grep -E <span class="string">&#x27;inet (192\.168\.|10\.)&#x27;</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>grep</code> 和正则表达式，过滤并显示指定网段的 IP 地址。</p>
</li>
</ol>
<p>这些技巧可以帮助你更灵活地使用 <code>ip</code> 命令，进行更复杂的网络配置和监控任务。</p>
<h2 id="linux-ip命令-高级技巧"><a href="#linux-ip命令-高级技巧" class="headerlink" title="linux ip命令 高级技巧"></a>linux ip命令 高级技巧</h2><p>以下是一些在使用 <code>ip</code> 命令时的高级技巧，适用于更复杂的网络配置和管理任务：</p>
<ol>
<li><p><strong>创建虚拟以太网接口（veth pair）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> add veth0 <span class="built_in">type</span> veth peer name veth1</span><br></pre></td></tr></table></figure>
<p>创建一对虚拟以太网接口 <code>veth0</code> 和 <code>veth1</code>，它们被连接在一起。</p>
</li>
<li><p><strong>使用 <code>ip</code> 设置源地址验证（Source Validation）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip rpfilter add dev eth0</span><br></pre></td></tr></table></figure>
<p>启用源地址验证，对于从指定网络接口出去的数据包进行检查。</p>
</li>
<li><p><strong>更改网络接口的 MAC 地址：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> dev eth0 address 00:11:22:33:44:55</span><br></pre></td></tr></table></figure>
<p>更改网络接口 <code>eth0</code> 的 MAC 地址。</p>
</li>
<li><p><strong>创建 Linux 桥接设备：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> add name br0 <span class="built_in">type</span> bridge</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> dev eth0 master br0</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> dev eth1 master br0</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> dev br0 up</span><br></pre></td></tr></table></figure>
<p>创建一个 Linux 桥接设备，将 <code>eth0</code> 和 <code>eth1</code> 添加到桥接设备，并启用桥接设备。</p>
</li>
<li><p><strong>创建隧道接口（Tunnel Interface）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip tunnel add tun0 mode gre remote 203.0.113.1 <span class="built_in">local</span> 203.0.113.2</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> tun0 up</span><br></pre></td></tr></table></figure>
<p>创建一个 GRE 隧道接口 <code>tun0</code>，指定远程和本地地址。</p>
</li>
<li><p><strong>配置网络命名空间（Network Namespace）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip netns add ns1</span><br><span class="line">ip <span class="built_in">link</span> add veth0 <span class="built_in">type</span> veth peer name veth1</span><br><span class="line">ip <span class="built_in">link</span> <span class="built_in">set</span> veth1 netns ns1</span><br><span class="line">ip netns <span class="built_in">exec</span> ns1 ip <span class="built_in">link</span> <span class="built_in">set</span> dev lo up</span><br><span class="line">ip netns <span class="built_in">exec</span> ns1 ip <span class="built_in">link</span> <span class="built_in">set</span> dev veth1 up</span><br></pre></td></tr></table></figure>
<p>创建一个网络命名空间 <code>ns1</code>，并将虚拟以太网接口 <code>veth1</code> 移动到该命名空间。</p>
</li>
<li><p><strong>使用 <code>ip</code> 命令配置 IPset：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipset create myset <span class="built_in">hash</span>:ip</span><br><span class="line">ipset add myset 192.168.1.1</span><br></pre></td></tr></table></figure>
<p>使用 <code>ipset</code> 命令创建和配置 IPset，用于管理 IP 地址集合。</p>
</li>
<li><p><strong>启用多路径路由（Multipath Routing）：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route add default nexthop via 192.168.1.1 nexthop via 192.168.1.2</span><br></pre></td></tr></table></figure>
<p>启用多路径路由，使用多个下一跳地址。</p>
</li>
<li><p><strong>使用 <code>ip</code> 命令进行策略路由：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip rule add from 192.168.1.1/32 table 1</span><br><span class="line">ip route add default via 192.168.1.254 table 1</span><br></pre></td></tr></table></figure>
<p>使用 <code>ip rule</code> 和 <code>ip route</code> 命令实现策略路由。</p>
</li>
<li><p><strong>配置 TCP BBR 拥塞控制算法：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route change default via 192.168.1.1 dev eth0 initcwnd 10</span><br></pre></td></tr></table></figure>
<p>使用 <code>ip route</code> 命令配置 TCP BBR 拥塞控制算法的参数。</p>
</li>
</ol>
<p>这些高级技巧展示了 <code>ip</code> 命令的强大功能，适用于更复杂的网络配置和管理场景。在实际应用中，理解这些高级技巧可以帮助你更好地调整和优化网络环境。</p>
<h2 id="ip"><a href="#ip" class="headerlink" title="ip"></a>ip</h2><ul>
<li><code>ip</code>命令与<code>ifconfig</code>命令类似,但是比<code>ifconfig</code>命令更加强大,主要功能是用于显示或者设置网络设备,<code>ip</code>命令是Linux加强版的网络配置工具,用于代替<code>ifconfig</code>命令</li>
<li>语法:<code>ip [options] object &#123; command | help&#125;</code><ul>
<li>object为常用对象,值可以是:<code>&#123; link | addr | addrlabel | route | rule | neigh | ntable | tunnel | maddr | mroute | mrule | monitor | xfrm | token&#125;</code></li>
<li>常用对象的取值含义:<ul>
<li><code>link</code>:网络设备</li>
<li><code>address</code>:设备上的协议(IP或IPv6)地址</li>
<li><code>addrlabel</code>:协议地址选择的标签设置</li>
<li><code>route</code>:路由表条目</li>
<li><code>rule</code>:路由策略数据库中的规则</li>
</ul>
</li>
<li>options为常用选项,值可以是:<code>&#123;-V[version] | -s[tatistics] | -d[details] | -r[resolve] | -h[human-readable] -iec | -f[family] &#123;inet6 | ipx | dnet | link &#125; | -o[oneline] | -t[timestamp] | -b[batch] [filename] | -rc[rcvbuf] [size]&#125;</code></li>
<li>常用选项的取值含义:<ul>
<li><code>-V</code>:显示命令的版本信息;</li>
<li><code>-s</code>:输出更详细的信息;</li>
<li><code>-f</code>:强制使用指定的协议族</li>
<li><code>-4</code>:指定使用的网络层协议是IPv4协议;</li>
<li><code>-6</code>:指定使用的网络层协议是IPv6协议</li>
<li><code>-r</code>:显示主机时,不使用IP地址,而使用主机的域名</li>
</ul>
</li>
</ul>
</li>
<li>示例:<ul>
<li><code>ip link show  # 显示网络接口信息</code></li>
<li><code>ip link set eth0 up  # 开启网卡</code></li>
<li><code>ip link set eth0 down # 关闭网卡</code></li>
<li><code>ip link set eth0 promisc on # 开启网卡的混合模式</code></li>
<li><code>ip link set eth0 promisc offi  # 关闭网卡的混合模式</code></li>
<li><code>ip link set eth0 txqueuelen 1200  # 设置网卡队列长度</code></li>
<li><code>ip link set eth0 mtu 1400  # 设置网卡最大传输单元</code></li>
<li><code>ip addr show  # 显示网卡IP信息</code></li>
<li><code>ip addr add 192.168.0.1/24 dev eth0  # 设置eth0网卡IP地址192.168.0.1</code></li>
<li><code>ip addr del 192.168.0.1/24 dev eth0  # 删除eth0网卡IP地址</code></li>
<li><code>ip route show  # 显示系统路由</code></li>
<li><code>ip route add default via 192.168.1.254  # 设置系统默认路由</code></li>
<li><code>ip route list  # 查看路由信息</code></li>
<li><code>ip route add 192.168.4.0/24 via 192.168.0.254 dev eth0  # 设置192.168.4.0网段的网关为192.168.0.254,数据走eth0接口</code></li>
<li><code>ip route add default via 192.168.0.254 dev eth0  # 设置默认网关为192.168.0.254</code></li>
<li><code>ip route del 192.168.4.0/24  # 删除192.168.4.0网段的网关</code></li>
<li><code>ip route delete 192.168.1.0/24 dev eth0  # 删除路由</code></li>
</ul>
</li>
</ul>
<p>在Linux中，<code>ip</code>命令是一个强大的网络工具，用于管理网络接口、路由表、地址配置等网络相关的操作。它取代了过时的<code>ifconfig</code>命令，并提供更多功能和灵活性。</p>
<p>以下是<code>ip</code>命令的一般语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip [options] object command</span><br></pre></td></tr></table></figure>

<p>其中，<code>options</code>是可选的一些选项，用于配置<code>ip</code>命令的行为，<code>object</code>表示要操作的网络对象（如接口、路由表、地址等），<code>command</code>表示要执行的具体命令。</p>
<p>以下是一些常见的<code>ip</code>命令选项和用法：</p>
<ol>
<li><p>查看网络接口信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip link show</span><br></pre></td></tr></table></figure>

<p>此命令将显示系统上所有网络接口的详细信息，包括名称、状态、MAC地址等。</p>
</li>
<li><p>查看路由表信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route show</span><br></pre></td></tr></table></figure>

<p>此命令将显示系统的路由表信息，包括目标网络、下一跳地址、接口等。</p>
</li>
<li><p>配置网络接口IP地址：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip address add 192.168.1.10/24 dev eth0</span><br></pre></td></tr></table></figure>

<p>此命令将为<code>eth0</code>接口添加IP地址<code>192.168.1.10/24</code>。</p>
</li>
<li><p>启用或禁用网络接口：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip link set eth0 up</span><br><span class="line">ip link set eth0 down</span><br></pre></td></tr></table></figure>

<p>第一个命令将启用<code>eth0</code>接口，使其可用；第二个命令将禁用<code>eth0</code>接口，使其不可用。</p>
</li>
</ol>
<p><code>ip</code>命令还支持其他许多选项和功能，如配置VLAN、设定路由、设置策略路由等。</p>
<p>使用<code>ip</code>命令可以方便地管理和配置网络相关的操作，从而实现网络接口、路由表和地址的管理和调整。它是Linux系统中网络管理的主要工具之一。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_53_gperf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/05/22/notebook/Linux/linux_2_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/2024-05-22-linux_2_53_gperf/" class="post-title-link" itemprop="url">linux_2_53_gperf</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>gperf命令</li>
</ul>
<h2 id="linux-gperf命令-详解"><a href="#linux-gperf命令-详解" class="headerlink" title="linux gperf命令 详解"></a>linux gperf命令 详解</h2><p><code>gperf</code> 是一个用于生成完美散列函数（perfect hash function）的工具。完美散列函数是一种能够将一组唯一的关键字映射到不同的索引值，且没有冲突的散列函数。<code>gperf</code> 工具通常用于生成用于关键字查找的高效数据结构，例如用于编译器符号表、关键字识别等。</p>
<p>以下是关于 <code>gperf</code> 命令的一些基本说明：</p>
<h3 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gperf [options] [--] keywords</span><br></pre></td></tr></table></figure>

<h3 id="选项说明："><a href="#选项说明：" class="headerlink" title="选项说明："></a>选项说明：</h3><ul>
<li><strong>-L, –language&#x3D;C：</strong> 指定生成的代码使用的编程语言，默认是 C 语言。</li>
<li><strong>-N, –namespace：</strong> 在生成的代码中使用命名空间。</li>
<li><strong>-K, –key-positions&#x3D;POS1[,POS2,…]：</strong> 指定关键字中用于计算散列的字符位置。</li>
<li><strong>-t, –tables：</strong> 生成一个表达式计算表（expression calculation table）。</li>
</ul>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gperf -L C -N my_hash_function -K 1,3,5,7 my_keywords.gperf</span><br></pre></td></tr></table></figure>

<p>这个示例使用 <code>gperf</code> 生成了一个 C 语言的完美散列函数，该函数的命名空间为 <code>my_hash_function</code>，关键字文件是 <code>my_keywords.gperf</code>，并且关键字中的第1、3、5、7个字符用于计算散列。</p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ol>
<li><p><strong>关键字文件格式：</strong> 关键字文件通常包含一组唯一的关键字，每个关键字占据一行。</p>
</li>
<li><p><strong>完美散列函数：</strong> <code>gperf</code> 生成的完美散列函数在给定的关键字集合上没有冲突，因此对于查找操作非常高效。</p>
</li>
<li><p><strong>生成的代码：</strong> <code>gperf</code> 生成的代码包含了一个完美散列函数、散列表和查找函数，可以方便地集成到项目中。</p>
</li>
<li><p><strong>调整关键字位置：</strong> 通过使用 <code>-K</code> 选项，可以调整计算散列时使用的关键字的位置，以获得更好的散列效果。</p>
</li>
</ol>
<p>请注意，<code>gperf</code> 不是一个通用的散列函数生成器，它专注于生成用于特定用途的完美散列函数。使用 <code>gperf</code> 需要理解关键字集合的特性，以便生成高效的散列函数。</p>
<h2 id="linux-gperf命令-常用技巧"><a href="#linux-gperf命令-常用技巧" class="headerlink" title="linux gperf命令 常用技巧"></a>linux gperf命令 常用技巧</h2><p>使用 <code>gperf</code> 命令时，以下是一些常用的技巧和最佳实践：</p>
<ol>
<li><p><strong>了解关键字集合：</strong><br>在使用 <code>gperf</code> 之前，要仔细了解关键字集合的特性。关键字集合应该是唯一的，这样生成的完美散列函数才能保证没有冲突。</p>
</li>
<li><p><strong>选择关键字位置：</strong><br>使用 <code>-K</code> 选项可以指定关键字中用于计算散列的字符位置。通过试验不同的位置组合，可以找到生成更好散列的方式。</p>
</li>
<li><p><strong>生成 C 代码：</strong><br>默认情况下，<code>gperf</code> 生成的是 C 语言的代码。如果项目使用其他编程语言，可以使用 <code>-L</code> 选项指定生成的代码语言。</p>
</li>
<li><p><strong>使用命名空间：</strong><br>如果生成的代码将会与其他代码集成，考虑使用 <code>-N</code> 选项指定生成的代码使用命名空间，以避免命名冲突。</p>
</li>
<li><p><strong>生成表达式计算表：</strong><br>使用 <code>-t</code> 选项可以生成表达式计算表，这有助于更详细地了解散列函数的计算方式。</p>
</li>
<li><p><strong>检查生成的代码：</strong><br>生成的代码包含完美散列函数、散列表和查找函数。在集成到项目中之前，建议检查生成的代码，确保它符合项目的要求。</p>
</li>
<li><p><strong>选择关键字文件格式：</strong><br><code>gperf</code> 支持两种关键字文件格式：<code>.gperf</code> 和 <code>.txt</code>。可以根据个人偏好选择一种格式，但要确保文件中的关键字格式正确。</p>
</li>
<li><p><strong>调整散列表大小：</strong><br>在某些情况下，可能需要调整散列表的大小以适应特定的需求。可以查看生成的代码中对散列表大小的定义，然后根据实际情况进行调整。</p>
</li>
<li><p><strong>测试性能：</strong><br>在集成到项目之前，进行性能测试以确保生成的完美散列函数在实际使用中能够提供高效的查找性能。</p>
</li>
<li><p><strong>文档记录：</strong><br>在代码中添加适当的注释，记录生成散列函数的相关信息，以便日后维护和理解代码。</p>
</li>
</ol>
<p>这些技巧可以帮助你更有效地使用 <code>gperf</code> 命令生成完美散列函数，并集成到项目中以提高关键字查找的效率。</p>
<h2 id="gperf"><a href="#gperf" class="headerlink" title="gperf"></a>gperf</h2><p><code>gperf</code> 是 GNU Perfect Hash Function Generator 的缩写，它是一个用于生成完美哈希函数的工具。完美哈希函数是一种哈希函数，它可以在常数时间内计算给定输入的哈希值，而不会产生冲突（即，每个输入都会有唯一的哈希值）。</p>
<p><code>gperf</code> 命令在 Linux 系统中使用，可以从输入文件生成完美哈希函数的 C 代码。下面是 <code>gperf</code> 命令的详解：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gperf [选项] &lt;输入文件&gt; &gt; &lt;输出文件&gt;</span><br></pre></td></tr></table></figure>

<p>主要的选项包括：</p>
<ul>
<li><code>-a</code>：生成 ANSI C 代码，默认情况下生成 K&amp;R C 代码。</li>
<li><code>-C</code>：生成 C++ 代码。</li>
<li><code>-D</code>：指定宏定义，可以在生成的代码中使用。</li>
<li><code>-E</code>：指定输入文件的字符编码，默认为 ASCII。</li>
<li><code>-G</code>：生成全局变量，默认情况下生成静态变量。</li>
<li><code>-k</code>：指定关键字列表的文件。</li>
<li><code>-N</code>：指定生成的哈希函数名称，默认为 <code>hash</code>。</li>
<li><code>-t</code>：指定输出文件的类型，默认为文本文件。</li>
<li><code>-s</code>：指定哈希表的大小，默认为 16384。</li>
<li><code>-S</code>：指定哈希函数名称的前缀，默认为空。</li>
</ul>
<p>使用 <code>gperf</code> 命令生成完美哈希函数的一般步骤如下：</p>
<ol>
<li>准备一个包含关键字的输入文件。</li>
<li>运行 <code>gperf</code> 命令，指定输入文件和其他选项。</li>
<li>将生成的 C 代码保存到输出文件中。</li>
</ol>
<p>生成的 C 代码包含一个哈希表和一个哈希函数。哈希表是一个数组，每个元素包含一个关键字和对应的值。哈希函数使用输入关键字计算哈希值，并通过查找哈希表来获取对应的值。</p>
<p>通过使用 <code>gperf</code> 生成的完美哈希函数，可以在很短的时间内进行高效的关键字查找，特别适用于大型关键字集合的情况。</p>
<p>请注意，这只是对 <code>gperf</code> 命令的简要说明，如果需要更详细的信息，可以查阅相关的文档或使用 <code>man gperf</code> 命令来查看 <code>gperf</code> 命令的手册页。</p>
<hr>
<h2 id="gperf-1"><a href="#gperf-1" class="headerlink" title="gperf"></a>gperf</h2><p>以下是一个简单的示例，演示如何在 Linux 上使用 <code>gperf</code> 命令生成完美哈希函数。</p>
<ol>
<li><p>创建一个名为 <code>keywords.txt</code> 的文本文件，包含一些关键字，每行一个关键字。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">orange</span><br><span class="line">peach</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行以下命令来生成完美哈希函数的 C 代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gperf keywords.txt &gt; hash_table.c</span><br></pre></td></tr></table></figure>

<p>这将生成一个名为 <code>hash_table.c</code> 的输出文件，其中包含生成的完美哈希函数的代码。</p>
</li>
<li><p>在你的程序中包含 <code>hash_table.c</code> 文件，并使用生成的完美哈希函数进行关键字查找。</p>
<p>下面是一个简单的示例程序 <code>main.c</code>，使用生成的完美哈希函数查找关键字：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;hash_table.c&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* keyword = <span class="string">&quot;banana&quot;</span>;</span><br><span class="line">    <span class="type">int</span> value = hash_lookup(keyword, <span class="built_in">strlen</span>(keyword));</span><br><span class="line">    <span class="keyword">if</span> (value != <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;关键字 &#x27;%s&#x27; 的值为 %d\n&quot;</span>, keyword, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;未找到关键字 &#x27;%s&#x27;\n&quot;</span>, keyword);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在编译时，确保将生成的 <code>hash_table.c</code> 文件一起编译，并链接到你的程序中。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc main.c hash_table.c -o program</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行生成的程序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./program</span><br></pre></td></tr></table></figure>

<p>输出应为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">关键字 &#x27;banana&#x27; 的值为 1</span><br></pre></td></tr></table></figure>

<p>这表明关键字 “banana” 在哈希表中的值为 1。</p>
</li>
</ol>
<p>这是一个简单的示例，演示了如何在 Linux 上使用 <code>gperf</code> 命令生成完美哈希函数。实际使用中，你可以根据自己的需求和输入数据来调整代码和选项。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/27/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><span class="page-number current">28</span><a class="page-number" href="/page/29/">29</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/29/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">zhang junyi</p>
  <div class="site-description" itemprop="description">工作学习笔记</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">686</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">99</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/junyiha" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;junyiha" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://x.com/zhangjunyiha" title="Twitter → https:&#x2F;&#x2F;x.com&#x2F;zhangjunyiha" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhang junyi</span>
</div>

<!--
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
