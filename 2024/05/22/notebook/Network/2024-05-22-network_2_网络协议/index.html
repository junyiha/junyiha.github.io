<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"junyiha.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="简介计算机网络协议是在计算机网络中进行通信和数据交换的规则和约定集合。它定义了计算机网络中数据的格式、传输方式、错误检测和纠正、网络设备的工作方式以及网络中各个实体之间的通信流程等。 下面是一些常见的计算机网络协议：  TCP&#x2F;IP协议：TCP&#x2F;IP协议是互联网的核心协议，它包括TCP（传输控制协议）和IP（Internet协议）两个主要协议。TCP协议提供可靠的、面向连接的数">
<meta property="og:type" content="article">
<meta property="og:title" content="network_2_网络协议">
<meta property="og:url" content="https://junyiha.github.io/2024/05/22/notebook/Network/2024-05-22-network_2_%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/index.html">
<meta property="og:site_name" content="junyi&#39;s blog">
<meta property="og:description" content="简介计算机网络协议是在计算机网络中进行通信和数据交换的规则和约定集合。它定义了计算机网络中数据的格式、传输方式、错误检测和纠正、网络设备的工作方式以及网络中各个实体之间的通信流程等。 下面是一些常见的计算机网络协议：  TCP&#x2F;IP协议：TCP&#x2F;IP协议是互联网的核心协议，它包括TCP（传输控制协议）和IP（Internet协议）两个主要协议。TCP协议提供可靠的、面向连接的数">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-05-22T01:00:00.000Z">
<meta property="article:modified_time" content="2025-04-28T08:08:39.427Z">
<meta property="article:author" content="zhang junyi">
<meta property="article:tag" content="HTTP">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://junyiha.github.io/2024/05/22/notebook/Network/2024-05-22-network_2_%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>network_2_网络协议 | junyi's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">junyi's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">hahahahaha</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/05/22/notebook/Network/2024-05-22-network_2_%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          network_2_网络协议
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 09:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T09:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Network/" itemprop="url" rel="index"><span itemprop="name">Network</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>计算机网络协议是在计算机网络中进行通信和数据交换的规则和约定集合。它定义了计算机网络中数据的格式、传输方式、错误检测和纠正、网络设备的工作方式以及网络中各个实体之间的通信流程等。</p>
<p>下面是一些常见的计算机网络协议：</p>
<ol>
<li><p><strong>TCP&#x2F;IP协议</strong>：TCP&#x2F;IP协议是互联网的核心协议，它包括TCP（传输控制协议）和IP（Internet协议）两个主要协议。TCP协议提供可靠的、面向连接的数据传输，而IP协议负责在网络中寻址和路由数据包。</p>
</li>
<li><p><strong>HTTP协议</strong>：HTTP（超文本传输协议）是应用层协议，用于在Web浏览器和Web服务器之间传输超文本文档。它是无状态的，通过请求-响应模型进行通信。</p>
</li>
<li><p><strong>HTTPS协议</strong>：HTTPS（安全超文本传输协议）是在HTTP基础上加入了安全层的协议，使用SSL&#x2F;TLS加密算法保证通信的安全性。</p>
</li>
<li><p><strong>FTP协议</strong>：FTP（文件传输协议）用于在客户端和服务器之间传输文件。它支持文件上传、下载、删除和重命名等操作。</p>
</li>
<li><p><strong>SMTP协议</strong>：SMTP（简单邮件传输协议）用于在网络中发送和传输电子邮件。它定义了电子邮件的格式和传输方式。</p>
</li>
<li><p><strong>POP3协议</strong>：POP3（邮局协议版本3）是用于接收电子邮件的协议，它允许用户从邮件服务器上下载邮件。</p>
</li>
<li><p><strong>DNS协议</strong>：DNS（域名系统）协议用于将域名解析为相应的IP地址。它提供了域名到IP地址之间的映射服务。</p>
</li>
<li><p><strong>ICMP协议</strong>：ICMP（Internet控制消息协议）用于在IP网络中传输错误报文和状态信息。它用于网络故障诊断和管理。</p>
</li>
</ol>
<p>以上只是一小部分常见的计算机网络协议，实际上还有许多其他的协议和标准，用于不同的网络通信需求和场景。这些协议共同构成了计算机网络的基础，使得不同设备和系统能够进行有效的通信和数据交换。</p>
<h2 id="Web服务"><a href="#Web服务" class="headerlink" title="Web服务"></a>Web服务</h2><h3 id="Web服务原理和技术"><a href="#Web服务原理和技术" class="headerlink" title="Web服务原理和技术"></a>Web服务原理和技术</h3><ul>
<li><p>Web Service，是面向服务计算模式的一部分，用于互联网上的信息交换</p>
</li>
<li><p>Web Service的主题非常广泛，非常复杂，涉及许多概念，协议和技术，而且它们源自不同的学科，诸如分布式计算系统，计算机网络，计算机体系结构，中间件，软件工程，编程语言，数据库系统，安全性和知识表示等，并且它们以各种错综复杂的方式组合在一起。</p>
</li>
<li><p>此外，还需要一些处理业务流程与组织的新技术，这些新技术既要发现企业存在的问题，又要在实际应用中解决这些问题</p>
</li>
</ul>
<h3 id="维基百科"><a href="#维基百科" class="headerlink" title="维基百科"></a>维基百科</h3><ul>
<li><p>Web服务是一种服务导向架构的技术，通过标准的Web协议提供服务，目的是保证不同平台的应用服务可以互操作</p>
</li>
<li><p>根据W3C的定义，Web服务（Web service）应当是一个软件系统，用以支持网络间不同机器的互动操作</p>
</li>
<li><p>网络服务通常是许多应用程序接口（API）所组成的，它们透过网络，例如国际互联网（Internet）的远程服务器端，执行客户所提交服务的请求</p>
</li>
<li><p>尽管W3C的定义涵盖诸多相异且无法介分的系统，不过通常我们指有关于<strong>主从式架构</strong>（Client-server）之间根据SOAP协议进行传递XML格式消息</p>
</li>
<li><p>无论定义还是实现，Web服务过程中会由服务器提供一个机器可读的描述（通常基于WSDL）以辨识服务器所提供的WEB服务</p>
<ul>
<li><code>SOAP</code>, 一个基于XML的可扩展消息信封格式，需同时绑定一个网络传输协议。这个协议通常是HTTP或HTTPS，但也可能是SMTP或XMPP。</li>
<li><code>WSDL</code>, 一个XML格式文档，用以描述服务端口访问方式和使用协议的细节。通常用来辅助生成服务器和客户端代码及配置信息。</li>
<li><code>UDDI</code>, 一个用来发布和搜索WEB服务的协议，应用程序可借由此协议在设计或运行时找到目标WEB服务。</li>
<li>这些标准由这些组织制订：W3C负责XML、SOAP及WSDL；OASIS负责UDDI。</li>
</ul>
</li>
</ul>
<h3 id="阮一峰网络日志"><a href="#阮一峰网络日志" class="headerlink" title="阮一峰网络日志"></a>阮一峰网络日志</h3><ul>
<li><p>想要理解Web service，必须先理解什么是Service（服务）</p>
</li>
<li><p>传统上，我们把计算机后台程序（Daemon）提供的功能，称为”服务”（service）</p>
</li>
<li><p>比如，让一个杀毒软件在后台运行，它会自动监控系统，那么这种自动监控就是一个”服务”。</p>
</li>
<li><p>通俗地说，”服务”就是<strong>计算机可以提供的某一种功能</strong>。</p>
</li>
<li><p>根据来源的不同，”服务”又可以分成两种：</p>
<ul>
<li>一种是”本地服务”（使用同一台机器提供的服务，不需要网络）</li>
<li>另一种是”网络服务”（使用另一台计算机提供的服务，必须通过网络才能完成）</li>
</ul>
</li>
<li><p>举例来说</p>
<ul>
<li>我现在有一批图片，需要把它们的大小缩小一半。那么，我们可以把”缩放图片”看成是一种服务。</li>
<li>你可以使用”本地服务”，在自己计算机上用软件缩小图片，也可以使用”网络服务”，将图片上传到某个网站，让服务器替你缩小图片，完成后再通过网络送回给你。</li>
<li>这就好比，一件事你可以自己做，也可以交给另一个人去做。肚子饿了，你可以自己做饭，也可以打电话去订一份比萨，让店家替你做好送上门。</li>
</ul>
</li>
<li><p>“网络服务”（Web Service）的本质，就是通过<strong>网络调用其他网站的资源</strong></p>
</li>
<li><p>如果一个软件的主要部分采用了”网络服务”，即它把存储或计算环节”外包”给其他网站了，那么我们就说这个软件属于Web Service架构</p>
</li>
<li><p>Web Service架构的基本思想，就是尽量把非核心功能交给其他人去做，自己全力开发核心功能。</p>
</li>
</ul>
<h2 id="使用Web服务的方式"><a href="#使用Web服务的方式" class="headerlink" title="使用Web服务的方式"></a>使用Web服务的方式</h2><ul>
<li><p>Web服务实际上是一组工具，并有多种不同的方法调用之。</p>
</li>
<li><p><strong>三种最普遍的手段是</strong>：远程过程调用（RPC），服务导向架构（SOA）以及表述性状态转移（REST）。</p>
</li>
<li><p>远程过程调用</p>
<ul>
<li>Web服务提供一个分布式函数或方法接口供用户调用，这是一种比较传统的方式。通常，在WSDL中对RPC接口进行定义（类似于早期的XML-RPC）。</li>
<li>尽管最初的Web服务广泛采用RPC方式部署，但针对其过于紧密之耦合性的批评声也随之不断。这是因为<strong>RPC式WEB服务实质上是利用一个简单的映射</strong>，以把用户请求直接转化成为一个特定语言编写的函数或方法。</li>
<li>如今，多数服务提供商认定此种方式在未来将难有作为，在他们的推动下，WS-I基本协议集（WS-I Basic Profile）已不再支持远程过程调用。</li>
</ul>
</li>
<li><p>服务导向架构</p>
<ul>
<li>现在，业界比较关注的是遵从服务导向架构（Service-oriented architecture，SOA）概念来构筑WEB服务。</li>
<li>在服务导向架构中，通讯由消息驱动，而不再是某个动作（方法调用）。这种WEB服务也被称作面向消息的服务</li>
<li>SOA式WEB服务得到了大部分主要软件供应商以及业界专家的支持和肯定。</li>
<li>作为与RPC方式的最大差别，SOA方式<strong>更加关注如何去连接服务而不是去特定某个实现的细节</strong>。WSDL定义了联络服务的必要内容</li>
</ul>
</li>
<li><p>表述性状态转移</p>
<ul>
<li>表述性状态转移式（Representational state transfer，REST）Web服务类似于HTTP或其他类似协议，它们<strong>把接口限定在一组广为人知的标准动作中</strong>（比如HTTP的GET、PUT、DELETE）以供调用。</li>
<li>此类WEB服务关注与那些稳定的资源的互动，而不是消息或动作</li>
<li>此种服务可以通过WSDL来描述SOAP消息内容，通过HTTP限定动作接口；或者完全在SOAP中对动作进行抽象。</li>
</ul>
</li>
</ul>
<h2 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h2><h3 id="维基百科-1"><a href="#维基百科-1" class="headerlink" title="维基百科"></a>维基百科</h3><ul>
<li><p>WebSocket是一种网络传输协议，可在单个TCP连接上进行全双工通信，位于OSI模型的应用层。</p>
</li>
<li><p>WebSocket协议在2011年由IETF标准化为RFC 6455，后由RFC 7936补充规范。<strong>Web IDL中的WebSocket API由W3C标准化</strong></p>
</li>
<li><p>WebSocket使得客户端和服务器之间的数据交换变得更加简单，允许服务端主动向客户端推送数据。</p>
</li>
<li><p>在WebSocket API中，浏览器和服务器只需要完成一次握手，两者之间就可以创建持久性的连接，并进行双向数据传输</p>
</li>
</ul>
<h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><ul>
<li><p>WebSocket是一种与HTTP不同的协议。两者都位于OSI模型的应用层，并且都依赖于传输层的TCP协议</p>
</li>
<li><p>为了实现兼容性，WebSocket握手使用HTTP Upgrade头从HTTP协议更改为WebSocket协议。</p>
</li>
<li><p>WebSocket协议支持Web浏览器（或其他客户端应用程序）与Web服务器之间的交互，具有较低的开销，便于实现客户端与服务器的实时数据传输</p>
</li>
<li><p>服务器可以通过标准化的方式来实现，而无需客户端首先请求内容，并允许消息在保持连接打开的同时来回传递。</p>
</li>
<li><p>通过这种方式，可以在客户端和服务器之间进行双向持续对话。 </p>
</li>
<li><p>通信通过TCP端口80或443完成，这在防火墙阻止非Web网络连接的环境下是有益的。</p>
</li>
<li><p>另外，Comet之类的技术以非标准化的方式实现了类似的双向通信</p>
<ul>
<li>Comet是一种用于web的推送技术，能使服务器实时地将更新的信息传送到客户端，而无须客户端发出请求，</li>
<li>目前有两种实现方式，长轮询和iframe流。</li>
</ul>
</li>
<li><p>与HTTP不同，WebSocket提供全双工通信。</p>
</li>
<li><p>此外，WebSocket还可以在TCP之上实现消息流。TCP单独处理字节流，没有固有的消息概念。 </p>
</li>
<li><p>在WebSocket之前，使用Comet可以实现全双工通信。</p>
</li>
<li><p>但是Comet存在TCP握手和HTTP头的开销，因此对于小消息来说效率很低。WebSocket协议旨在解决这些问题。</p>
</li>
<li><p>WebSocket协议规范将ws（WebSocket）和wss（WebSocket Secure）定义为两个新的统一资源标识符（URI）方案，分别对应明文和加密连接。</p>
</li>
<li><p>除了方案名称和片段ID（不支持#）之外，其余的URI组件都被定义为此URI的通用语法。</p>
</li>
</ul>
<h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><ul>
<li><p>早期，很多网站为了实现<strong>推送技术</strong>，所用的技术都是<strong>轮询</strong>。</p>
</li>
<li><p>推送技术（英语：Push technology），或者说是是一种基于Internet通信方式的服务器推送，其中要求通信的请求是由发布者或中央服务器发起。与 pull&#x2F;get 形成对比，额外消息传输的相应一般由接收者或客户端发起。</p>
</li>
<li><p>轮询,是指由浏览器每隔一段时间（如每秒）向服务器发出HTTP请求，然后服务器返回最新的数据给客户端。</p>
</li>
<li><p>这种传统的模式带来很明显的缺点，即:</p>
<ul>
<li>浏览器需要不断的向服务器发出请求，然而HTTP请求与回复可能会包含较长的头部，其中真正有效的数据可能只是很小的一部分，所以这样会消耗很多带宽资源</li>
</ul>
</li>
<li><p><strong>比较新的轮询技术是Comet</strong>。这种技术虽然可以实现双向通信，但仍然需要反复发出请求。而且在Comet中普遍采用的HTTP长连接也会消耗服务器资源</p>
</li>
<li><p>在这种情况下，HTML5定义了WebSocket协议，能更好的节省服务器资源和带宽，并且能够更实时地进行通讯</p>
</li>
<li><p>Websocket与HTTP和HTTPS使用相同的TCP端口，可以绕过大多数防火墙的限制。默认情况下，Websocket协议使用80端口；运行在TLS之上时，默认使用443端口。</p>
</li>
</ul>
<h4 id="握手协议"><a href="#握手协议" class="headerlink" title="握手协议"></a>握手协议</h4><ul>
<li><p>WebSocket 是独立的、创建在TCP上的协议。</p>
</li>
<li><p>Websocket 通过 HTTP&#x2F;1.1 协议的101状态码进行握手。</p>
</li>
<li><p>为了创建Websocket连接，需要通过浏览器发出请求，之后服务器进行回应，这个过程通常称<strong>握手</strong>（Handshaking）。</p>
</li>
<li><p>典型的WebSocket握手请求</p>
<ul>
<li>客户端请求：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /chat HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==</span><br><span class="line">Origin: http://example.com</span><br><span class="line">Sec-WebSocket-Protocol: chat, superchat</span><br><span class="line">Sec-WebSocket-Version: 13</span><br></pre></td></tr></table></figure></li>
<li>服务器回应：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 101 Switching Protocols</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span><br><span class="line">Sec-WebSocket-Protocol: chat</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>字段说明：</p>
<ul>
<li>Connection必须设置Upgrade，表示客户端希望连接升级。</li>
<li>Upgrade字段必须设置Websocket，表示希望升级到Websocket协议。</li>
<li>Sec-WebSocket-Key是随机的字符串，服务器端会用这些数据来构造出一个SHA-1的信息摘要。<ul>
<li>把“Sec-WebSocket-Key”加上一个特殊字符串“258EAFA5-E914-47DA-95CA-C5AB0DC85B11”，然后计算SHA-1摘要，之后进行Base64编码，将结果做为“Sec-WebSocket-Accept”头的值，返回给客户端。</li>
<li>如此操作，可以尽量避免普通HTTP请求被误认为Websocket协议。</li>
</ul>
</li>
<li>Sec-WebSocket-Version 表示支持的Websocket版本。RFC6455要求使用的版本是13，之前草案的版本均应当弃用。</li>
<li>Origin字段是必须的。如果缺少origin字段，WebSocket服务器需要回复HTTP 403 状态码（禁止访问）。</li>
<li>其他一些定义在HTTP协议中的字段，如Cookie等，也可以在Websocket中使用</li>
</ul>
</li>
</ul>
<h3 id="阮一峰网络日志-1"><a href="#阮一峰网络日志-1" class="headerlink" title="阮一峰网络日志"></a>阮一峰网络日志</h3><ul>
<li><p>已经有了 HTTP 协议，为什么还需要另一个协议？它能带来什么好处？</p>
</li>
<li><p>因为 HTTP 协议有一个缺陷：通信只能由客户端发起。</p>
</li>
<li><p>举例来说，我们想了解今天的天气，只能是客户端向服务器发出请求，服务器返回查询结果。HTTP 协议做不到服务器主动向客户端推送信息。</p>
</li>
<li><p>这种单向请求的特点，注定了如果服务器有连续的状态变化，客户端要获知就非常麻烦。</p>
</li>
<li><p>我们只能使用”<strong>轮询</strong>“：每隔一段时候，就发出一个询问，了解服务器有没有新的信息。最典型的场景就是聊天室</p>
</li>
<li><p>轮询的效率低，非常浪费资源（因为必须不停连接，或者 HTTP 连接始终打开）。</p>
</li>
<li><p>因此，工程师们一直在思考，有没有更好的方法。WebSocket 就是这样发明的</p>
</li>
</ul>
<h4 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h4><ul>
<li><p>WebSocket 协议在2008年诞生，2011年成为国际标准。所有浏览器都已经支持了</p>
</li>
<li><p>它的最大特点就是，服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息，是真正的双向平等对话，属于服务器推送技术的一种</p>
</li>
<li><p>其他特点包括：</p>
<ul>
<li>建立在 TCP 协议之上，服务器端的实现比较容易。</li>
<li>与 HTTP 协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器</li>
<li>数据格式比较轻量，性能开销小，通信高效。</li>
<li>可以发送文本，也可以发送二进制数据。</li>
<li>没有同源限制，客户端可以与任意服务器通信。</li>
<li>协议标识符是ws（如果加密，则为wss），服务器网址就是 URL</li>
</ul>
</li>
</ul>
<h2 id="Web3和区块链"><a href="#Web3和区块链" class="headerlink" title="Web3和区块链"></a>Web3和区块链</h2><ul>
<li><p>互联网迄今有两个阶段：Web 1.0 和 Web 2.0</p>
</li>
<li><p>下一个阶段自然就是 Web 3.0（简称 Web3）</p>
</li>
<li><p>Web 1.0 阶段，用户是单纯的内容消费者，内容由网站提供，网站让你看什么，你就看什么，典型例子就是新闻门户网站。</p>
</li>
<li><p>Web 2.0 阶段，用户是内容的生产者，网站只是一个向用户提供服务的平台，典型的 Web 2.0 平台有维基百科、抖音、微信等等</p>
</li>
<li><p>Web3 的很多特征还不明确，但是国外很多文章认为，它跟区块链有关。</p>
<ul>
<li>Web 1.0 是用户读取互联网，Web 2.0 是用户写入互联网，Web3 是用户生活在互联网</li>
<li>娱乐、工作、学习、消费、交际，都在网上发生。网站不仅提供服务，还是一个生活空间，人们的一部分生活可以在网上完成</li>
<li>在教育网站学习，在会议网站开会，在社交网站交友，在游戏网站玩乐。所有网站共同构成了一个无所不包的网络世界</li>
</ul>
</li>
<li><p>所有网站的生活功能，如果能够连在一起，让用户无缝地从一个场景进入另一个场景，那就构成了一个虚拟世界。这大概就是最近很热门的元宇宙（metaverse）的样子</p>
</li>
<li><p>到了那个阶段，用户不再是访问网站，而是进入虚拟世界，过着虚拟的线上生活</p>
</li>
<li><p>这样的虚拟世界，显然不能被一家或几家巨头垄断，否则我们就会依赖这些巨头，不得不遵守它制定的规则。当你的生活都在虚拟世界里面，某一天巨头突然决定关闭你的账号，你的虚拟人生岂不嘎然而止了！</p>
</li>
<li><p>这就是很多人<strong>提出 Web3 应该是分布式的原因</strong>。这有两层含义：</p>
<ul>
<li>它不是集中式的，就没有单一的公司可以控制它；</li>
<li>任何一种服务都有多家提供商，通过分布式协议连起来，用户可以极小的成本，从一个提供商转移到另一个服务商。</li>
</ul>
</li>
<li><p>如果 Web3 确定是分布式的，那么区块链简直就是天然的基础设施。因为<strong>区块链是分布式数据库的一种实现</strong>，本身就是分布式的，而且信息一旦上链，就无法修改</p>
</li>
<li><p>这解决了 Web3 的核心问题：不同网站的数据交换。 </p>
</li>
<li><p>不同网站都可以自由读写同一个用户的数据，并且这些数据是可以信赖的，从而保证用户进入另一个网站，就好像进入同一个世界的不同地区</p>
</li>
<li><p>一旦 Web3 构建于区块链之上，按照区块链的设计，用户需要有一个数字钱包，它是你在虚拟世界的身份证和银行账户。</p>
</li>
<li><p>你的身份、财产、消费，都通过这个数字钱包来标识。网站通过数字钱包的 ID，来识别你是谁</p>
</li>
<li><p>我翻开谷歌一查,这WEB3.0就没有一个正常的解释， 歪歪斜斜的搜索结果每页上都写着 “去中心化” “分布式” “用户拥有” “区块链” “虚拟经济” “价值重塑” “Token” 几个大词，我横竖睡不着，仔细看了半夜，才从字缝里看出来，满本上都写着两个字“炒币”</p>
</li>
</ul>

    </div>

    
    
    
        <div class="reward-container">
  <div>感谢老板支持！敬礼(^^ゞ</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="zhang junyi WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="zhang junyi Alipay">
        <p>Alipay</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/HTTP/" rel="tag"># HTTP</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/05/22/notebook/PointCloud/2024-05-22-PointCloud_1_%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/" rel="prev" title="PointCloud_1_理论基础">
      <i class="fa fa-chevron-left"></i> PointCloud_1_理论基础
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/05/22/notebook/Network/2024-05-22-%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80/" rel="next" title="网络设备基础">
      网络设备基础 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Web%E6%9C%8D%E5%8A%A1"><span class="nav-number">2.</span> <span class="nav-text">Web服务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Web%E6%9C%8D%E5%8A%A1%E5%8E%9F%E7%90%86%E5%92%8C%E6%8A%80%E6%9C%AF"><span class="nav-number">2.1.</span> <span class="nav-text">Web服务原理和技术</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%B4%E5%9F%BA%E7%99%BE%E7%A7%91"><span class="nav-number">2.2.</span> <span class="nav-text">维基百科</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%AE%E4%B8%80%E5%B3%B0%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97"><span class="nav-number">2.3.</span> <span class="nav-text">阮一峰网络日志</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Web%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="nav-number">3.</span> <span class="nav-text">使用Web服务的方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WebSocket"><span class="nav-number">4.</span> <span class="nav-text">WebSocket</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%B4%E5%9F%BA%E7%99%BE%E7%A7%91-1"><span class="nav-number">4.1.</span> <span class="nav-text">维基百科</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="nav-number">4.1.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%83%8C%E6%99%AF"><span class="nav-number">4.1.2.</span> <span class="nav-text">背景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%A1%E6%89%8B%E5%8D%8F%E8%AE%AE"><span class="nav-number">4.1.3.</span> <span class="nav-text">握手协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%AE%E4%B8%80%E5%B3%B0%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97-1"><span class="nav-number">4.2.</span> <span class="nav-text">阮一峰网络日志</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="nav-number">4.2.1.</span> <span class="nav-text">简介</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Web3%E5%92%8C%E5%8C%BA%E5%9D%97%E9%93%BE"><span class="nav-number">5.</span> <span class="nav-text">Web3和区块链</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">zhang junyi</p>
  <div class="site-description" itemprop="description">工作学习笔记</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">672</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">98</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/junyiha" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;junyiha" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://x.com/zhangjunyiha" title="Twitter → https:&#x2F;&#x2F;x.com&#x2F;zhangjunyiha" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhang junyi</span>
</div>

<!--
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
