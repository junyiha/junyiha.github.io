<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"junyiha.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="简介 Qt常见技巧">
<meta property="og:type" content="article">
<meta property="og:title" content="qt_5_常见技巧">
<meta property="og:url" content="https://junyiha.github.io/2024/09/05/notebook/Qt/2024-09-05-qt_4_%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7/index.html">
<meta property="og:site_name" content="junyi&#39;s blog">
<meta property="og:description" content="简介 Qt常见技巧">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-09-05T01:00:00.000Z">
<meta property="article:modified_time" content="2025-04-28T08:08:39.474Z">
<meta property="article:author" content="zhang junyi">
<meta property="article:tag" content="Qt">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://junyiha.github.io/2024/09/05/notebook/Qt/2024-09-05-qt_4_%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>qt_5_常见技巧 | junyi's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">junyi's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">hahahahaha</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://junyiha.github.io/2024/09/05/notebook/Qt/2024-09-05-qt_4_%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhang junyi">
      <meta itemprop="description" content="工作学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="junyi's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          qt_5_常见技巧
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-09-05 09:00:00" itemprop="dateCreated datePublished" datetime="2024-09-05T09:00:00+08:00">2024-09-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 16:08:39" itemprop="dateModified" datetime="2025-04-28T16:08:39+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Qt/" itemprop="url" rel="index"><span itemprop="name">Qt</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>Qt常见技巧</li>
</ul>
<span id="more"></span>

<h2 id="Qt-QString转为QByteArray"><a href="#Qt-QString转为QByteArray" class="headerlink" title="Qt QString转为QByteArray"></a>Qt QString转为QByteArray</h2><p>在 Qt 中，可以通过多种方式将 <code>QString</code> 转换为 <code>QByteArray</code>。最常见的方法是使用 <code>QString</code> 的 <code>toUtf8()</code>、<code>toLocal8Bit()</code> 或 <code>toLatin1()</code> 方法，根据你的编码需求进行转换。</p>
<h3 id="1-使用-toUtf8"><a href="#1-使用-toUtf8" class="headerlink" title="1. 使用 toUtf8()"></a>1. <strong>使用 <code>toUtf8()</code></strong></h3><p>如果你想将 <code>QString</code> 转换为 <code>QByteArray</code>，并且使用 UTF-8 编码，可以使用 <code>QString::toUtf8()</code> 方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QString str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">QByteArray byteArray = str.<span class="built_in">toUtf8</span>();</span><br></pre></td></tr></table></figure>

<h3 id="2-使用-toLocal8Bit"><a href="#2-使用-toLocal8Bit" class="headerlink" title="2. 使用 toLocal8Bit()"></a>2. <strong>使用 <code>toLocal8Bit()</code></strong></h3><p>如果你需要根据操作系统的本地编码进行转换，可以使用 <code>QString::toLocal8Bit()</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QString str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">QByteArray byteArray = str.<span class="built_in">toLocal8Bit</span>();</span><br></pre></td></tr></table></figure>

<p><code>toLocal8Bit()</code> 会根据操作系统的本地字符集进行编码。</p>
<h3 id="3-使用-toLatin1"><a href="#3-使用-toLatin1" class="headerlink" title="3. 使用 toLatin1()"></a>3. <strong>使用 <code>toLatin1()</code></strong></h3><p>如果你只需要将 <code>QString</code> 转换为 Latin1 编码（即 ISO-8859-1），可以使用 <code>QString::toLatin1()</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QString str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">QByteArray byteArray = str.<span class="built_in">toLatin1</span>();</span><br></pre></td></tr></table></figure>

<h3 id="示例代码："><a href="#示例代码：" class="headerlink" title="示例代码："></a>示例代码：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QString&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QByteArray&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    QString str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 转换为 QByteArray 使用 UTF-8 编码</span></span><br><span class="line">    QByteArray byteArrayUtf8 = str.<span class="built_in">toUtf8</span>();</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;UTF-8:&quot;</span> &lt;&lt; byteArrayUtf8;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 转换为 QByteArray 使用本地编码</span></span><br><span class="line">    QByteArray byteArrayLocal = str.<span class="built_in">toLocal8Bit</span>();</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Local 8-bit:&quot;</span> &lt;&lt; byteArrayLocal;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 转换为 QByteArray 使用 Latin1 编码</span></span><br><span class="line">    QByteArray byteArrayLatin = str.<span class="built_in">toLatin1</span>();</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Latin1:&quot;</span> &lt;&lt; byteArrayLatin;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="选择合适的编码方式："><a href="#选择合适的编码方式：" class="headerlink" title="选择合适的编码方式："></a>选择合适的编码方式：</h3><ul>
<li>如果你需要处理国际字符（比如中文、日文等），**<code>toUtf8()</code>** 是最好的选择。</li>
<li>如果只涉及英文字符，**<code>toLatin1()</code>** 或 <strong><code>toLocal8Bit()</code></strong> 也可以使用，具体选择取决于本地环境或需求。</li>
</ul>
<h2 id="Qt-从终端获取输入数据"><a href="#Qt-从终端获取输入数据" class="headerlink" title="Qt 从终端获取输入数据"></a>Qt 从终端获取输入数据</h2><p>在 Qt 中，从终端获取用户输入数据可以使用以下方法，这通常适用于控制台（终端）应用程序。 </p>
<p>Qt 提供的 <code>QTextStream</code> 类可以方便地与标准输入（<code>stdin</code>）交互。此外，你还可以直接使用标准的 C++ 输入流（<code>std::cin</code>）或 C 风格的输入函数（如 <code>scanf</code>）。</p>
<hr>
<h2 id="方法-1-使用-QTextStream-读取终端输入"><a href="#方法-1-使用-QTextStream-读取终端输入" class="headerlink" title="方法 1: 使用 QTextStream 读取终端输入"></a><strong>方法 1: 使用 QTextStream 读取终端输入</strong></h2><p><code>QTextStream</code> 是 Qt 的流输入&#x2F;输出类，支持 Unicode 字符，可以与标准输入（<code>stdin</code>）进行交互。</p>
<h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTextStream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">QTextStream <span class="title">in</span><span class="params">(stdin)</span></span>;  <span class="comment">// 创建从标准输入读取的 QTextStream 对象</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">out</span><span class="params">(stdout)</span></span>; <span class="comment">// 用于输出到标准输出</span></span><br><span class="line"></span><br><span class="line">    out &lt;&lt; <span class="string">&quot;请输入你的名字: &quot;</span> &lt;&lt; flush; <span class="comment">// 使用 QTextStream 输出</span></span><br><span class="line">    QString name = in.<span class="built_in">readLine</span>();      <span class="comment">// 从标准输入读取一行数据</span></span><br><span class="line">    out &lt;&lt; <span class="string">&quot;你好, &quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot;!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a><strong>运行结果</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请输入你的名字: John</span><br><span class="line">你好, John!</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="方法-2-使用标准-C-的-std-cin"><a href="#方法-2-使用标准-C-的-std-cin" class="headerlink" title="方法 2: 使用标准 C++ 的 std::cin"></a><strong>方法 2: 使用标准 C++ 的 std::cin</strong></h2><p>如果你习惯于使用标准 C++ 的输入&#x2F;输出流，也可以通过 <code>std::cin</code> 来处理用户输入。</p>
<h3 id="示例代码-1"><a href="#示例代码-1" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;请输入你的名字: &quot;</span>;</span><br><span class="line">    std::string name;</span><br><span class="line">    std::cin &gt;&gt; name;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;你好, &quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot;!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="运行结果-1"><a href="#运行结果-1" class="headerlink" title="运行结果"></a><strong>运行结果</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请输入你的名字: John</span><br><span class="line">你好, John!</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="方法-3-使用标准-C-函数-如-scanf"><a href="#方法-3-使用标准-C-函数-如-scanf" class="headerlink" title="方法 3: 使用标准 C 函数 (如 scanf)"></a><strong>方法 3: 使用标准 C 函数 (如 scanf)</strong></h2><p>对于简单的控制台程序，也可以直接使用 C 风格的输入函数，比如 <code>scanf</code>。</p>
<h3 id="示例代码-2"><a href="#示例代码-2" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> name[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;请输入你的名字: &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%99s&quot;</span>, name);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;你好, %s!\n&quot;</span>, name);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="运行结果-2"><a href="#运行结果-2" class="headerlink" title="运行结果"></a><strong>运行结果</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请输入你的名字: John</span><br><span class="line">你好, John!</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="对比与注意事项"><a href="#对比与注意事项" class="headerlink" title="对比与注意事项"></a><strong>对比与注意事项</strong></h2><table>
<thead>
<tr>
<th>方法</th>
<th>特点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><code>QTextStream</code></td>
<td>Qt 原生方法，支持 Unicode，集成 Qt 功能。</td>
<td>优先在 Qt 应用中使用，推荐这种方式。</td>
</tr>
<tr>
<td><code>std::cin</code></td>
<td>标准 C++ 方法，简单直观，支持流式输入。</td>
<td>跨平台控制台应用，但不适合复杂的 Qt 集成。</td>
</tr>
<tr>
<td><code>scanf</code> 和其他 C 函数</td>
<td>低级方法，高性能，但对输入内容和缓冲区管理要求较高，不支持 Unicode。</td>
<td>非常简单的输入场景，或者对性能要求很高的程序。</td>
</tr>
</tbody></table>
<hr>
<h2 id="与-Qt-Event-Loop-的关系"><a href="#与-Qt-Event-Loop-的关系" class="headerlink" title="与 Qt Event Loop 的关系"></a><strong>与 Qt Event Loop 的关系</strong></h2><ol>
<li>如果使用 <code>QCoreApplication</code> 或 <code>QGuiApplication</code>，程序默认会运行事件循环 (<code>app.exec()</code>)，这通常阻塞主线程。</li>
<li>控制台输入不会影响事件循环的运行，但需要注意不要在事件循环和用户输入之间产生冲突。</li>
<li>在某些复杂的场景中，可以结合 <code>QSocketNotifier</code> 实现异步的标准输入处理。</li>
</ol>
<hr>
<p>对于绝大多数控制台应用，建议使用 <code>QTextStream</code>，因为它与 Qt 其他模块集成得很好，并且能够处理 Unicode 数据，适合现代应用程序需求。</p>
<h2 id="C-std-vector与QVector互相转换"><a href="#C-std-vector与QVector互相转换" class="headerlink" title="C++ std::vector与QVector互相转换"></a>C++ std::vector与QVector互相转换</h2><p>在开发过程中，C++ 标准库的 <code>std::vector</code> 和 Qt 的 <code>QVector</code> 是两种常用的动态数组容器。在某些情况下，需要将这两种容器互相转换。下面是具体的转换方法：</p>
<h3 id="1-从-std-vector-转换为-QVector"><a href="#1-从-std-vector-转换为-QVector" class="headerlink" title="1. 从 std::vector 转换为 QVector"></a>1. 从 <code>std::vector</code> 转换为 <code>QVector</code></h3><p>可以使用 <code>QVector</code> 的构造函数或 <code>QVector</code> 的 <code>operator=</code> 重载来完成。</p>
<h4 id="使用构造函数"><a href="#使用构造函数" class="headerlink" title="使用构造函数"></a>使用构造函数</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QVector&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt; stdVector = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="function">QVector&lt;<span class="type">int</span>&gt; <span class="title">qVector</span><span class="params">(stdVector.begin(), stdVector.end())</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="使用赋值运算符"><a href="#使用赋值运算符" class="headerlink" title="使用赋值运算符"></a>使用赋值运算符</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QVector&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt; stdVector = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">QVector&lt;<span class="type">int</span>&gt; qVector;</span><br><span class="line">qVector = QVector&lt;<span class="type">int</span>&gt;::<span class="built_in">fromStdVector</span>(stdVector);</span><br></pre></td></tr></table></figure>

<h3 id="2-从-QVector-转换为-std-vector"><a href="#2-从-QVector-转换为-std-vector" class="headerlink" title="2. 从 QVector 转换为 std::vector"></a>2. 从 <code>QVector</code> 转换为 <code>std::vector</code></h3><p>可以使用 <code>QVector</code> 的 <code>toStdVector()</code> 方法。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QVector&gt;</span></span></span><br><span class="line"></span><br><span class="line">QVector&lt;<span class="type">int</span>&gt; qVector = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt; stdVector = qVector.<span class="built_in">toStdVector</span>();</span><br></pre></td></tr></table></figure>

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li><p><strong>类型兼容性</strong><br>确保 <code>std::vector</code> 和 <code>QVector</code> 中存储的类型一致，例如两者都是 <code>int</code> 或 <code>double</code> 等。</p>
</li>
<li><p><strong>效率问题</strong><br>转换的效率取决于容器的大小。两种容器在底层内存布局上可能存在差异，因此需要完整的元素复制。</p>
</li>
<li><p><strong>扩展用法</strong><br>如果存储的元素是复杂的类对象，确保拷贝构造函数或赋值运算符的正确性。</p>
</li>
</ol>
<p>通过上述方法，可以轻松实现 <code>std::vector</code> 和 <code>QVector</code> 之间的互相转换，满足 Qt 与标准库协同工作的需求。</p>
<h2 id="C-Qt-std-string传给QString中文乱码"><a href="#C-Qt-std-string传给QString中文乱码" class="headerlink" title="C++ Qt std::string传给QString中文乱码"></a>C++ Qt std::string传给QString中文乱码</h2><p>好的！如果你的 <code>std::string</code> 使用的是其他编码（比如 GBK），你需要先将它转换为 UTF-8。可以使用 <code>QTextCodec</code> 来完成这个转换。以下是一个例子：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QString&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTextCodec&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::string str = <span class="string">&quot;你的字符串&quot;</span>; <span class="comment">// 假设这里是 GBK 编码的字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 std::string 转换为 QString</span></span><br><span class="line">QTextCodec *codec = QTextCodec::<span class="built_in">codecForName</span>(<span class="string">&quot;GBK&quot;</span>); <span class="comment">// 使用 GBK 编码</span></span><br><span class="line">QString qstr = codec-&gt;<span class="built_in">toUnicode</span>(str.<span class="built_in">c_str</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这样就可以将 <code>std::string</code> 中的 GBK 编码字符串正确转换为 <code>QString</code> 了。如果你知道你的字符串使用的是哪种编码，只需替换 <code>&quot;GBK&quot;</code> 为相应的编码名称。还有什么其他问题吗？</p>
<h2 id="Qt5-QWidget类对象主动关闭窗口"><a href="#Qt5-QWidget类对象主动关闭窗口" class="headerlink" title="Qt5 QWidget类对象主动关闭窗口"></a>Qt5 QWidget类对象主动关闭窗口</h2><p>在 Qt5 中，可以让一个 <code>QWidget</code> 类对象主动关闭窗口。一般来说，可以调用 <code>close()</code> 方法来关闭窗口。<code>close()</code> 是 <code>QWidget</code> 类的一个公共成员函数，用于请求关闭窗口。这个方法会发送一个 <code>closeEvent</code> 事件，从而触发窗口的关闭。</p>
<p>如果想要让窗口在特定条件下自动关闭，可以在窗口的逻辑中调用 <code>close()</code> 方法。例如，我们可以在按钮点击事件中或者条件满足时让窗口关闭。</p>
<h3 id="示例代码-3"><a href="#示例代码-3" class="headerlink" title="示例代码"></a>示例代码</h3><p>以下代码演示了一个自定义的 <code>MyWidget</code> 类，包含一个按钮，点击该按钮后窗口会自动关闭。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QVBoxLayout&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyWidget</span>(QWidget *parent = <span class="literal">nullptr</span>) : <span class="built_in">QWidget</span>(parent) &#123;</span><br><span class="line">        <span class="comment">// 设置窗口标题</span></span><br><span class="line">        <span class="built_in">setWindowTitle</span>(<span class="string">&quot;Qt5 主动关闭窗口示例&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建按钮</span></span><br><span class="line">        QPushButton *closeButton = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;关闭窗口&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 布局</span></span><br><span class="line">        QVBoxLayout *layout = <span class="keyword">new</span> <span class="built_in">QVBoxLayout</span>(<span class="keyword">this</span>);</span><br><span class="line">        layout-&gt;<span class="built_in">addWidget</span>(closeButton);</span><br><span class="line">        <span class="built_in">setLayout</span>(layout);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 连接按钮点击信号到关闭窗口的槽</span></span><br><span class="line">        <span class="built_in">connect</span>(closeButton, &amp;QPushButton::clicked, <span class="keyword">this</span>, &amp;MyWidget::closeWindow);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">closeWindow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 主动关闭窗口</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    MyWidget window;</span><br><span class="line">    window.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="代码说明"><a href="#代码说明" class="headerlink" title="代码说明"></a>代码说明</h3><ol>
<li><p><strong><code>MyWidget</code> 类</strong>：继承自 <code>QWidget</code>，并创建了一个按钮用于关闭窗口。</p>
<ul>
<li><code>closeButton</code>：点击按钮后会触发 <code>closeWindow()</code> 槽函数。</li>
</ul>
</li>
<li><p><strong><code>closeWindow()</code> 槽函数</strong>：调用 <code>this-&gt;close()</code> 来请求关闭当前窗口。</p>
</li>
<li><p><strong><code>close()</code> 函数</strong>：<code>QWidget</code> 类的内置函数，调用后会关闭窗口并触发 <code>closeEvent</code>。</p>
</li>
</ol>
<h2 id="Qt5-保存数据到excel表格文件"><a href="#Qt5-保存数据到excel表格文件" class="headerlink" title="Qt5 保存数据到excel表格文件"></a>Qt5 保存数据到excel表格文件</h2><p>在Qt5中将数据保存为Excel表格文件，可以使用以下几种方法：</p>
<h3 id="1-使用-QtXlsxWriter-库"><a href="#1-使用-QtXlsxWriter-库" class="headerlink" title="1. 使用 QtXlsxWriter 库"></a>1. <strong>使用 QtXlsxWriter 库</strong></h3><p>QtXlsxWriter 是一个专为 Qt 设计的库，能够直接处理 .xlsx 文件格式。它可以帮助您轻松地创建、编辑、保存 Excel 表格。</p>
<h4 id="安装-QtXlsxWriter"><a href="#安装-QtXlsxWriter" class="headerlink" title="安装 QtXlsxWriter"></a>安装 QtXlsxWriter</h4><ol>
<li>克隆库：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/dbzhang800/QtXlsxWriter.git</span><br></pre></td></tr></table></figure></li>
<li>在项目中添加库：<br>将库文件夹中的 <code>src</code> 目录直接添加到您的项目中，并在 <code>.pro</code> 文件中包含：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include(./QtXlsxWriter/src/xlsx/qtxlsx.pri)</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;xlsxdocument.h&quot;</span> <span class="comment">// QtXlsxWriter 头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    QXlsx::Document xlsx;</span><br><span class="line">    xlsx.<span class="built_in">write</span>(<span class="string">&quot;A1&quot;</span>, <span class="string">&quot;姓名&quot;</span>);  <span class="comment">// 写入表头</span></span><br><span class="line">    xlsx.<span class="built_in">write</span>(<span class="string">&quot;B1&quot;</span>, <span class="string">&quot;年龄&quot;</span>);</span><br><span class="line"></span><br><span class="line">    xlsx.<span class="built_in">write</span>(<span class="string">&quot;A2&quot;</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">    xlsx.<span class="built_in">write</span>(<span class="string">&quot;B2&quot;</span>, <span class="number">25</span>);</span><br><span class="line"></span><br><span class="line">    xlsx.<span class="built_in">write</span>(<span class="string">&quot;A3&quot;</span>, <span class="string">&quot;李四&quot;</span>);</span><br><span class="line">    xlsx.<span class="built_in">write</span>(<span class="string">&quot;B3&quot;</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    xlsx.<span class="built_in">saveAs</span>(<span class="string">&quot;output.xlsx&quot;</span>); <span class="comment">// 保存文件</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-使用-QAxObject（仅适用于-Windows）"><a href="#2-使用-QAxObject（仅适用于-Windows）" class="headerlink" title="2. 使用 QAxObject（仅适用于 Windows）"></a>2. <strong>使用 QAxObject（仅适用于 Windows）</strong></h3><p>如果在 Windows 系统中使用 Qt，可以通过 <code>QAxObject</code> 调用 COM 接口直接控制 Microsoft Excel 应用程序。这种方法适合于有 Excel 安装的 Windows 环境。</p>
<h4 id="使用示例-1"><a href="#使用示例-1" class="headerlink" title="使用示例"></a>使用示例</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QAxObject&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    QAxObject *excel = <span class="keyword">new</span> <span class="built_in">QAxObject</span>(<span class="string">&quot;Excel.Application&quot;</span>); <span class="comment">// 打开Excel应用</span></span><br><span class="line">    excel-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;Visible&quot;</span>, <span class="literal">false</span>); <span class="comment">// 设置为不可见</span></span><br><span class="line">    QAxObject *workbooks = excel-&gt;<span class="built_in">querySubObject</span>(<span class="string">&quot;Workbooks&quot;</span>);</span><br><span class="line">    QAxObject *workbook = workbooks-&gt;<span class="built_in">querySubObject</span>(<span class="string">&quot;Add&quot;</span>); <span class="comment">// 新建工作簿</span></span><br><span class="line"></span><br><span class="line">    QAxObject *sheet = workbook-&gt;<span class="built_in">querySubObject</span>(<span class="string">&quot;Sheets(int)&quot;</span>, <span class="number">1</span>); <span class="comment">// 获取第一个工作表</span></span><br><span class="line">    sheet-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;Name&quot;</span>, <span class="string">&quot;Sheet1&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 填写数据</span></span><br><span class="line">    sheet-&gt;<span class="built_in">querySubObject</span>(<span class="string">&quot;Cells(int,int)&quot;</span>, <span class="number">1</span>, <span class="number">1</span>)-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;Value&quot;</span>, <span class="string">&quot;姓名&quot;</span>);</span><br><span class="line">    sheet-&gt;<span class="built_in">querySubObject</span>(<span class="string">&quot;Cells(int,int)&quot;</span>, <span class="number">1</span>, <span class="number">2</span>)-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;Value&quot;</span>, <span class="string">&quot;年龄&quot;</span>);</span><br><span class="line"></span><br><span class="line">    sheet-&gt;<span class="built_in">querySubObject</span>(<span class="string">&quot;Cells(int,int)&quot;</span>, <span class="number">2</span>, <span class="number">1</span>)-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;Value&quot;</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">    sheet-&gt;<span class="built_in">querySubObject</span>(<span class="string">&quot;Cells(int,int)&quot;</span>, <span class="number">2</span>, <span class="number">2</span>)-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;Value&quot;</span>, <span class="number">25</span>);</span><br><span class="line"></span><br><span class="line">    sheet-&gt;<span class="built_in">querySubObject</span>(<span class="string">&quot;Cells(int,int)&quot;</span>, <span class="number">3</span>, <span class="number">1</span>)-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;Value&quot;</span>, <span class="string">&quot;李四&quot;</span>);</span><br><span class="line">    sheet-&gt;<span class="built_in">querySubObject</span>(<span class="string">&quot;Cells(int,int)&quot;</span>, <span class="number">3</span>, <span class="number">2</span>)-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;Value&quot;</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存文件并关闭</span></span><br><span class="line">    workbook-&gt;<span class="built_in">dynamicCall</span>(<span class="string">&quot;SaveAs(const QString&amp;)&quot;</span>, QDir::<span class="built_in">currentPath</span>() + <span class="string">&quot;/output.xlsx&quot;</span>);</span><br><span class="line">    workbook-&gt;<span class="built_in">dynamicCall</span>(<span class="string">&quot;Close()&quot;</span>);</span><br><span class="line">    excel-&gt;<span class="built_in">dynamicCall</span>(<span class="string">&quot;Quit()&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> excel;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-使用-CSV-文件格式"><a href="#3-使用-CSV-文件格式" class="headerlink" title="3. 使用 CSV 文件格式"></a>3. <strong>使用 CSV 文件格式</strong></h3><p>如果您不要求严格的 Excel 格式（.xlsx&#x2F;.xls），可以将数据保存为 CSV 文件。这种方式简单并且跨平台支持。</p>
<h4 id="使用示例-2"><a href="#使用示例-2" class="headerlink" title="使用示例"></a>使用示例</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTextStream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">&quot;output.csv&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (file.<span class="built_in">open</span>(QIODevice::WriteOnly | QIODevice::Text)) &#123;</span><br><span class="line">        <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line"></span><br><span class="line">        out &lt;&lt; <span class="string">&quot;姓名,年龄\n&quot;</span>;</span><br><span class="line">        out &lt;&lt; <span class="string">&quot;张三,25\n&quot;</span>;</span><br><span class="line">        out &lt;&lt; <span class="string">&quot;李四,30\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">        file.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="方法总结"><a href="#方法总结" class="headerlink" title="方法总结"></a>方法总结</h3><ul>
<li><strong>QtXlsxWriter</strong>：适合跨平台、直接生成 .xlsx 文件。</li>
<li><strong>QAxObject</strong>：适合 Windows 系统，适用于复杂的 Excel 操作。</li>
<li><strong>CSV 文件</strong>：适用于简单的数据保存，跨平台，但不支持 Excel 的高级功能（如格式化）。</li>
</ul>
<h2 id="Qt-QVector和C风格数组互相转换"><a href="#Qt-QVector和C风格数组互相转换" class="headerlink" title="Qt  QVector和C风格数组互相转换"></a>Qt  QVector和C风格数组互相转换</h2><p>在 Qt 中，<code>QVector</code> 和 C 风格数组（如 <code>int[]</code>）之间的互相转换是常见的需求。下面介绍如何在这两者之间进行转换。</p>
<h3 id="1-C-风格数组转-QVector"><a href="#1-C-风格数组转-QVector" class="headerlink" title="1. C 风格数组转 QVector"></a>1. <strong>C 风格数组转 <code>QVector</code></strong></h3><p>要将一个 C 风格数组转换为 <code>QVector</code>，可以使用 <code>QVector</code> 的构造函数或者通过 <code>append()</code> 方法将数组中的元素逐个添加到 <code>QVector</code> 中。</p>
<h4 id="方法-1：使用-QVector-构造函数"><a href="#方法-1：使用-QVector-构造函数" class="headerlink" title="方法 1：使用 QVector 构造函数"></a>方法 1：使用 <code>QVector</code> 构造函数</h4><p>如果你有一个 C 风格数组，并且知道它的大小，可以直接通过 <code>QVector</code> 的构造函数将其转换为 <code>QVector</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">int</span> size = <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="function">QVector&lt;<span class="type">int</span>&gt; <span class="title">vec</span><span class="params">(arr, arr + size)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>arr + size</code> 表示数组的结束位置。</li>
<li><code>QVector</code> 构造函数接受两个迭代器或指针，用于定义要添加到向量的元素范围。</li>
</ul>
<h4 id="方法-2：使用-QVector-append-或-QVector-push-back"><a href="#方法-2：使用-QVector-append-或-QVector-push-back" class="headerlink" title="方法 2：使用 QVector::append() 或 QVector::push_back()"></a>方法 2：使用 <code>QVector::append()</code> 或 <code>QVector::push_back()</code></h4><p>你可以逐个将数组元素添加到 <code>QVector</code> 中：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">int</span> size = <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">QVector&lt;<span class="type">int</span>&gt; vec;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">    vec.<span class="built_in">append</span>(arr[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-QVector-转-C-风格数组"><a href="#2-QVector-转-C-风格数组" class="headerlink" title="2. QVector 转 C 风格数组"></a>2. <strong><code>QVector</code> 转 C 风格数组</strong></h3><p>要将 <code>QVector</code> 转换为 C 风格数组，可以通过使用 <code>QVector</code> 提供的 <code>data()</code> 函数。<code>data()</code> 函数返回一个指向 <code>QVector</code> 内部存储区的指针，这个指针就是一个普通的 C 风格数组。</p>
<h4 id="方法-1：通过-QVector-data"><a href="#方法-1：通过-QVector-data" class="headerlink" title="方法 1：通过 QVector::data()"></a>方法 1：通过 <code>QVector::data()</code></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QVector&lt;<span class="type">int</span>&gt; vec = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">int</span>* arr = vec.<span class="built_in">data</span>();  <span class="comment">// 获取 C 风格数组的指针</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以像操作普通数组一样使用 arr</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; vec.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; arr[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：<code>QVector::data()</code> 返回的指针指向 <code>QVector</code> 内部的数据区域，因此不能对该指针进行 <code>delete[]</code> 操作。它仅仅是一个数据访问的快捷方式，内存管理仍然由 <code>QVector</code> 负责。</p>
<h4 id="方法-2：手动复制数据到一个新的-C-风格数组"><a href="#方法-2：手动复制数据到一个新的-C-风格数组" class="headerlink" title="方法 2：手动复制数据到一个新的 C 风格数组"></a>方法 2：手动复制数据到一个新的 C 风格数组</h4><p>如果你希望独立于 <code>QVector</code> 的生命周期使用 C 风格数组，可以手动分配内存并复制数据。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">QVector&lt;<span class="type">int</span>&gt; vec = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">int</span> size = vec.<span class="built_in">size</span>();</span><br><span class="line"><span class="type">int</span>* arr = <span class="keyword">new</span> <span class="type">int</span>[size];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 QVector 的数据复制到 C 风格数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">    arr[i] = vec[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 arr...</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; arr[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 记得释放手动分配的内存</span></span><br><span class="line"><span class="keyword">delete</span>[] arr;</span><br></pre></td></tr></table></figure>

<h3 id="3-注意事项"><a href="#3-注意事项" class="headerlink" title="3. 注意事项"></a>3. <strong>注意事项</strong></h3><ul>
<li><code>QVector::data()</code> 返回的指针与 <code>QVector</code> 共享内存，因此在 <code>QVector</code> 被修改或销毁后，这个指针可能会失效。</li>
<li>当使用 <code>new</code> 分配的 C 风格数组时，必须手动释放内存，避免内存泄漏。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>**C 风格数组转 <code>QVector</code>**：可以使用构造函数或逐个添加元素。</li>
<li><strong><code>QVector</code> 转 C 风格数组</strong>：可以使用 <code>data()</code> 获得指向内部数组的指针，或者手动分配新数组并复制数据。</li>
</ul>
<p>这两个容器之间的转换非常灵活，可以根据具体需求选择合适的转换方式。</p>
<h2 id="QVector和std-vector的区别和联系"><a href="#QVector和std-vector的区别和联系" class="headerlink" title="QVector和std::vector的区别和联系"></a>QVector和std::vector的区别和联系</h2><p><code>QVector</code> 和 <code>std::vector</code> 是 Qt 和 C++ 标准库中常用的动态数组容器，它们在功能上有许多相似之处，但在设计和使用上也有一些区别。下面是它们的区别和联系的详细说明。</p>
<h3 id="1-共同点"><a href="#1-共同点" class="headerlink" title="1. 共同点"></a>1. <strong>共同点</strong></h3><ul>
<li><strong>动态数组</strong>：两者都是动态数组容器，支持按需自动扩展容量，并且提供随机访问功能（通过下标访问元素）。</li>
<li><strong>元素连续存储</strong>：无论是 <code>QVector</code> 还是 <code>std::vector</code>，它们都保证其元素在内存中是连续存储的。这使得它们能够很好地支持基于指针的算法，并与低级 C 风格数组兼容。</li>
<li><strong>模板类</strong>：两者都是模板类，可以存储任何类型的对象，只要该类型满足拷贝或移动要求。</li>
<li><strong>时间复杂度</strong>：两者在大多数操作上的时间复杂度是相同的，诸如：<ul>
<li>访问元素：O(1)</li>
<li>添加&#x2F;删除元素（尾部）：均摊 O(1)</li>
<li>插入&#x2F;删除元素（中间）：O(n)</li>
</ul>
</li>
</ul>
<h3 id="2-主要区别"><a href="#2-主要区别" class="headerlink" title="2. 主要区别"></a>2. <strong>主要区别</strong></h3><h4 id="2-1-库和平台依赖"><a href="#2-1-库和平台依赖" class="headerlink" title="2.1 库和平台依赖"></a>2.1 <strong>库和平台依赖</strong></h4><ul>
<li>**<code>QVector</code>**：是 Qt 框架的一部分，必须依赖 Qt 环境才能使用。<code>QVector</code> 提供了一些与 Qt 生态系统紧密集成的特性，适合在 Qt 应用中使用。</li>
<li>**<code>std::vector</code>**：属于 C++ 标准库的一部分，不依赖任何第三方库，适用于标准 C++ 开发。<code>std::vector</code> 通常更适合在不依赖 Qt 的纯 C++ 项目中使用。</li>
</ul>
<h4 id="2-2-浅拷贝（隐式共享）机制"><a href="#2-2-浅拷贝（隐式共享）机制" class="headerlink" title="2.2 浅拷贝（隐式共享）机制"></a>2.2 <strong>浅拷贝（隐式共享）机制</strong></h4><ul>
<li><p>**<code>QVector</code>**：支持隐式共享（copy-on-write，COW）。这意味着当你复制一个 <code>QVector</code> 时，Qt 实际上并不会立即复制其内部数据，而是与源对象共享数据，直到有一方修改容器中的内容时才会真正复制数据。这种设计在处理大量数据时可以节省内存和提高性能。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QVector&lt;<span class="type">int</span>&gt; vec1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">QVector&lt;<span class="type">int</span>&gt; vec2 = vec1;  <span class="comment">// 浅拷贝，vec1 和 vec2 共享内存</span></span><br><span class="line">vec2[<span class="number">0</span>] = <span class="number">10</span>;  <span class="comment">// 修改时才会进行深拷贝</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>**<code>std::vector</code>**：不支持隐式共享。当你复制一个 <code>std::vector</code> 时，会立即进行深拷贝，将所有元素复制到新的容器中。每次复制都需要消耗额外的内存和时间。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; vec1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt; vec2 = vec1;  <span class="comment">// 深拷贝，vec1 和 vec2 拥有独立的数据</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-3-性能和线程安全"><a href="#2-3-性能和线程安全" class="headerlink" title="2.3 性能和线程安全"></a>2.3 <strong>性能和线程安全</strong></h4><ul>
<li><p>**<code>QVector</code>**：由于 Qt 使用了隐式共享机制，某些操作（如拷贝和赋值）在表面上比 <code>std::vector</code> 更高效。但这也带来了一些额外的复杂性，尤其是在多线程环境下。如果多个线程共享一个 <code>QVector</code>，并且有写操作，必须确保数据的一致性，否则会引发线程安全问题。</p>
</li>
<li><p>**<code>std::vector</code>**：没有隐式共享，因此不需要在多线程环境下担心这种问题。只要保证不同线程不同时修改同一个 <code>std::vector</code> 实例，线程安全性可以更容易控制。</p>
</li>
</ul>
<h4 id="2-4-API-和接口差异"><a href="#2-4-API-和接口差异" class="headerlink" title="2.4 API 和接口差异"></a>2.4 <strong>API 和接口差异</strong></h4><ul>
<li><p>**<code>QVector</code>**：作为 Qt 的一部分，提供了一些与 Qt 生态系统紧密集成的接口和功能。例如，<code>QVector</code> 的 <code>toList()</code> 方法可以方便地将它转换为 <code>QList</code>。此外，<code>QVector</code> 支持 <code>qDebug()</code> 输出、<code>QDataStream</code> 序列化等 Qt 特有的特性。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QVector&lt;<span class="type">int</span>&gt; vec = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">QList&lt;<span class="type">int</span>&gt; list = vec.<span class="built_in">toList</span>();  <span class="comment">// 转换为 QList</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>**<code>std::vector</code>**：遵循标准 C++ API，没有与 Qt 特定的接口。例如，<code>std::vector</code> 没有类似的转换功能，但是它与标准库容器之间可以通过迭代器进行高效互操作。<code>std::vector</code> 还支持标准算法库 (<code>&lt;algorithm&gt;</code>) 中的许多算法，如 <code>std::sort</code>, <code>std::find</code> 等。</p>
</li>
</ul>
<h4 id="2-5-内存分配与管理"><a href="#2-5-内存分配与管理" class="headerlink" title="2.5 内存分配与管理"></a>2.5 <strong>内存分配与管理</strong></h4><ul>
<li><p>**<code>QVector</code>**：Qt 框架对内存分配做了许多优化，尤其是在管理动态对象的生命周期和复制时。<code>QVector</code> 的隐式共享机制减少了不必要的深拷贝，同时内存管理方式与 Qt 的其他容器（如 <code>QList</code>）保持一致。</p>
</li>
<li><p>**<code>std::vector</code>**：标准库的 <code>std::vector</code> 使用的是 C++ 标准库的内存分配器，通常为 <code>std::allocator</code>。开发者可以通过自定义内存分配器来精细控制内存分配行为。</p>
</li>
</ul>
<h4 id="2-6-反射和元对象系统"><a href="#2-6-反射和元对象系统" class="headerlink" title="2.6 反射和元对象系统"></a>2.6 <strong>反射和元对象系统</strong></h4><ul>
<li><p>**<code>QVector</code>**：由于 Qt 支持元对象系统（Meta-Object System），<code>QVector</code> 可以与 Qt 的信号和槽、反射等机制配合使用，支持特定类型的序列化、GUI 绑定等。</p>
</li>
<li><p>**<code>std::vector</code>**：不支持 Qt 的元对象系统或信号槽机制。因此，如果你在使用 Qt 的信号槽机制或需要动态类型检查、反射等特性时，<code>QVector</code> 是更合适的选择。</p>
</li>
</ul>
<h3 id="3-适用场景"><a href="#3-适用场景" class="headerlink" title="3. 适用场景"></a>3. <strong>适用场景</strong></h3><ul>
<li><p>**使用 <code>QVector</code>**：</p>
<ul>
<li>项目中广泛使用 Qt 框架。</li>
<li>需要与 Qt 容器（如 <code>QList</code>, <code>QSet</code>）互操作，或依赖于 Qt 的元对象系统和信号槽机制。</li>
<li>需要隐式共享以优化内存使用和提高性能（尤其是数据量较大时）。</li>
</ul>
</li>
<li><p>**使用 <code>std::vector</code>**：</p>
<ul>
<li>项目不依赖 Qt，纯 C++ 开发。</li>
<li>需要兼容 C++ 标准库的其他容器和算法。</li>
<li>希望避免隐式共享带来的复杂性，尤其是在多线程环境中。</li>
</ul>
</li>
</ul>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><table>
<thead>
<tr>
<th>特性</th>
<th><code>QVector</code></th>
<th><code>std::vector</code></th>
</tr>
</thead>
<tbody><tr>
<td>库依赖</td>
<td>Qt 框架</td>
<td>C++ 标准库</td>
</tr>
<tr>
<td>隐式共享</td>
<td>支持（浅拷贝，写时复制）</td>
<td>不支持（深拷贝）</td>
</tr>
<tr>
<td>线程安全</td>
<td>需要注意隐式共享导致的安全问题</td>
<td>非共享，线程安全性更容易控制</td>
</tr>
<tr>
<td>内存分配</td>
<td>使用 Qt 的内存管理</td>
<td>使用标准库分配器</td>
</tr>
<tr>
<td>与 Qt 集成</td>
<td>强（支持信号槽、Qt 容器转换等）</td>
<td>无</td>
</tr>
<tr>
<td>性能优化</td>
<td>提供浅拷贝优化</td>
<td>无隐式共享，复制开销较大</td>
</tr>
<tr>
<td>适用场景</td>
<td>Qt 项目，数据量大</td>
<td>纯 C++ 项目，多线程安全</td>
</tr>
</tbody></table>
<p>两者的选择通常取决于项目的上下文以及你是否需要 Qt 提供的隐式共享和其他特性。如果你正在开发 Qt 应用程序，<code>QVector</code> 通常是更好的选择；如果是标准 C++ 项目，<code>std::vector</code> 更为适合。</p>

    </div>

    
    
    
        <div class="reward-container">
  <div>感谢老板支持！敬礼(^^ゞ</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="zhang junyi WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="zhang junyi Alipay">
        <p>Alipay</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Qt/" rel="tag"># Qt</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/09/04/notebook/C++/C++_03_%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/2024-09-04-C++_03_3_windows%E4%B8%8B%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0/" rel="prev" title="C++_03_3_windows下常见函数">
      <i class="fa fa-chevron-left"></i> C++_03_3_windows下常见函数
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/09/05/notebook/Qt/2024-09-05-qt_3_%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%9E%8B/" rel="next" title="qt_3_常见类型">
      qt_3_常见类型 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Qt-QString%E8%BD%AC%E4%B8%BAQByteArray"><span class="nav-number">2.</span> <span class="nav-text">Qt QString转为QByteArray</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BD%BF%E7%94%A8-toUtf8"><span class="nav-number">2.1.</span> <span class="nav-text">1. 使用 toUtf8()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8-toLocal8Bit"><span class="nav-number">2.2.</span> <span class="nav-text">2. 使用 toLocal8Bit()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BD%BF%E7%94%A8-toLatin1"><span class="nav-number">2.3.</span> <span class="nav-text">3. 使用 toLatin1()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="nav-number">2.4.</span> <span class="nav-text">示例代码：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E5%90%88%E9%80%82%E7%9A%84%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="nav-number">2.5.</span> <span class="nav-text">选择合适的编码方式：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Qt-%E4%BB%8E%E7%BB%88%E7%AB%AF%E8%8E%B7%E5%8F%96%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">3.</span> <span class="nav-text">Qt 从终端获取输入数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-1-%E4%BD%BF%E7%94%A8-QTextStream-%E8%AF%BB%E5%8F%96%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5"><span class="nav-number">4.</span> <span class="nav-text">方法 1: 使用 QTextStream 读取终端输入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="nav-number">4.1.</span> <span class="nav-text">示例代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C"><span class="nav-number">4.2.</span> <span class="nav-text">运行结果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-2-%E4%BD%BF%E7%94%A8%E6%A0%87%E5%87%86-C-%E7%9A%84-std-cin"><span class="nav-number">5.</span> <span class="nav-text">方法 2: 使用标准 C++ 的 std::cin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-1"><span class="nav-number">5.1.</span> <span class="nav-text">示例代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-1"><span class="nav-number">5.2.</span> <span class="nav-text">运行结果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-3-%E4%BD%BF%E7%94%A8%E6%A0%87%E5%87%86-C-%E5%87%BD%E6%95%B0-%E5%A6%82-scanf"><span class="nav-number">6.</span> <span class="nav-text">方法 3: 使用标准 C 函数 (如 scanf)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-2"><span class="nav-number">6.1.</span> <span class="nav-text">示例代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-2"><span class="nav-number">6.2.</span> <span class="nav-text">运行结果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E6%AF%94%E4%B8%8E%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">7.</span> <span class="nav-text">对比与注意事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8E-Qt-Event-Loop-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="nav-number">8.</span> <span class="nav-text">与 Qt Event Loop 的关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#C-std-vector%E4%B8%8EQVector%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2"><span class="nav-number">9.</span> <span class="nav-text">C++ std::vector与QVector互相转换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BB%8E-std-vector-%E8%BD%AC%E6%8D%A2%E4%B8%BA-QVector"><span class="nav-number">9.1.</span> <span class="nav-text">1. 从 std::vector 转换为 QVector</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-number">9.1.1.</span> <span class="nav-text">使用构造函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">9.1.2.</span> <span class="nav-text">使用赋值运算符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BB%8E-QVector-%E8%BD%AC%E6%8D%A2%E4%B8%BA-std-vector"><span class="nav-number">9.2.</span> <span class="nav-text">2. 从 QVector 转换为 std::vector</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">9.3.</span> <span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#C-Qt-std-string%E4%BC%A0%E7%BB%99QString%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81"><span class="nav-number">10.</span> <span class="nav-text">C++ Qt std::string传给QString中文乱码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Qt5-QWidget%E7%B1%BB%E5%AF%B9%E8%B1%A1%E4%B8%BB%E5%8A%A8%E5%85%B3%E9%97%AD%E7%AA%97%E5%8F%A3"><span class="nav-number">11.</span> <span class="nav-text">Qt5 QWidget类对象主动关闭窗口</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-3"><span class="nav-number">11.1.</span> <span class="nav-text">示例代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E8%AF%B4%E6%98%8E"><span class="nav-number">11.2.</span> <span class="nav-text">代码说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Qt5-%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%88%B0excel%E8%A1%A8%E6%A0%BC%E6%96%87%E4%BB%B6"><span class="nav-number">12.</span> <span class="nav-text">Qt5 保存数据到excel表格文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BD%BF%E7%94%A8-QtXlsxWriter-%E5%BA%93"><span class="nav-number">12.1.</span> <span class="nav-text">1. 使用 QtXlsxWriter 库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-QtXlsxWriter"><span class="nav-number">12.1.1.</span> <span class="nav-text">安装 QtXlsxWriter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">12.1.2.</span> <span class="nav-text">使用示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8-QAxObject%EF%BC%88%E4%BB%85%E9%80%82%E7%94%A8%E4%BA%8E-Windows%EF%BC%89"><span class="nav-number">12.2.</span> <span class="nav-text">2. 使用 QAxObject（仅适用于 Windows）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-1"><span class="nav-number">12.2.1.</span> <span class="nav-text">使用示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BD%BF%E7%94%A8-CSV-%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F"><span class="nav-number">12.3.</span> <span class="nav-text">3. 使用 CSV 文件格式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-2"><span class="nav-number">12.3.1.</span> <span class="nav-text">使用示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93"><span class="nav-number">12.4.</span> <span class="nav-text">方法总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Qt-QVector%E5%92%8CC%E9%A3%8E%E6%A0%BC%E6%95%B0%E7%BB%84%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2"><span class="nav-number">13.</span> <span class="nav-text">Qt  QVector和C风格数组互相转换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-C-%E9%A3%8E%E6%A0%BC%E6%95%B0%E7%BB%84%E8%BD%AC-QVector"><span class="nav-number">13.1.</span> <span class="nav-text">1. C 风格数组转 QVector</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-1%EF%BC%9A%E4%BD%BF%E7%94%A8-QVector-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-number">13.1.1.</span> <span class="nav-text">方法 1：使用 QVector 构造函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-2%EF%BC%9A%E4%BD%BF%E7%94%A8-QVector-append-%E6%88%96-QVector-push-back"><span class="nav-number">13.1.2.</span> <span class="nav-text">方法 2：使用 QVector::append() 或 QVector::push_back()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-QVector-%E8%BD%AC-C-%E9%A3%8E%E6%A0%BC%E6%95%B0%E7%BB%84"><span class="nav-number">13.2.</span> <span class="nav-text">2. QVector 转 C 风格数组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-1%EF%BC%9A%E9%80%9A%E8%BF%87-QVector-data"><span class="nav-number">13.2.1.</span> <span class="nav-text">方法 1：通过 QVector::data()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95-2%EF%BC%9A%E6%89%8B%E5%8A%A8%E5%A4%8D%E5%88%B6%E6%95%B0%E6%8D%AE%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84-C-%E9%A3%8E%E6%A0%BC%E6%95%B0%E7%BB%84"><span class="nav-number">13.2.2.</span> <span class="nav-text">方法 2：手动复制数据到一个新的 C 风格数组</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">13.3.</span> <span class="nav-text">3. 注意事项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">13.4.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#QVector%E5%92%8Cstd-vector%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB"><span class="nav-number">14.</span> <span class="nav-text">QVector和std::vector的区别和联系</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%85%B1%E5%90%8C%E7%82%B9"><span class="nav-number">14.1.</span> <span class="nav-text">1. 共同点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%B8%BB%E8%A6%81%E5%8C%BA%E5%88%AB"><span class="nav-number">14.2.</span> <span class="nav-text">2. 主要区别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E5%BA%93%E5%92%8C%E5%B9%B3%E5%8F%B0%E4%BE%9D%E8%B5%96"><span class="nav-number">14.2.1.</span> <span class="nav-text">2.1 库和平台依赖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E6%B5%85%E6%8B%B7%E8%B4%9D%EF%BC%88%E9%9A%90%E5%BC%8F%E5%85%B1%E4%BA%AB%EF%BC%89%E6%9C%BA%E5%88%B6"><span class="nav-number">14.2.2.</span> <span class="nav-text">2.2 浅拷贝（隐式共享）机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-%E6%80%A7%E8%83%BD%E5%92%8C%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8"><span class="nav-number">14.2.3.</span> <span class="nav-text">2.3 性能和线程安全</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-API-%E5%92%8C%E6%8E%A5%E5%8F%A3%E5%B7%AE%E5%BC%82"><span class="nav-number">14.2.4.</span> <span class="nav-text">2.4 API 和接口差异</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E7%AE%A1%E7%90%86"><span class="nav-number">14.2.5.</span> <span class="nav-text">2.5 内存分配与管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-6-%E5%8F%8D%E5%B0%84%E5%92%8C%E5%85%83%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F"><span class="nav-number">14.2.6.</span> <span class="nav-text">2.6 反射和元对象系统</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">14.3.</span> <span class="nav-text">3. 适用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-1"><span class="nav-number">14.4.</span> <span class="nav-text">总结</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">zhang junyi</p>
  <div class="site-description" itemprop="description">工作学习笔记</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">672</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">98</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/junyiha" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;junyiha" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://x.com/zhangjunyiha" title="Twitter → https:&#x2F;&#x2F;x.com&#x2F;zhangjunyiha" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhang junyi</span>
</div>

<!--
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
